{
  "version": 3,
  "sources": ["../../node_modules/dayjs/dayjs.min.js", "../../node_modules/dayjs/plugin/utc.js", "../js/tool.js", "../../node_modules/tabulator-tables/src/js/core/CoreFeature.js", "../../node_modules/tabulator-tables/src/js/core/tools/Helpers.js", "../../node_modules/tabulator-tables/src/js/core/tools/Popup.js", "../../node_modules/tabulator-tables/src/js/core/Module.js", "../../node_modules/tabulator-tables/src/js/modules/Accessor/defaults/accessors.js", "../../node_modules/tabulator-tables/src/js/modules/Accessor/Accessor.js", "../../node_modules/tabulator-tables/src/js/modules/Ajax/defaults/config.js", "../../node_modules/tabulator-tables/src/js/modules/Ajax/defaults/urlGenerator.js", "../../node_modules/tabulator-tables/src/js/modules/Ajax/defaults/loaderPromise.js", "../../node_modules/tabulator-tables/src/js/modules/Ajax/defaults/contentTypeFormatters.js", "../../node_modules/tabulator-tables/src/js/modules/Ajax/Ajax.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/defaults/pasteActions.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/defaults/pasteParsers.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/extensions/keybindings/bindings.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/extensions/keybindings/actions.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/extensions/extensions.js", "../../node_modules/tabulator-tables/src/js/modules/Clipboard/Clipboard.js", "../../node_modules/tabulator-tables/src/js/modules/ColumnCalcs/CalcComponent.js", "../../node_modules/tabulator-tables/src/js/core/cell/CellComponent.js", "../../node_modules/tabulator-tables/src/js/core/cell/Cell.js", "../../node_modules/tabulator-tables/src/js/core/column/ColumnComponent.js", "../../node_modules/tabulator-tables/src/js/core/column/defaults/options.js", "../../node_modules/tabulator-tables/src/js/core/column/Column.js", "../../node_modules/tabulator-tables/src/js/core/row/RowComponent.js", "../../node_modules/tabulator-tables/src/js/core/row/Row.js", "../../node_modules/tabulator-tables/src/js/modules/ColumnCalcs/defaults/calculations.js", "../../node_modules/tabulator-tables/src/js/modules/ColumnCalcs/ColumnCalcs.js", "../../node_modules/tabulator-tables/src/js/modules/DataTree/DataTree.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/csv.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/json.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/pdf.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/xlsx.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/html.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders/jsonLines.js", "../../node_modules/tabulator-tables/src/js/modules/Download/defaults/downloaders.js", "../../node_modules/tabulator-tables/src/js/modules/Download/Download.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/inputMask.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/input.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/textarea.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/number.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/range.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/date.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/time.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/datetime.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/List.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/list.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/star.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/progress.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/tickCross.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors/adaptable.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/defaults/editors.js", "../../node_modules/tabulator-tables/src/js/modules/Edit/Edit.js", "../../node_modules/tabulator-tables/src/js/modules/Export/ExportRow.js", "../../node_modules/tabulator-tables/src/js/modules/Export/ExportColumn.js", "../../node_modules/tabulator-tables/src/js/modules/Export/defaults/columnLookups.js", "../../node_modules/tabulator-tables/src/js/modules/Export/defaults/rowLookups.js", "../../node_modules/tabulator-tables/src/js/modules/Export/Export.js", "../../node_modules/tabulator-tables/src/js/modules/Filter/defaults/filters.js", "../../node_modules/tabulator-tables/src/js/modules/Filter/Filter.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/plaintext.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/html.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/textarea.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/money.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/link.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/image.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/tickCross.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/datetime.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/datetimediff.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/lookup.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/star.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/traffic.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/progress.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/color.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/buttonTick.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/buttonCross.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/toggle.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/rownum.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/handle.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/adaptable.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/array.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters/json.js", "../../node_modules/tabulator-tables/src/js/modules/Format/defaults/formatters.js", "../../node_modules/tabulator-tables/src/js/modules/Format/Format.js", "../../node_modules/tabulator-tables/src/js/modules/FrozenColumns/FrozenColumns.js", "../../node_modules/tabulator-tables/src/js/modules/FrozenRows/FrozenRows.js", "../../node_modules/tabulator-tables/src/js/modules/GroupRows/GroupComponent.js", "../../node_modules/tabulator-tables/src/js/modules/GroupRows/Group.js", "../../node_modules/tabulator-tables/src/js/modules/GroupRows/GroupRows.js", "../../node_modules/tabulator-tables/src/js/modules/History/defaults/undoers.js", "../../node_modules/tabulator-tables/src/js/modules/History/defaults/redoers.js", "../../node_modules/tabulator-tables/src/js/modules/History/extensions/keybindings/bindings.js", "../../node_modules/tabulator-tables/src/js/modules/History/extensions/keybindings/actions.js", "../../node_modules/tabulator-tables/src/js/modules/History/extensions/extensions.js", "../../node_modules/tabulator-tables/src/js/modules/History/History.js", "../../node_modules/tabulator-tables/src/js/modules/HtmlTableImport/HtmlTableImport.js", "../../node_modules/tabulator-tables/src/js/modules/Import/defaults/importers/csv.js", "../../node_modules/tabulator-tables/src/js/modules/Import/defaults/importers/json.js", "../../node_modules/tabulator-tables/src/js/modules/Import/defaults/importers/array.js", "../../node_modules/tabulator-tables/src/js/modules/Import/defaults/importers/xlsx.js", "../../node_modules/tabulator-tables/src/js/modules/Import/defaults/importers.js", "../../node_modules/tabulator-tables/src/js/modules/Import/Import.js", "../../node_modules/tabulator-tables/src/js/modules/Interaction/Interaction.js", "../../node_modules/tabulator-tables/src/js/modules/Keybindings/defaults/bindings.js", "../../node_modules/tabulator-tables/src/js/modules/Keybindings/defaults/actions.js", "../../node_modules/tabulator-tables/src/js/modules/Keybindings/Keybindings.js", "../../node_modules/tabulator-tables/src/js/modules/Menu/Menu.js", "../../node_modules/tabulator-tables/src/js/modules/MoveColumns/MoveColumns.js", "../../node_modules/tabulator-tables/src/js/modules/MoveRows/defaults/senders.js", "../../node_modules/tabulator-tables/src/js/modules/MoveRows/defaults/receivers.js", "../../node_modules/tabulator-tables/src/js/modules/MoveRows/MoveRows.js", "../../node_modules/tabulator-tables/src/js/modules/Mutator/defaults/mutators.js", "../../node_modules/tabulator-tables/src/js/modules/Mutator/Mutator.js", "../../node_modules/tabulator-tables/src/js/modules/Page/defaults/pageCounters/rows.js", "../../node_modules/tabulator-tables/src/js/modules/Page/defaults/pageCounters/pages.js", "../../node_modules/tabulator-tables/src/js/modules/Page/defaults/pageCounters.js", "../../node_modules/tabulator-tables/src/js/modules/Page/Page.js", "../../node_modules/tabulator-tables/src/js/modules/Persistence/defaults/readers.js", "../../node_modules/tabulator-tables/src/js/modules/Persistence/defaults/writers.js", "../../node_modules/tabulator-tables/src/js/modules/Persistence/Persistence.js", "../../node_modules/tabulator-tables/src/js/modules/Popup/Popup.js", "../../node_modules/tabulator-tables/src/js/modules/Print/Print.js", "../../node_modules/tabulator-tables/src/js/modules/ReactiveData/ReactiveData.js", "../../node_modules/tabulator-tables/src/js/modules/ResizeColumns/ResizeColumns.js", "../../node_modules/tabulator-tables/src/js/modules/ResizeRows/ResizeRows.js", "../../node_modules/tabulator-tables/src/js/modules/ResizeTable/ResizeTable.js", "../../node_modules/tabulator-tables/src/js/modules/ResponsiveLayout/extensions/formatters/responsiveCollapse.js", "../../node_modules/tabulator-tables/src/js/modules/ResponsiveLayout/extensions/extensions.js", "../../node_modules/tabulator-tables/src/js/modules/ResponsiveLayout/ResponsiveLayout.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRow/extensions/formatters/rowSelection.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRow/extensions/extensions.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRow/SelectRow.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/RangeComponent.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/Range.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/keybindings/bindings.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/keybindings/actions.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/clipboard/pasteActions.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/clipboard/pasteParsers.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/export/columnLookups.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/export/rowLookups.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/extensions/extensions.js", "../../node_modules/tabulator-tables/src/js/modules/SelectRange/SelectRange.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/number.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/string.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/datetime.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/date.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/time.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/boolean.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/array.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/exists.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters/alphanum.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/defaults/sorters.js", "../../node_modules/tabulator-tables/src/js/modules/Sort/Sort.js", "../../node_modules/tabulator-tables/src/js/modules/Spreadsheet/GridCalculator.js", "../../node_modules/tabulator-tables/src/js/modules/Spreadsheet/SheetComponent.js", "../../node_modules/tabulator-tables/src/js/modules/Spreadsheet/Sheet.js", "../../node_modules/tabulator-tables/src/js/modules/Spreadsheet/Spreadsheet.js", "../../node_modules/tabulator-tables/src/js/modules/Tooltip/Tooltip.js", "../../node_modules/tabulator-tables/src/js/modules/Validate/defaults/validators.js", "../../node_modules/tabulator-tables/src/js/modules/Validate/Validate.js", "../../node_modules/tabulator-tables/src/js/core/defaults/options.js", "../../node_modules/tabulator-tables/src/js/core/tools/OptionsList.js", "../../node_modules/tabulator-tables/src/js/core/rendering/Renderer.js", "../../node_modules/tabulator-tables/src/js/core/rendering/renderers/BasicHorizontal.js", "../../node_modules/tabulator-tables/src/js/core/rendering/renderers/VirtualDomHorizontal.js", "../../node_modules/tabulator-tables/src/js/core/ColumnManager.js", "../../node_modules/tabulator-tables/src/js/core/rendering/renderers/BasicVertical.js", "../../node_modules/tabulator-tables/src/js/core/rendering/renderers/VirtualDomVertical.js", "../../node_modules/tabulator-tables/src/js/core/RowManager.js", "../../node_modules/tabulator-tables/src/js/core/FooterManager.js", "../../node_modules/tabulator-tables/src/js/core/tools/InteractionMonitor.js", "../../node_modules/tabulator-tables/src/js/core/tools/ComponentFunctionBinder.js", "../../node_modules/tabulator-tables/src/js/core/tools/DataLoader.js", "../../node_modules/tabulator-tables/src/js/core/tools/ExternalEventBus.js", "../../node_modules/tabulator-tables/src/js/core/tools/InternalEventBus.js", "../../node_modules/tabulator-tables/src/js/core/tools/DeprecationAdvisor.js", "../../node_modules/tabulator-tables/src/js/core/tools/DependencyRegistry.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/defaults/modes/fitData.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/defaults/modes/fitDataGeneral.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/defaults/modes/fitDataStretch.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/defaults/modes/fitColumns.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/defaults/modes.js", "../../node_modules/tabulator-tables/src/js/modules/Layout/Layout.js", "../../node_modules/tabulator-tables/src/js/modules/Localize/defaults/langs.js", "../../node_modules/tabulator-tables/src/js/modules/Localize/Localize.js", "../../node_modules/tabulator-tables/src/js/modules/Comms/Comms.js", "../../node_modules/tabulator-tables/src/js/core/tools/TableRegistry.js", "../../node_modules/tabulator-tables/src/js/core/tools/ModuleBinder.js", "../../node_modules/tabulator-tables/src/js/core/tools/Alert.js", "../../node_modules/tabulator-tables/src/js/core/Tabulator.js", "../../node_modules/tabulator-tables/src/js/core/TabulatorFull.js", "../../node_modules/tabulator-tables/src/js/core/row/PseudoRow.js", "../../node_modules/marked/src/defaults.ts", "../../node_modules/marked/src/rules.ts", "../../node_modules/marked/src/helpers.ts", "../../node_modules/marked/src/Tokenizer.ts", "../../node_modules/marked/src/Lexer.ts", "../../node_modules/marked/src/Renderer.ts", "../../node_modules/marked/src/TextRenderer.ts", "../../node_modules/marked/src/Parser.ts", "../../node_modules/marked/src/Hooks.ts", "../../node_modules/marked/src/Instance.ts", "../../node_modules/marked/src/marked.ts", "../../config.js"],
  "sourcesContent": ["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));", "!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_utc=i()}(this,(function(){\"use strict\";var t=\"minute\",i=/[+-]\\d\\d(?::?\\d\\d)?/g,e=/([+-]|\\d\\d)/g;return function(s,f,n){var u=f.prototype;n.utc=function(t){var i={date:t,utc:!0,args:arguments};return new f(i)},u.utc=function(i){var e=n(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},u.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var r=u.parse;u.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),r.call(this,t)};var o=u.init;u.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var a=u.utcOffset;u.utcOffset=function(s,f){var n=this.$utils().u;if(n(s))return this.$u?0:n(this.$offset)?a.call(this):this.$offset;if(\"string\"==typeof s&&(s=function(t){void 0===t&&(t=\"\");var s=t.match(i);if(!s)return null;var f=(\"\"+s[0]).match(e)||[\"-\",0,0],n=f[0],u=60*+f[1]+ +f[2];return 0===u?0:\"+\"===n?u:-u}(s),null===s))return this;var u=Math.abs(s)<=16?60*s:s;if(0===u)return this.utc(f);var r=this.clone();if(f)return r.$offset=u,r.$u=!1,r;var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(r=this.local().add(u+o,t)).$offset=u,r.$x.$localOffset=o,r};var h=u.format;u.format=function(t){var i=t||(this.$u?\"YYYY-MM-DDTHH:mm:ss[Z]\":\"\");return h.call(this,i)},u.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var l=u.toDate;u.toDate=function(t){return\"s\"===t&&this.$offset?n(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\")).toDate():l.call(this)};var c=u.diff;u.diff=function(t,i,e){if(t&&this.$u===t.$u)return c.call(this,t,i,e);var s=this.local(),f=n(t).local();return c.call(s,f,i,e)}}}));", "// Local JS imports (bundled)\r\nimport $ from 'jquery'\r\nimport * as bootstrap from 'bootstrap'\r\nimport { TabulatorFull as Tabulator } from 'tabulator-tables'\r\nimport { marked } from 'marked'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport { Fancybox } from '@fancyapps/ui'\r\n\r\n// Local CSS imports (bundled)\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport 'select2/dist/css/select2.min.css'\r\nimport '@fancyapps/ui/dist/fancybox/fancybox.css'\r\nimport '../css/tabulator-bootstrap5-custom.css'\r\n\r\n// API configuration\r\nimport { API_CONFIG, apiRequest, loadingManager, showError } from '../../config.js'\r\n\r\n// Expose globals for libraries expecting window bindings\r\nwindow.$ = window.jQuery = $\r\nwindow.bootstrap = bootstrap\r\nwindow.Tabulator = Tabulator\r\nwindow.marked = marked\r\nwindow.dayjs = dayjs\r\nwindow.Fancybox = Fancybox\r\n\r\nlet fancyboxPromise\r\nwindow.loadFancybox = async () => {\r\n  if (window.Fancybox) return window.Fancybox\r\n  if (!fancyboxPromise) {\r\n    fancyboxPromise = import('@fancyapps/ui').then(mod => {\r\n      const fb = mod.Fancybox || mod.default || mod\r\n      window.Fancybox = fb\r\n      return fb\r\n    })\r\n  }\r\n  return fancyboxPromise\r\n}\r\n\r\n// Load select2 after jQuery is set on window (plugin expects global jQuery)\r\n{\r\n  const mod = await import('select2/dist/js/select2.full.js')\r\n  // In case the module exports a factory instead of self-registering, bind it to our jQuery\r\n  if (!$.fn.select2) {\r\n    const maybeFactory = mod?.default || mod\r\n    if (typeof maybeFactory === 'function') {\r\n      maybeFactory($)\r\n    }\r\n  }\r\n}\r\n\r\n// Load dayjs UTC plugin\r\ndayjs.extend(utc)\r\n\r\n//------  coding by hand  ------\r\nlet nav = `\r\n<nav class=\"navbar fixed-top navbar-expand-lg bg-body-tertiary px-5\">\r\n  <div class=\"container-fluid\">\r\n    <a class=\"navbar-brand\" href='/' target='_self'>\u82FA\u54B2\u3079\u308A\u3043\u975E\u516C\u5F0F\u5009\u5EAB</a>\r\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n      <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarContent\">\r\n      <ul class=\"navbar-nav\">\r\n\t\t<li class=\"nav-item dropdown\">\r\n          <button class=\"nav-link dropdown-toggle\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            Berry's\r\n          </button>\r\n          <ul class=\"dropdown-menu\">\r\n            <li><a class=\"dropdown-item setContent\" href='/profile' data-ext='.htm'>Profile</a></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/history' data-ext='.md'>History</a></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/clothes' data-ext='.htm'>Clothes</a></li>\r\n          </ul>\r\n        </li>\r\n        <!--<li class=\"nav-item\">\r\n          <a class=\"nav-link dropdown-item setContent\" href='/history' data-ext='.md'>History</a>\r\n        </li>-->\r\n        <li class=\"nav-item dropdown\">\r\n          <button class=\"nav-link dropdown-toggle\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            List&nbsp;&nbsp;&nbsp;\r\n          </button>\r\n          <ul class=\"dropdown-menu\">\r\n            <li><a class=\"dropdown-item setContent\" href='/songlist' data-ext=''>Song List</a></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/streamlist' data-ext='.json'>Stream List</a></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/setlist' data-ext='.json'>Set List</a></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/aliases' data-ext=''>Aliases</a></li>\r\n            <li><hr class=\"dropdown-divider\"></li>\r\n            <li><a class=\"dropdown-item setContent\" href='/analytics' data-ext='.htm'>Analytics</a></li>\r\n          </ul>\r\n        </li>\r\n        <li class=\"nav-item dropdown\">\r\n          <button class=\"nav-link dropdown-toggle\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            Other wiki\r\n          </button>\r\n          <ul class=\"dropdown-menu\">\r\n            <li><a class=\"dropdown-item\" href=\"https://seesaawiki.jp/maisakiberry/\">seesaawiki</a></li>\r\n            <li><a class=\"dropdown-item\" href=\"https://hackmd.io/@MaisakiBerry\">HackMD</a></li>\r\n            <li><a class=\"dropdown-item\" href=\"https://virtualyoutuber.fandom.com/wiki/Maisaki_Berry\">Fandom</a></li>\r\n          </ul>\r\n        </li>\r\n        <li class=\"nav-item dropdown\">\r\n          <button class=\"nav-link dropdown-toggle\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            <span>Fan </span><svg class='w' xmlns=\"http://www.w3.org/2000/svg\" height=\"1.25em\" viewBox=\"0 0 640 512\"><path d=\"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z\"/></svg>\r\n          </button>\r\n          <ul class=\"dropdown-menu\">\r\n            <li><a class=\"dropdown-item\" href=\"https://discord.gg/sXdaXB7\">\u4E2D\u6587</a></li>\r\n            <li><a class=\"dropdown-item\" href=\"https://discord.gg/csQ77FEyTA\">English</a></li>\r\n          </ul>\r\n        </li>\r\n        <li class='nav-item py-2 py-lg-1 col-12 col-lg-auto'>\r\n          <div class='vr d-none d-lg-flex h-100 mx-lg-2 text-white'></div>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link dropdown-item\" href='https://github.com/maisakiberryfan/website'>\r\n            <span><svg class='w' xmlns=\"http://www.w3.org/2000/svg\" height=\"1.5em\" viewBox=\"0 0 496 512\"><path d=\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\"/></svg></span>\r\n          </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link dropdown-item\" href='fileUpload.html'>fileUpload</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link dropdown-item setContent\" href='/howTo' data-ext='.md'>How To Edit</a>\r\n        </li>\r\n      </ul>\r\n\r\n      <!--\u53F3\u908A\u653E\u5B98\u65B9\u9023\u7D50-->\r\n      <ui class=\"navbar-nav flex-row flex-wrap ms-md-auto\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link px-2\" href=\"https://www.maisakiberry.com/\">\r\n            <span>\u516C\u5F0F&emsp;</span><svg class='w' xmlns=\"http://www.w3.org/2000/svg\" height=\"1.25em\" viewBox=\"0 0 576 512\"><style>.w{fill:#fff}</style><path d=\"M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z\"/></svg>\r\n          </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link px-2\" href=\"https://twitter.com/MaisakiBerry\">\r\n            <svg class='b' xmlns=\"http://www.w3.org/2000/svg\" height=\"1.25em\" viewBox=\"0 0 512 512\"><style>.b{fill:#1DA1F2}</style><path d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"/></svg>\r\n          </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link px-2\" href=\"https://www.youtube.com/channel/UC7A7bGRVdIwo93nqnA3x-OQ\">\r\n            <svg class='r' xmlns=\"http://www.w3.org/2000/svg\" height=\"1.25em\" viewBox=\"0 0 576 512\"><style>.r{fill:#ff0000}</style><path d=\"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z\"/></svg>\r\n          </a>\r\n        </li>\r\n      </ui>\r\n    </div>\r\n  </div>\r\n</nav>\r\n`\r\n\r\n$(()=>{\r\n  \r\n  // Set marked options\r\n  marked.use()\r\n\r\n  //message modal \r\n  var msgModal = new bootstrap.Modal(document.getElementById('modal'))\r\n\r\n  $('#nav').html(nav)\r\n\r\n  $('.setContent').click((e)=>{\r\n    e.preventDefault()\r\n    setContent(e.target.pathname, true)\r\n  })\r\n\r\n  function setContent(path, clk=false){\r\n    //clk: by click\r\n    /*\r\n      verify user use what page\r\n      at least length 1: /\r\n    */\r\n\r\n    var url='', title='', process=''\r\n\r\n    if(path === undefined || path.length < 2 || !path.includes('/')){\r\n      url = 'pages/main.md'\r\n    }\r\n    else{\r\n      url = path.slice(1).replace(/\\/$/, '')  // Remove trailing slash\r\n      const normalizedPath = path.replace(/\\/$/, '')  // Also normalize path for navbar search\r\n\r\n      //find title\r\n      let t = $(\"#navbarContent a[href='\"+normalizedPath+\"']\")\r\n        if(t.length==0){\r\n          $('#modalFooter').empty()\r\n          //not found = url mismatch\r\n          $('#modalMsg').html('Load page fail.<br>If you think the url is correct, please report in github issues.')\r\n          $('#modalFooter').append('<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"urlError\">OK</button>')\r\n          msgModal.show()\r\n          url = 'pages/main.md'\r\n        }\r\n        else{\r\n          title = t.text()+' - '\r\n          process = url\r\n\r\n          // \u6839\u64DA\u6A94\u6848\u985E\u578B\u8A2D\u5B9A\u6B63\u78BA\u7684\u8DEF\u5F91\r\n          let ext = t.data().ext\r\n          if(ext === '.json') {\r\n            // Use new API endpoints instead of JSON files\r\n            if (process === 'streamlist') {\r\n              url = API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.streamlist\r\n            } else if (process === 'setlist') {\r\n              url = API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.setlist\r\n            } else {\r\n              url = 'assets/data/' + url + ext\r\n            }\r\n          } else if(ext === '.htm' || ext === '.md') {\r\n            url = 'pages/' + url + ext\r\n          } else {\r\n            url += ext\r\n          }\r\n\r\n          //songlist uses API endpoint now\r\n          if(process=='songlist') {\r\n            url = API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.songlist\r\n          }\r\n\r\n          //aliases uses API endpoint\r\n          if(process=='aliases') {\r\n            url = API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.aliases\r\n          }\r\n        }\r\n\r\n      if(clk){\r\n        //by clicking navbar->write to history\r\n        history.pushState({}, '', path)\r\n      }\r\n    }\r\n\r\n    // Set page title\r\n    document.title = title + '\u82FA\u54B2\u3079\u308A\u3043\u975E\u516C\u5F0F\u5009\u5EAB'\r\n\r\n    // For API endpoints (setlist, streamlist, songlist, aliases), skip $.ajax() and directly call configJsonTable\r\n    // This eliminates duplicate requests (previously $.ajax() + Tabulator's ajaxURL)\r\n    if(process=='setlist' || process=='streamlist' || process=='songlist' || process=='aliases'){\r\n      let c = `\r\n            <button id='reloadBtn' class='btn btn-outline-light' data-disable-on-loading=\"true\">\r\n              <span class=\"loading-indicator spinner-border spinner-border-sm me-2\" style=\"display: none;\"></span>\r\n              Reload Data\r\n            </button>\r\n            <button id='edit' class='btn btn-outline-light' data-bs-toggle=\"button\">Edit mode</button>\r\n            <button id='`+ (process=='streamlist'?'addStreamRow':(process=='aliases'?'addAlias':'addRow')) + `' class='btn btn-outline-light addRow' disabled>Add Row</button>`\r\n            + (process=='streamlist'?`<button id='addFromList' class='btn btn-outline-light addRow' disabled>Add from list(Beta)</button>`:'') +\r\n            (process=='aliases'?`<button id='batchAddAliases' class='btn btn-outline-light addRow' disabled>\uD83D\uDCE6 Batch Add</button>\r\n            <button id='testAlias' class='btn btn-outline-light'>\uD83E\uDDEA Test Alias</button>`:'') +\r\n            `<button id='deleteRow' class='btn btn-outline-light'>Delete Row</button>\r\n            <button id='dlcsv' class='btn btn-outline-light'>Get CSV</button>\r\n            <button id='dljson' class='btn btn-outline-light'>Get JSON</button>`\r\n            + (process=='setlist'?`\r\n            <div class=\"my-2\">\r\n              <button id='addNewSongInSetlist' class='btn btn-success' style=\"display: none;\">\r\n                \u2795 \u65B0\u589E\u521D\u56DE\u6B4C\u66F2 (Add New Song)\r\n              </button>\r\n            </div>`:'') +\r\n            `<div id='setTableMsg' class='p-3'>&emsp;</div>\r\n            <div id='tb' class='table-dark table-striped table-bordered'>progressing...</div>\r\n              `\r\n      $(\"#content\").empty().append(c)\r\n      configJsonTable(url, process)\r\n    }\r\n    // For other content (markdown, HTML), use $.ajax() to fetch content\r\n    else {\r\n      $.ajax({\r\n        url:url,\r\n        //cache:false\r\n      }).done((d, textStatus, request)=>{\r\n        let ext = url.split('.')  //check .html\r\n\r\n        if(ext[1] == 'htm'){\r\n          $(\"#content\").empty().append(d)\r\n        }\r\n        else{\r\n          var c =\"<div id='md'>\"+marked.parse(d)+\"</div>\"\r\n\r\n          $(\"#content\").empty().append(c)\r\n\r\n          //append latest video info / update info\r\n          if(url == 'pages/main.md'){\r\n            getLatest().then(r=>{\r\n              $(\"#content\").append(r)\r\n            })\r\n          }\r\n\r\n          //if data is remote, tell the source\r\n          if(url.includes('http')){\r\n            if(url.includes('hackmd.io')) {url=url.replace('/download', '')}\r\n            $(\"#content\").prepend(\"<div id='source' class='mb-2'>Source: <a href='\"+url+\"'>\"+url+\"</a></div>\")\r\n          }\r\n\r\n          // Only apply setContentMDTable to Markdown tables (not database-driven tables)\r\n          setContentMDTable()\r\n        }\r\n      }).fail((jqXHR, textStatus)=>{\r\n        $('#modalFooter').empty()\r\n        $('#modalMsg').html('Load page fail\uFF1A'+ textStatus + '<br>If you think the url is correct, please report in github issues.')\r\n        $('#modalFooter').append('<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"urlError\">OK</button>')\r\n        msgModal.show()\r\n      })\r\n    }\r\n  }\r\n  \r\n  function setContentMDTable(){\r\n    let t = [...document.querySelectorAll('table')].forEach(e=>{\r\n      new Tabulator(e, {\r\n        columnDefaults:{\r\n          width:200,\r\n          headerFilter:true,\r\n        },\r\n        height:700,\r\n        persistence:true,\r\n        downloadRowRange:'all',\r\n        selectableRows:true,\r\n        selectableRowsRangeMode:\"click\",\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n  // Dynamic field data generation for both array and string fields\r\n  // Supports bilingual fields: pass fieldEn to show as \"\u65E5\u6587 | \u82F1\u6587\" format\r\n  function getDynamicFieldData(table, field, fieldEn) {\r\n    try {\r\n      // Check if data is processed and ready\r\n      if (!window.tableDataLoaded) {\r\n        return [];\r\n      }\r\n\r\n      const tableData = table ? table.getData() : (window.jsonTable ? window.jsonTable.getData() : []);\r\n      const uniqueOptions = new Map();  // Use Map to avoid duplicates by Japanese value\r\n\r\n      if (tableData.length === 0) {\r\n        return [];\r\n      }\r\n\r\n      tableData.forEach(row => {\r\n        const fieldValue = row[field];\r\n\r\n        if (Array.isArray(fieldValue)) {\r\n          // Handle array fields (like categories)\r\n          fieldValue.forEach(val => {\r\n            if (val && typeof val === 'string' && val.trim().length > 0) {\r\n              const trimmedVal = val.trim();\r\n              if (!uniqueOptions.has(trimmedVal)) {\r\n                uniqueOptions.set(trimmedVal, {id: trimmedVal, text: trimmedVal});\r\n              }\r\n            }\r\n          });\r\n        } else if (fieldValue !== null && fieldValue !== undefined && fieldValue !== '') {\r\n          // Handle string fields (like songName, artist, note)\r\n          const jaValue = String(fieldValue).trim();\r\n\r\n          if (jaValue.length > 0) {\r\n            // If bilingual field is provided, format as \"\u65E5\u6587 | \u82F1\u6587\"\r\n            if (fieldEn) {\r\n              const enValue = row[fieldEn];\r\n              let displayText;\r\n\r\n              if (enValue && String(enValue).trim() && String(enValue).trim() !== jaValue) {\r\n                displayText = `${jaValue} | ${String(enValue).trim()}`;\r\n              } else {\r\n                displayText = jaValue;\r\n              }\r\n\r\n              // Use Japanese value as key to avoid duplicates\r\n              if (!uniqueOptions.has(jaValue)) {\r\n                uniqueOptions.set(jaValue, {id: jaValue, text: displayText});\r\n              }\r\n            } else {\r\n              // No bilingual support, use simple format\r\n              if (!uniqueOptions.has(jaValue)) {\r\n                uniqueOptions.set(jaValue, {id: jaValue, text: jaValue});\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      const result = Array.from(uniqueOptions.values()).sort((a, b) => a.text.localeCompare(b.text));\r\n      return result;\r\n    } catch (error) {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  //--- url Error ---\r\n  $('#modalFooter').on('click', '#urlError', ()=>{\r\n    setContent()\r\n    $('#modalFooter').empty()\r\n  })\r\n\r\n  //--- Context Menu for streamlist ---\r\n  function showContextMenu(x, y, items) {\r\n    // Remove any existing context menu\r\n    $('.context-menu').remove()\r\n\r\n    // Create context menu\r\n    const menu = $('<div class=\"context-menu\"></div>')\r\n\r\n    items.forEach(item => {\r\n      if (item.type === 'divider') {\r\n        menu.append('<div class=\"context-menu-divider\"></div>')\r\n      } else {\r\n        const menuItem = $(`<div class=\"context-menu-item\">${item.label}</div>`)\r\n        menuItem.on('click', () => {\r\n          item.action()\r\n          menu.remove()\r\n        })\r\n        menu.append(menuItem)\r\n      }\r\n    })\r\n\r\n    // Position and show menu\r\n    menu.css({ left: x + 'px', top: y + 'px' })\r\n    $('body').append(menu)\r\n\r\n    // Close menu on outside click\r\n    $(document).one('click', () => menu.remove())\r\n\r\n    // Prevent menu from being immediately closed by the same click\r\n    setTimeout(() => {\r\n      $(document).on('click.contextmenu', () => {\r\n        menu.remove()\r\n        $(document).off('click.contextmenu')\r\n      })\r\n    }, 10)\r\n  }\r\n\r\n  // Batch Editor variables\r\n  let batchTable = null\r\n  let batchStreamData = null\r\n  const batchEditModal = new bootstrap.Modal(document.getElementById('modalBatchEdit'))\r\n\r\n  // Batch editor Song Select2 - stores songID, displays \"songName - artist\"\r\n  const batchSongSelect2Editor = function(cell, onRendered, success, cancel){\r\n    const editor = document.createElement(\"select\")\r\n    let hasSucceeded = false\r\n\r\n    onRendered(async function(){\r\n      let op = $(editor)\r\n\r\n      try {\r\n        // Fetch songlist data from API\r\n        const songlist = await apiRequest('GET', API_CONFIG.ENDPOINTS.songlist)\r\n\r\n        // Format: {id: songID, text: \"songName - artist\"}\r\n        const dataOptions = songlist.map(s => ({\r\n          id: s.songID,\r\n          text: `${s.songName} - ${s.artist}`,\r\n          songName: s.songName,\r\n          artist: s.artist,\r\n          songNameEn: s.songNameEn,\r\n          artistEn: s.artistEn\r\n        })).sort((a, b) => a.text.localeCompare(b.text))\r\n\r\n        op.select2({\r\n          data: dataOptions,\r\n          width: '100%',\r\n          dropdownAutoWidth: true,\r\n          placeholder: 'Select song...',\r\n          allowClear: true,\r\n          multiple: false,\r\n          dropdownParent: $('#modalBatchEdit')\r\n        })\r\n\r\n        // Set current value (songID)\r\n        const val = cell.getValue()\r\n        if (val) {\r\n          op.val(val).trigger('change.select2')\r\n        }\r\n\r\n        op.on('select2:select select2:clear', function(e){\r\n          if (hasSucceeded) return\r\n\r\n          const selectedId = op.val()\r\n          const selectedData = op.select2('data')[0]\r\n\r\n          // Update row data with songID and display info\r\n          const row = cell.getRow()\r\n          const rowData = row.getData()\r\n          rowData.songID = selectedId || null\r\n          if (selectedData && selectedData.songName) {\r\n            rowData.songDisplay = selectedData.text\r\n            rowData.songName = selectedData.songName\r\n            rowData.artist = selectedData.artist\r\n            rowData.songNameEn = selectedData.songNameEn\r\n            rowData.artistEn = selectedData.artistEn\r\n          } else {\r\n            rowData.songDisplay = ''\r\n            rowData.songName = ''\r\n            rowData.artist = ''\r\n            rowData.songNameEn = ''\r\n            rowData.artistEn = ''\r\n          }\r\n\r\n          // Update the row to trigger formatter refresh\r\n          row.update(rowData)\r\n\r\n          hasSucceeded = true\r\n          success(selectedId)\r\n        })\r\n\r\n        op.on('select2:close', function(){\r\n          if (hasSucceeded) return\r\n\r\n          // Get current value on close\r\n          const selectedId = op.val()\r\n          const selectedData = op.select2('data')[0]\r\n\r\n          // Update display info even on close\r\n          const row = cell.getRow()\r\n          const rowData = row.getData()\r\n          rowData.songID = selectedId || null\r\n          if (selectedData && selectedData.songName) {\r\n            rowData.songDisplay = selectedData.text\r\n            rowData.songName = selectedData.songName\r\n            rowData.artist = selectedData.artist\r\n          } else {\r\n            rowData.songDisplay = ''\r\n            rowData.songName = ''\r\n            rowData.artist = ''\r\n          }\r\n\r\n          // Update the row to trigger formatter refresh\r\n          row.update(rowData)\r\n\r\n          hasSucceeded = true\r\n          success(selectedId)\r\n        })\r\n\r\n      } catch (error) {\r\n        console.error('Failed to load select2 data:', error)\r\n        if (!hasSucceeded) {\r\n          hasSucceeded = true\r\n          success(cell.getValue())\r\n        }\r\n      }\r\n    })\r\n\r\n    return editor\r\n  }\r\n\r\n  // Select2 editor for setlist table song selection\r\n  const setlistSongSelect2Editor = function(cell, onRendered, success, cancel) {\r\n    const editor = document.createElement(\"select\")\r\n    let hasSucceeded = false\r\n\r\n    onRendered(async function() {\r\n      const $editor = $(editor)\r\n\r\n      try {\r\n        // Fetch songlist data from API\r\n        console.log('[setlistSongSelect2Editor] Fetching songlist from API...')\r\n        const songlist = await apiRequest('GET', API_CONFIG.ENDPOINTS.songlist)\r\n        console.log(`[setlistSongSelect2Editor] Loaded ${songlist.length} songs`)\r\n\r\n        // Format: {id: songID, text: \"songName - artist\", with bilingual data}\r\n        const dataOptions = songlist.map(s => ({\r\n          id: s.songID,\r\n          text: `${s.songName} - ${s.artist}`,  // \u9078\u4E2D\u5F8C\u986F\u793A\u7684\u683C\u5F0F\r\n          songName: s.songName,\r\n          songNameEn: s.songNameEn,\r\n          artist: s.artist,\r\n          artistEn: s.artistEn\r\n        })).sort((a, b) => a.text.localeCompare(b.text))\r\n\r\n        // Initialize Select2\r\n        $editor.select2({\r\n          data: dataOptions,\r\n          width: '100%',\r\n          dropdownAutoWidth: true,\r\n          placeholder: 'Select song / \u9078\u64C7\u6B4C\u66F2...',\r\n          allowClear: true,\r\n          tags: false,  // \u660E\u78BA\u7981\u6B62\u81EA\u7531\u8F38\u5165\r\n          dropdownParent: $('body')  // Avoid z-index issues\r\n          // \u4F7F\u7528\u9810\u8A2D\u7684 Select2 \u986F\u793A\u683C\u5F0F\uFF1A\u300C\u6B4C\u540D - \u6B4C\u624B\u300D\u55AE\u884C\u683C\u5F0F\r\n        })\r\n\r\n        // Set current value from songID\r\n        const currentSongID = cell.getRow().getData().songID\r\n        if (currentSongID) {\r\n          console.log(`[setlistSongSelect2Editor] Setting current value: ${currentSongID}`)\r\n          $editor.val(currentSongID).trigger('change.select2')\r\n        }\r\n\r\n        // Handle selection change\r\n        $editor.on('select2:select select2:clear', async function(e) {\r\n          if (hasSucceeded) return\r\n\r\n          const selectedId = $editor.val()\r\n          const selectedData = $editor.select2('data')[0]\r\n\r\n          console.log('[setlistSongSelect2Editor] Selection changed:', {\r\n            songID: selectedId,\r\n            songName: selectedData?.songName,\r\n            artist: selectedData?.artist\r\n          })\r\n\r\n          // Update row data\r\n          const row = cell.getRow()\r\n          const rowData = row.getData()\r\n\r\n          // Update local data\r\n          if (selectedData && selectedData.songName) {\r\n            row.update({\r\n              songID: selectedId,\r\n              songName: selectedData.songName,\r\n              artist: selectedData.artist,\r\n              songNameEn: selectedData.songNameEn,\r\n              artistEn: selectedData.artistEn\r\n            })\r\n          } else {\r\n            row.update({\r\n              songID: null,\r\n              songName: '',\r\n              artist: '',\r\n              songNameEn: '',\r\n              artistEn: ''\r\n            })\r\n          }\r\n\r\n          // Sync to API immediately\r\n          try {\r\n            const endpoint = API_CONFIG.ENDPOINTS.setlist\r\n            const id = `${rowData.streamID}/${rowData.trackNo}`\r\n            const updateData = { songID: selectedId || null }\r\n\r\n            console.log(`[setlistSongSelect2Editor] Syncing to API: PUT ${endpoint}/${id}`, updateData)\r\n            await apiRequest('PUT', `${endpoint}/${id}`, updateData)\r\n\r\n            // Show success indicator\r\n            cell.getElement().style.backgroundColor = '#d4edda'\r\n            setTimeout(() => {\r\n              cell.getElement().style.backgroundColor = ''\r\n            }, 1000)\r\n\r\n            console.log(`[setlistSongSelect2Editor] \u2705 Song updated successfully`)\r\n          } catch (error) {\r\n            console.error('[setlistSongSelect2Editor] \u274C Error syncing to API:', error)\r\n            alert(`\u5132\u5B58\u5931\u6557 / Save failed\uFF1A${error.message}`)\r\n            // Revert on error\r\n            cancel()\r\n            return\r\n          }\r\n\r\n          hasSucceeded = true\r\n          success(selectedData ? selectedData.songName : '')  // Return songName for the cell value\r\n        })\r\n\r\n        // Handle close without selection\r\n        $editor.on('select2:close', function() {\r\n          if (!hasSucceeded) {\r\n            console.log('[setlistSongSelect2Editor] Closed without selection, canceling')\r\n            cancel()\r\n          }\r\n        })\r\n\r\n        // Auto-open dropdown after initialization\r\n        console.log('[setlistSongSelect2Editor] Opening dropdown...')\r\n        setTimeout(() => $editor.select2('open'), 50)\r\n\r\n      } catch (error) {\r\n        console.error('[setlistSongSelect2Editor] \u274C Failed to initialize:', error)\r\n        alert('\u8F09\u5165\u6B4C\u66F2\u6E05\u55AE\u5931\u6557 / Failed to load songlist\uFF1A' + error.message)\r\n        if (!hasSucceeded) {\r\n          hasSucceeded = true\r\n          cancel()\r\n        }\r\n      }\r\n    })\r\n\r\n    return editor\r\n  }\r\n\r\n  // Custom formatter to display \"songName - artist\" even though cell stores songID\r\n  const songDisplayFormatter = function(cell) {\r\n    const rowData = cell.getRow().getData()\r\n    return rowData.songDisplay || ''\r\n  }\r\n\r\n  async function openBatchEditor(streamData) {\r\n    console.log('Opening batch editor for:', streamData)\r\n    batchStreamData = streamData\r\n\r\n    // Set stream info\r\n    $('#batchStreamID').text(streamData.streamID)\r\n    $('#batchStreamTitle').text(streamData.title)\r\n\r\n    // Clear previous table\r\n    if (batchTable) {\r\n      batchTable.destroy()\r\n      batchTable = null\r\n    }\r\n    $('#batchTableContainer').empty()\r\n\r\n    // Check if existing setlist data exists for this stream\r\n    // Use API filter parameter for better performance (instead of fetching all and filtering locally)\r\n    try {\r\n      const existingEntries = await apiRequest('GET', `${API_CONFIG.ENDPOINTS.setlist}?streamID=${streamData.streamID}`)\r\n      // Data is already sorted by API (segmentNo, trackNo), no need to sort again\r\n\r\n      if (existingEntries.length > 0) {\r\n        // Found existing data - auto-populate\r\n        const firstEntry = existingEntries[0]\r\n        const lastEntry = existingEntries[existingEntries.length - 1]\r\n\r\n        $('#batchStartTrack').val(firstEntry.trackNo)\r\n        $('#batchTotalSongs').val(existingEntries.length)\r\n        $('#batchSegment').val(firstEntry.segmentNo || 1)\r\n\r\n        // Show status message\r\n        $('#batchLoadStatus').html(`\r\n          \u2705 \u5DF2\u8F09\u5165\u73FE\u6709\u6B4C\u55AE\u8CC7\u6599\uFF08${existingEntries.length} \u9996\uFF09<br>\r\n          <small>\u53EF\u76F4\u63A5\u7DE8\u8F2F\u6216\u9EDE\u64CA\u300C\u7522\u751F\u8868\u683C\u300D\u91CD\u65B0\u5EFA\u7ACB</small>\r\n        `).removeClass('alert-warning').addClass('alert-success').show()\r\n\r\n        // Auto-generate table with existing data (no setTimeout needed)\r\n        loadExistingSetlist(existingEntries)\r\n\r\n        console.log(`Loaded ${existingEntries.length} existing setlist entries`)\r\n      } else {\r\n        // No existing data - use defaults\r\n        $('#batchStartTrack').val(1)\r\n        $('#batchTotalSongs').val(20)\r\n        $('#batchSegment').val(1)\r\n\r\n        // Show status message\r\n        $('#batchLoadStatus').html(`\r\n          \uD83D\uDCCB \u6B64\u76F4\u64AD\u5C1A\u7121\u6B4C\u55AE\u8CC7\u6599<br>\r\n          <small>\u8ACB\u8A2D\u5B9A\u53C3\u6578\u5F8C\u9EDE\u64CA\u300C\u7522\u751F\u8868\u683C\u300D\u958B\u59CB\u5EFA\u7ACB</small>\r\n        `).removeClass('alert-success').addClass('alert-warning').show()\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load existing setlist:', error)\r\n      // Use defaults on error\r\n      $('#batchStartTrack').val(1)\r\n      $('#batchTotalSongs').val(20)\r\n      $('#batchSegment').val(1)\r\n    }\r\n\r\n    batchEditModal.show()\r\n  }\r\n\r\n  function loadExistingSetlist(entries) {\r\n    // Get songlist for mapping\r\n    apiRequest('GET', API_CONFIG.ENDPOINTS.songlist).then(songlist => {\r\n      // Build songID -> song Map for O(1) lookup (instead of O(n) find)\r\n      const songMap = new Map(songlist.map(s => [s.songID, s]))\r\n\r\n      // Map entries to table rows\r\n      const rows = entries.map(entry => {\r\n        const song = songMap.get(entry.songID)\r\n        return {\r\n          trackNo: entry.trackNo,\r\n          songID: entry.songID,\r\n          songDisplay: song ? `${song.songName} - ${song.artist}` : '',\r\n          songName: song ? song.songName : '',\r\n          artist: song ? song.artist : '',\r\n          note: entry.note || ''\r\n        }\r\n      })\r\n\r\n      // Destroy previous table if exists\r\n      if (batchTable) {\r\n        batchTable.destroy()\r\n      }\r\n\r\n      // Create table with existing data\r\n      batchTable = new Tabulator(\"#batchTableContainer\", {\r\n        data: rows,\r\n        layout: \"fitColumns\",\r\n        movableRows: true,\r\n        columns: [\r\n          {title: \"Track\", field: \"trackNo\", width: 80, editor: false},\r\n          {\r\n            title: \"Song (\u6B4C\u540D - \u6B4C\u624B)\",\r\n            field: \"songID\",\r\n            editor: batchSongSelect2Editor,\r\n            formatter: songDisplayFormatter,\r\n            headerSort: false,\r\n            widthGrow: 3\r\n          },\r\n          {\r\n            title: \"Note\",\r\n            field: \"note\",\r\n            editor: \"input\",\r\n            headerSort: false,\r\n            widthGrow: 2\r\n          }\r\n        ]\r\n      })\r\n\r\n      // Update track numbers on row move\r\n      batchTable.on(\"rowMoved\", recalculateTrackNumbers)\r\n\r\n      // Update track numbers when start track changes (remove old handler first)\r\n      $('#batchStartTrack').off('change').on('change', function() {\r\n        if (batchTable) {\r\n          recalculateTrackNumbers()\r\n        }\r\n      })\r\n    }).catch(error => {\r\n      console.error('Failed to load songlist for existing setlist:', error)\r\n      alert('\u8F09\u5165\u6B4C\u55AE\u8CC7\u6599\u5931\u6557\uFF0C\u8ACB\u9EDE\u64CA\u300C\u7522\u751F\u8868\u683C\u300D\u91CD\u65B0\u5EFA\u7ACB')\r\n    })\r\n  }\r\n\r\n  // Quick Add variables\r\n  let quickStreamData = null\r\n  let quickCurrentTrack = null\r\n  let quickAddModal = new bootstrap.Modal(document.getElementById('modalQuickAdd'))\r\n  let quickSongSelect2 = null\r\n\r\n  async function openQuickAdd(streamData) {\r\n    console.log('Opening quick add for:', streamData)\r\n    quickStreamData = streamData\r\n\r\n    // === 1. \u7ACB\u5373\u958B\u555F Modal\uFF08\u4E0D\u7B49\u5F85\uFF09 ===\r\n    quickAddModal.show()\r\n\r\n    // === 2. \u986F\u793A\u8F09\u5165\u906E\u7F69\uFF08\u9396\u5B9A Modal\uFF09 ===\r\n    $('#quickAddLoadingOverlay').show()\r\n\r\n    // Set stream info\r\n    $('#quickStreamID').text(streamData.streamID)\r\n    $('#quickStreamTitle').text(streamData.title)\r\n\r\n    // Reset form\r\n    $('#quickStartTrack').val('')\r\n    $('#quickSegment').val(1)\r\n    $('#quickNote').val('')\r\n    $('#quickAddedList').html('<small class=\"text-muted\">\u5C1A\u672A\u65B0\u589E\u4EFB\u4F55\u6B4C\u66F2</small>')\r\n\r\n    // \u6E05\u7A7A\u4E26\u96B1\u85CF\u932F\u8AA4\u8A0A\u606F\r\n    $('#quickAddErrorMsg').html('')\r\n    $('#quickAddError').hide()\r\n\r\n    // Reset state\r\n    quickCurrentTrack = null\r\n    $('#quickAddFormSection').hide()\r\n    $('#quickStartSection').show()\r\n\r\n    // Destroy existing Select2 if present\r\n    if ($('#quickSongSelect').hasClass('select2-hidden-accessible')) {\r\n      $('#quickSongSelect').select2('destroy')\r\n    }\r\n    $('#quickSongSelect').empty().html('<option value=\"\">\u641C\u5C0B\u6B4C\u66F2...</option>')\r\n\r\n    // === 3. Try to auto-detect next track ===\r\n    try {\r\n      const existingEntries = await apiRequest('GET', `${API_CONFIG.ENDPOINTS.setlist}?streamID=${streamData.streamID}`)\r\n\r\n      if (existingEntries.length > 0) {\r\n        const maxTrack = Math.max(...existingEntries.map(e => e.trackNo))\r\n        const firstSegment = existingEntries[0].segmentNo || 1\r\n        $('#quickStartTrack').val(maxTrack + 1)\r\n        $('#quickSegment').val(firstSegment)\r\n        console.log(`Auto-detected next track: ${maxTrack + 1}`)\r\n      } else {\r\n        console.log('No existing setlist found, user will fill Track manually')\r\n      }\r\n\r\n      // === 4a. \u6210\u529F\uFF1A\u79FB\u9664\u906E\u7F69\uFF0C\u89E3\u9396 Modal ===\r\n      $('#quickAddLoadingOverlay').hide()\r\n      setTimeout(() => $('#quickStartTrack').focus(), 100)\r\n\r\n    } catch (error) {\r\n      console.error('Failed to auto-detect track:', error)\r\n\r\n      // === 4b. \u5931\u6557\uFF1A\u79FB\u9664\u906E\u7F69 \u2192 \u95DC\u9589 Modal \u2192 \u986F\u793A\u932F\u8AA4 ===\r\n      $('#quickAddLoadingOverlay').hide()\r\n      quickAddModal.hide()\r\n      showConnectionError(error.message || String(error))\r\n    }\r\n  }\r\n\r\n  // Helper function to show connection error alert\r\n  function showConnectionError(errorDetails) {\r\n    let message = `\u8ACB\u6AA2\u67E5 Hyperdrive \u670D\u52D9\u662F\u5426\u555F\u52D5\uFF08<code>${API_CONFIG.BASE_URL}</code>\uFF09\uFF0C\u6216\u7A0D\u5F8C\u518D\u8A66\u3002`\r\n\r\n    if (errorDetails.includes('timeout')) {\r\n      message = `\u9023\u7DDA\u903E\u6642\u3002\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u6216 Hyperdrive \u670D\u52D9\u72C0\u614B\uFF08<code>${API_CONFIG.BASE_URL}</code>\uFF09\u3002`\r\n    } else if (errorDetails.includes('NetworkError') || errorDetails.includes('Failed to fetch')) {\r\n      message = `\u7121\u6CD5\u9023\u7DDA\u81F3\u4F3A\u670D\u5668\uFF08<code>${API_CONFIG.BASE_URL}</code>\uFF09\u3002\u8ACB\u78BA\u8A8D Hyperdrive \u670D\u52D9\u6B63\u5728\u904B\u884C\u3002`\r\n    }\r\n\r\n    $('#connectionErrorMessage').html(message)\r\n\r\n    const alertElement = $('#connectionErrorAlert')\r\n    alertElement.removeClass('fade').addClass('show').slideDown(300)\r\n\r\n    // \u4E0D\u81EA\u52D5\u95DC\u9589\uFF0C\u9700\u8981\u4F7F\u7528\u8005\u624B\u52D5\u9EDE\u64CA X \u6309\u9215\u95DC\u9589\r\n  }\r\n\r\n//--- json table ---\r\n  //use a global variable to easy access the table and colDef\r\n  var jsonTable, colDef\r\n\r\n  //column definition\r\n  var setlistColDef = [\r\n    {title:\"streamID\", field:\"streamID\", visible: false, download:true},\r\n    {title:`local time(${dayjs().format('Z')})`, field:\"time\", mutator: (cell) => dayjs(cell).format('YYYY/MM/DD HH:mm'), accessor: (value) => {\r\n      const date = dayjs(value);\r\n      return date.isValid() ? date.toISOString() : value;\r\n    }, width:'150', formatter:dateWithYTLink},\r\n    {title:\"Seg\", field:\"segmentNo\", sorter:'number', width:60},\r\n    {title:\"Track\", field:\"trackNo\", sorter:'number', width:80},\r\n    {\r\n      title:\"Song\",\r\n      field:\"songName\",\r\n      editor: setlistSongSelect2Editor,\r\n      editable: false,\r\n      width: 300,\r\n      topCalc:'count',\r\n      topCalcFormatter:(c=>'subtotal/\u5C0F\u8A08\uFF1A'+c.getValue()),\r\n      headerFilter: select2,\r\n      headerFilterParams: {\r\n        field: \"songName\",\r\n        fieldEn: \"songNameEn\"\r\n      },\r\n      headerFilterFunc: function(headerValue, rowValue, rowData) {\r\n        // Fuzzy search: match if headerValue is contained in Japanese or English name\r\n        if (!headerValue) return true;\r\n        const searchTerm = headerValue.toLowerCase();\r\n        const jaMatch = rowData.songName?.toLowerCase().includes(searchTerm) || false;\r\n        const enMatch = rowData.songNameEn?.toLowerCase().includes(searchTerm) || false;\r\n        return jaMatch || enMatch;\r\n      },\r\n      headerSort:false,\r\n      formatter: function(cell) {\r\n        const row = cell.getRow().getData();\r\n        const ja = row.songName || '';\r\n        const en = row.songNameEn || '';\r\n        return `\r\n          <div style=\"line-height: 1.5;\">\r\n            <div style=\"font-weight: 500;\">${ja}</div>\r\n            ${en ? `<div style=\"font-size: 0.85em; color: #999; margin-top: 2px;\">${en}</div>` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n    },\r\n    {\r\n      title:\"Artist\",\r\n      field:\"artist\",\r\n      width: 250,\r\n      headerFilter: select2,\r\n      headerFilterParams: {\r\n        field: \"artist\",\r\n        fieldEn: \"artistEn\"\r\n      },\r\n      headerFilterFunc: function(headerValue, rowValue, rowData) {\r\n        // Fuzzy search: match if headerValue is contained in Japanese or English artist name\r\n        if (!headerValue) return true;\r\n        const searchTerm = headerValue.toLowerCase();\r\n        const jaMatch = rowData.artist?.toLowerCase().includes(searchTerm) || false;\r\n        const enMatch = rowData.artistEn?.toLowerCase().includes(searchTerm) || false;\r\n        return jaMatch || enMatch;\r\n      },\r\n      headerSort:false,\r\n      formatter: function(cell) {\r\n        const row = cell.getRow().getData();\r\n        const ja = row.artist || '';\r\n        const en = row.artistEn || '';\r\n        return `\r\n          <div style=\"line-height: 1.5;\">\r\n            <div>${ja}</div>\r\n            ${en ? `<div style=\"font-size: 0.85em; color: #999; margin-top: 2px;\">${en}</div>` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n    },\r\n    {\r\n      title:\"Note\",\r\n      field:\"note\",\r\n      headerFilter:select2,\r\n      headerFilterParams:{field:\"note\"},\r\n      headerFilterFunc: function(headerValue, rowValue, rowData) {\r\n        // Fuzzy search: match if headerValue is contained in note\r\n        if (!headerValue) return true;\r\n        const searchTerm = headerValue.toLowerCase();\r\n        return rowData.note?.toLowerCase().includes(searchTerm) || false;\r\n      },\r\n      headerSort:false\r\n    },\r\n    {title:\"YTLink\", field:\"YTLink\", visible: false, download:true},\r\n    {title:\"songID\", field:\"songID\", visible: false, download:true},  // Hidden field for database ID\r\n    {title:\"songNameEn\", field:\"songNameEn\", visible: false, download:true},  // Hidden field for English name\r\n    {title:\"artistEn\", field:\"artistEn\", visible: false, download:true}  // Hidden field for English artist\r\n  ]\r\n\r\n  var streamlistColDef = [\r\n    {title:\"thumbnail\", formatter:imageLink, headerFilter:false},\r\n    {title:\"streamID\", field:\"streamID\", visible: false, download:true},\r\n    {\r\n      title:\"title\",\r\n      field:\"title\",\r\n      width:300,\r\n      topCalc:'count',\r\n      topCalcFormatter:(c=>'subtotal/\u5C0F\u8A08\uFF1A'+c.getValue()),\r\n      formatter:multiLineLinkFormat,\r\n      headerFilter:\"input\",\r\n      headerFilterPlaceholder:\"\u641C\u5C0B\u6A19\u984C\u6216\u5F71\u7247 ID\",\r\n      headerFilterFunc: function(headerValue, rowValue, rowData, filterParams) {\r\n        // No filter applied\r\n        if (!headerValue) return true;\r\n\r\n        const searchTerm = headerValue.toLowerCase();\r\n\r\n        // Search in title\r\n        const titleMatch = rowValue?.toLowerCase().includes(searchTerm) || false;\r\n\r\n        // Search in streamID\r\n        const idMatch = rowData.streamID?.toLowerCase().includes(searchTerm) || false;\r\n\r\n        // Return true if either matches\r\n        return titleMatch || idMatch;\r\n      }\r\n    },\r\n    {title:`local time(${dayjs().format('Z')})`, field:\"time\", mutator: (cell) => dayjs(cell).format('YYYY/MM/DD HH:mm'), accessor: (value) => {\r\n      const date = dayjs(value);\r\n      return date.isValid() ? date.toISOString() : value;\r\n    }},\r\n    {title:\"categories\", field:\"categories\",\r\n      headerFilter:select2,\r\n      headerFilterParams:{field:'categories', multiple: true},\r\n      headerFilterFunc: function(headerValue, rowValue, rowData, filterParams) {\r\n        // No filter applied\r\n        if (!headerValue || headerValue.length === 0) return true;\r\n\r\n        // Ensure rowValue is an array\r\n        if (!Array.isArray(rowValue)) return false;\r\n\r\n        // Check if any selected filter value matches any category in the row (OR logic)\r\n        return headerValue.some(filterVal =>\r\n          rowValue.some(rowCat =>\r\n            rowCat.toLowerCase().includes(filterVal.toLowerCase())\r\n          )\r\n        );\r\n      },\r\n      headerSort:false,\r\n      editor:select2,\r\n      editorParams:{field:'categories', multiple: true},\r\n      formatter:(cell=>{\r\n        const categories = cell.getValue();\r\n        if (!Array.isArray(categories)) return '';\r\n\r\n        // Display categories with line breaks for better readability\r\n        return categories.map(cat => cat).join('<br>');\r\n      })\r\n    },\r\n    {title:\"note\", field:\"note\"},\r\n  ]\r\n\r\n  // Tabulator \u81EA\u52D5\u5B8C\u6210\u8A2D\u5B9A\u5E38\u6578\r\n  const AUTOCOMPLETE_PARAMS = {\r\n    valuesLookup: \"active\",\r\n    autocomplete: true\r\n  }\r\n\r\n  // Aliases column definition\r\n  var aliasesColDef = [\r\n    {title:\"aliasID\", field:\"aliasID\", visible: false, download:true},\r\n    {\r\n      title:\"Type / \u985E\u578B\",\r\n      field:\"aliasType\",\r\n      width:120,\r\n      editor:\"list\",\r\n      editorParams:{\r\n        values:[\"artist\", \"title\"]\r\n      },\r\n      headerFilter:\"list\",\r\n      headerFilterParams:{\r\n        values:[\"artist\", \"title\"],\r\n        clearable:true\r\n      }\r\n    },\r\n    {\r\n      title:\"Canonical Name / \u6A19\u6E96\u540D\u7A31\",\r\n      field:\"canonicalName\",\r\n      width:250,\r\n      editor:\"input\",\r\n      headerFilter:\"input\",\r\n      headerFilterPlaceholder:\"\u641C\u5C0B\u6A19\u6E96\u540D\u7A31\"\r\n    },\r\n    {\r\n      title:\"Alias Value / \u5225\u540D\",\r\n      field:\"aliasValue\",\r\n      width:250,\r\n      editor:\"input\",\r\n      headerFilter:\"input\",\r\n      headerFilterPlaceholder:\"\u641C\u5C0B\u5225\u540D\"\r\n    },\r\n    {\r\n      title:\"Note / \u5099\u8A3B\",\r\n      field:\"note\",\r\n      editor:\"input\",\r\n      headerFilter:\"input\"\r\n    },\r\n    {\r\n      title:\"Created At / \u5EFA\u7ACB\u6642\u9593\",\r\n      field:\"createdAt\",\r\n      visible: false,\r\n      download: true\r\n    },\r\n    {\r\n      title:\"Updated At / \u66F4\u65B0\u6642\u9593\",\r\n      field:\"updatedAt\",\r\n      visible: false,\r\n      download: true\r\n    }\r\n  ]\r\n\r\n  // Bilingual version (Japanese + English in one view)\r\n  var songlistColDef = [\r\n    {title:\"songID\", field:\"songID\", visible: false, download:true},\r\n    {\r\n      title:\"Song Name / \u6B4C\u540D\",\r\n      field:\"songName\",\r\n      width:300,\r\n      topCalc:'count',\r\n      topCalcFormatter:(c=>'subtotal/\u5C0F\u8A08\uFF1A'+c.getValue()),\r\n      headerFilter:\"input\",\r\n      headerFilterPlaceholder:\"\u641C\u5C0B\u65E5\u6587\u6216\u82F1\u6587\u6B4C\u540D\",\r\n      headerFilterFunc: function(headerValue, rowValue, rowData, filterParams) {\r\n        if (!headerValue) return true;\r\n        const searchTerm = headerValue.toLowerCase();\r\n        const jaMatch = rowData.songName?.toLowerCase().includes(searchTerm) || false;\r\n        const enMatch = rowData.songNameEn?.toLowerCase().includes(searchTerm) || false;\r\n        return jaMatch || enMatch;\r\n      },\r\n      formatter: function(cell) {\r\n        const row = cell.getRow().getData();\r\n        const ja = row.songName || '';\r\n        const en = row.songNameEn || '';\r\n        return `\r\n          <div style=\"line-height: 1.5;\">\r\n            <div style=\"font-weight: 500;\">${ja}</div>\r\n            ${en ? `<div style=\"font-size: 0.85em; color: #999; margin-top: 2px;\">${en}</div>` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n    },\r\n    {\r\n      title:\"Artist / \u6B4C\u624B\",\r\n      field:\"artist\",\r\n      width:250,\r\n      headerFilter:\"input\",\r\n      headerFilterPlaceholder:\"\u641C\u5C0B\u65E5\u6587\u6216\u82F1\u6587\u6B4C\u624B\",\r\n      headerFilterFunc: function(headerValue, rowValue, rowData, filterParams) {\r\n        if (!headerValue) return true;\r\n        const searchTerm = headerValue.toLowerCase();\r\n        const jaMatch = rowData.artist?.toLowerCase().includes(searchTerm) || false;\r\n        const enMatch = rowData.artistEn?.toLowerCase().includes(searchTerm) || false;\r\n        return jaMatch || enMatch;\r\n      },\r\n      formatter: function(cell) {\r\n        const row = cell.getRow().getData();\r\n        const ja = row.artist || '';\r\n        const en = row.artistEn || '';\r\n        return `\r\n          <div style=\"line-height: 1.5;\">\r\n            <div>${ja}</div>\r\n            ${en ? `<div style=\"font-size: 0.85em; color: #999; margin-top: 2px;\">${en}</div>` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n    },\r\n    {title:\"Genre\", field:\"genre\", headerFilter:\"input\"},\r\n    {title:\"Tie-up\", field:\"tieup\", headerFilter:\"input\"},\r\n    {title:\"Note\", field:\"songNote\", headerFilter:\"input\"},\r\n  ]\r\n\r\n  // Initialize content after all colDef are defined\r\n  // (Must be after Line 1047 to ensure setlistColDef, streamlistColDef, songlistColDef are initialized)\r\n  //if direct url\r\n  setContent(location.pathname)\r\n\r\n  // Handle hash navigation after content is loaded\r\n  if (location.hash) {\r\n    // Wait for content to load before processing hash\r\n    setTimeout(() => {\r\n      // Trigger any hash-specific handling for the loaded page\r\n      window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n    }, 200)\r\n  }\r\n\r\n  //column definition function\r\n  function multiLineLinkFormat(cell){\r\n    cell.getElement().style.whiteSpace ='pre-line'  //set multi line\r\n    const data = cell.getData()\r\n    const id = data.id || data.streamID  // Support both old and new field names\r\n    return \"<a href='https://www.youtube.com/watch?v=\" + id + \"'>\"+ cell.getValue() +\"</a>\"\r\n  }\r\n\r\n  function imageLink(cell){\r\n    const data = cell.getData()\r\n    const id = data.id || data.streamID  // Support both old and new field names\r\n    return `<img src='https://i.ytimg.com/vi/${id}/hqdefault.jpg' width=\"160\" height=\"120\">`\r\n  }\r\n\r\n  function canEdit(){\r\n    return $('#edit').hasClass('active')\r\n  }\r\n\r\n  function dateWithYTLink(cell){\r\n    let d = cell.getData()\r\n    const dateValue = d.date || d.time  // Support both old and new field names\r\n    return `<a href=\"https://www.youtube.com/watch?v=${d.streamID}\">${dayjs(dateValue).format('YYYY/MM/DD')}</a>`\r\n  }\r\n\r\n\r\n  // Initialize Artist Select2 for songlist modal\r\n  function initializeArtistSelect() {\r\n\r\n    $('#artistName').select2({\r\n      allowClear: true,\r\n      tags: true,\r\n      placeholder: 'Select or type artist name...',\r\n      width: '100%',\r\n      minimumInputLength: 0, // Show all results immediately\r\n      dropdownParent: $('#modalAddSong'), // Fix positioning in modal\r\n      ajax: {\r\n        url: `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.songlistArtists}`,\r\n        dataType: 'json',\r\n        delay: 250,\r\n        data: function(params) {\r\n          return {\r\n            q: params.term || '', // search term (empty for initial load)\r\n            page: params.page || 1\r\n          }\r\n        },\r\n        processResults: function(data, params) {\r\n          // Transform API response to Select2 format\r\n          const results = (data.data || data || []).map(item => ({\r\n            id: item.artist,\r\n            text: item.artist,\r\n            artistEn: item.artistEn || ''\r\n          }))\r\n\r\n          // If search term exists but not in results, add it as a new option\r\n          params.page = params.page || 1\r\n          const term = params.term?.trim()\r\n          if (term && !results.find(r => r.text.toLowerCase() === term.toLowerCase())) {\r\n            results.unshift({\r\n              id: term,\r\n              text: term,\r\n              newTag: true\r\n            })\r\n          }\r\n\r\n          return {\r\n            results: results,\r\n            pagination: {\r\n              more: false // No pagination needed for artists\r\n            }\r\n          }\r\n        },\r\n        cache: true\r\n      },\r\n      createTag: function(params) {\r\n        const term = params.term?.trim()\r\n        if (!term) return null\r\n\r\n        return {\r\n          id: term,\r\n          text: term,\r\n          newTag: true\r\n        }\r\n      }\r\n    })\r\n\r\n\r\n    // Add event handlers (remove old handlers first to prevent duplicates)\r\n    $('#artistName').off('select2:select').on('select2:select', function(e) {\r\n      const selectedData = e.params.data\r\n      console.log('Artist selected:', selectedData)  // Debug log\r\n\r\n      if (!selectedData.newTag && selectedData.artistEn) {\r\n        // Existing artist with English name, auto-fill but keep editable\r\n        $('#artistNameEn').val(selectedData.artistEn)\r\n        console.log('ArtistEn auto-filled:', selectedData.artistEn)  // Debug log\r\n      } else {\r\n        console.log('ArtistEn not available - newTag:', selectedData.newTag, 'artistEn:', selectedData.artistEn)  // Debug log\r\n      }\r\n      // For new artists or artists without English names, do nothing, let user fill manually\r\n    })\r\n\r\n    $('#artistName').off('select2:clear').on('select2:clear', function() {\r\n      // When cleared, also clear artistEN field for consistency\r\n      $('#artistNameEn').val('')\r\n    })\r\n  }\r\n\r\n  // Update all headerFilter options based on currently filtered data (cascade effect)\r\n  function updateAllHeaderFilterOptions(table, triggerField, triggerValue) {\r\n    // Get currently filtered data (what user sees after all filters applied)\r\n    const filteredData = table.getData(\"active\")\r\n\r\n    // Find all headerFilter select2 elements for this table\r\n    const headerFilters = $('select[data-header-filter=\"true\"]').filter(function() {\r\n      return $(this).data('tabulatorTable') === table\r\n    })\r\n\r\n    headerFilters.each(function() {\r\n      const $select = $(this)\r\n      const field = $select.attr('data-field')\r\n\r\n      // For trigger field, use passed value; for others, read from DOM\r\n      let currentValue\r\n      if (field === triggerField) {\r\n        currentValue = triggerValue  // Use the value just set by user\r\n      } else {\r\n        currentValue = $select.val()  // Read current value from DOM\r\n      }\r\n\r\n      // Extract unique values from filtered data for this field\r\n      const uniqueValues = new Set()\r\n      filteredData.forEach(row => {\r\n        const value = row[field]\r\n        if (value !== null && value !== undefined && value !== '') {\r\n          if (Array.isArray(value)) {\r\n            // For array fields (like categories), add each item\r\n            value.forEach(v => uniqueValues.add(v))\r\n          } else {\r\n            uniqueValues.add(value)\r\n          }\r\n        }\r\n\r\n        // Also check English field if it exists (e.g., songNameEn, artistEn)\r\n        const enField = field + 'En'\r\n        if (row[enField] && row[enField] !== '') {\r\n          uniqueValues.add(row[enField])\r\n        }\r\n      })\r\n\r\n      // Convert to sorted array\r\n      const newValues = Array.from(uniqueValues).sort()\r\n\r\n      // Get current options to compare\r\n      const currentOptions = []\r\n      $select.find('option').each(function() {\r\n        const val = $(this).val()\r\n        if (val) {  // Skip empty placeholder option\r\n          currentOptions.push(val)\r\n        }\r\n      })\r\n\r\n      // Check if options need updating\r\n      const optionsChanged =\r\n        newValues.length !== currentOptions.length ||\r\n        !newValues.every((val, idx) => val === currentOptions[idx])\r\n\r\n      if (optionsChanged) {\r\n        // Store whether this is multiple select\r\n        const isMultiple = $select.attr('multiple') === 'multiple'\r\n\r\n        // Clear all options\r\n        $select.find('option').remove()\r\n\r\n        // For single-select, add empty placeholder option first (required for allowClear)\r\n        if (!isMultiple) {\r\n          $select.append('<option></option>')\r\n        }\r\n\r\n        // Add new options (none selected by default)\r\n        newValues.forEach(val => {\r\n          const option = new Option(val, val, false, false)\r\n          $select.append(option)\r\n        })\r\n\r\n        // Value restoration logic\r\n        if (field === triggerField) {\r\n          // For trigger field: restore the value user just selected\r\n          if (currentValue !== null && currentValue !== '' &&\r\n              (!Array.isArray(currentValue) || currentValue.length > 0)) {\r\n            if (isMultiple && Array.isArray(currentValue)) {\r\n              const validValues = currentValue.filter(v => newValues.includes(v))\r\n              $select.val(validValues.length > 0 ? validValues : null)\r\n            } else if (!isMultiple) {\r\n              // For single-select, check if value exists in options\r\n              if (newValues.includes(currentValue)) {\r\n                $select.val(currentValue)\r\n              } else {\r\n                // Value doesn't exist in filtered data (user entered a tag)\r\n                // Add it as an option so allowClear can work\r\n                const tagOption = new Option(currentValue, currentValue, true, true)\r\n                $select.append(tagOption)\r\n              }\r\n            }\r\n          } else {\r\n            // User cleared this field, keep it cleared\r\n            $select.val(null)\r\n          }\r\n        } else {\r\n          // For other fields: do NOT auto-select, keep empty\r\n          // Only restore if user had manually selected a value before\r\n          if (currentValue !== null && currentValue !== '' &&\r\n              (!Array.isArray(currentValue) || currentValue.length > 0)) {\r\n            if (isMultiple && Array.isArray(currentValue)) {\r\n              const validValues = currentValue.filter(v => newValues.includes(v))\r\n              $select.val(validValues.length > 0 ? validValues : null)\r\n            } else if (!isMultiple) {\r\n              // For single-select, check if value exists\r\n              if (newValues.includes(currentValue)) {\r\n                $select.val(currentValue)\r\n              } else if (currentValue) {\r\n                // Value doesn't exist (could be a tag from before filtering)\r\n                // Add it back as an option so user can clear it\r\n                const tagOption = new Option(currentValue, currentValue, true, true)\r\n                $select.append(tagOption)\r\n              }\r\n            }\r\n          } else {\r\n            // No previous value, keep empty\r\n            $select.val(null)\r\n          }\r\n        }\r\n\r\n        // Trigger select2 to update its display (but not change event)\r\n        $select.trigger('change.select2')\r\n      }\r\n    })\r\n  }\r\n\r\n  function select2 (cell, onRendered, success, cancel, editorParams){\r\n    //use select2 replace header filter\r\n    //cell - the cell component for the editable cell\r\n    //onRendered - function to call when the editor has been rendered\r\n    //success - function to call to pass thesuccessfully updated value to Tabulator\r\n    //cancel - function to call to abort the edit and return to a normal cell\r\n    //editorParams - params object passed into the editorParams column definition property\r\n\r\n    // console.log('select2 function called for field:', editorParams.field, 'tableDataLoaded:', window.tableDataLoaded);\r\n\r\n    // Create select element for better select2 compatibility\r\n    var editor = document.createElement(\"select\")\r\n    if (editorParams.multiple) {\r\n      editor.setAttribute(\"multiple\", \"multiple\")\r\n    }\r\n\r\n    let f = editorParams.field\r\n    let fEn = editorParams.fieldEn  // Optional English field for bilingual support\r\n\r\n    onRendered(function(){\r\n      // console.log('select2 onRendered called for field:', f, 'tableDataLoaded:', window.tableDataLoaded);\r\n      let op = $(editor)\r\n      let hasSucceeded = false  // Guard flag to prevent multiple success() calls\r\n\r\n      // Destroy existing select2 instance if present (prevents conflicts when setColumns rebuilds headers)\r\n      if (op.hasClass('select2-hidden-accessible')) {\r\n        op.select2('destroy')\r\n      }\r\n\r\n      // Get data dynamically from table for all fields\r\n      // If fieldEn is provided, getDynamicFieldData will include both JA and EN values\r\n      var d = getDynamicFieldData(cell.getTable(), f, fEn)\r\n\r\n      // Safely get cell element and determine if this is a header filter or cell editor\r\n      const cellElement = cell.getElement()\r\n      const isHeaderFilter = cellElement && $(cellElement).closest('.tabulator-header').length > 0\r\n\r\n      // Determine dropdown parent - use body for header filters to avoid z-index issues\r\n      let dropdownParent = $('body')\r\n      if (!isHeaderFilter && cellElement) {\r\n        const tableContainer = $(cellElement).closest('.tabulator')\r\n        if (tableContainer.length > 0) {\r\n          dropdownParent = tableContainer\r\n        }\r\n      }\r\n\r\n      // Read multiple configuration from editorParams\r\n      const isMultiple = editorParams.multiple === true\r\n      const fieldPlaceholder = isMultiple ? 'Select...' : 'Select one...'\r\n\r\n      // Add data attributes for headerFilter cascade support\r\n      if (isHeaderFilter) {\r\n        op.attr('data-header-filter', 'true')\r\n        op.attr('data-field', f)\r\n        // Store table reference for later access\r\n        op.data('tabulatorTable', cell.getTable())\r\n      }\r\n\r\n      // For single-select mode, add an empty placeholder option to ensure allowClear works\r\n      if (!isMultiple) {\r\n        op.append('<option></option>')\r\n      }\r\n\r\n      op.select2({\r\n            data: d,\r\n            width: isHeaderFilter ? '100%' : '100%',  // Full width for both header and cell\r\n            allowClear: true,\r\n            placeholder: fieldPlaceholder,  // Dynamic placeholder\r\n            tags: editorParams.tags !== false,  // Allow tags by default, can be disabled\r\n            multiple: isMultiple,  // Dynamic single/multiple selection\r\n            dropdownParent: dropdownParent\r\n      })\r\n\r\n      // Set initial value\r\n      let v = cell.getValue()\r\n      if (isMultiple) {\r\n        // Multiple mode: ensure array format\r\n        if (v === null || v === undefined) {\r\n          v = []\r\n        }\r\n        // If value is string, convert to array\r\n        if (typeof v === 'string' && v) {\r\n          v = [v]\r\n        }\r\n        // Ensure it's an array\r\n        if (!Array.isArray(v)) {\r\n          v = []\r\n        }\r\n      } else {\r\n        // Single mode: keep as string or empty string\r\n        if (v === null || v === undefined) {\r\n          v = ''\r\n        }\r\n        // If value is array, take first element\r\n        if (Array.isArray(v)) {\r\n          v = v[0] || ''\r\n        }\r\n      }\r\n\r\n      // Set the value\r\n      op.val(v).trigger('change.select2')\r\n\r\n      // Simple change event handler (Select2 4.1.0-rc.0 has native IME support)\r\n      op.on('change', function (e) {\r\n        let val = $(this).val()\r\n\r\n        // Handle value format based on multiple mode\r\n        if (isMultiple) {\r\n          // Multiple mode: ensure array format\r\n          val = Array.isArray(val) ? val : (val ? [val] : [])\r\n        } else {\r\n          // Single mode: return string (or first element if array)\r\n          val = Array.isArray(val) ? (val[0] || '') : (val || '')\r\n        }\r\n\r\n        success(val)\r\n\r\n        // For headerFilter, manually trigger Tabulator to re-filter\r\n        if (isHeaderFilter) {\r\n          const table = cell.getTable()\r\n          if (table) {\r\n            // Use refreshFilter to trigger headerFilterFunc\r\n            table.refreshFilter()\r\n\r\n            // Update all other headerFilters with cascade effect\r\n            // Pass trigger field and its current value to prevent timing issues\r\n            setTimeout(() => {\r\n              updateAllHeaderFilterOptions(table, f, val)\r\n            }, 10)\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    //add editor to cell\r\n    return editor\r\n  }\r\n\r\n  // Bilingual editor for Song Name and Artist (opens Modal)\r\n  function bilingualEditor(cell, onRendered, success, cancel, editorParams) {\r\n    const rowData = cell.getRow().getData()\r\n    const field = editorParams.field // 'songName' or 'artist'\r\n    const fieldLabel = editorParams.fieldLabel || field\r\n\r\n    // Get current values\r\n    const jaValue = rowData[field] || ''\r\n    const enValue = rowData[field + 'En'] || ''\r\n\r\n    // Setup Modal\r\n    const modal = new bootstrap.Modal(document.getElementById('modalBilingualEdit'))\r\n\r\n    // Set field label\r\n    $('#bilingualFieldLabel').text(fieldLabel)\r\n\r\n    // Set current values\r\n    $('#bilingualJA').val(jaValue)\r\n    $('#bilingualEN').val(enValue)\r\n\r\n    // Handle save button\r\n    $('#saveBilingual').off('click').on('click', async function() {\r\n      const newJA = $('#bilingualJA').val()\r\n      const newEN = $('#bilingualEN').val()\r\n\r\n      // Update both fields via API\r\n      try {\r\n        const updateData = {\r\n          [field]: newJA,\r\n          [field + 'En']: newEN\r\n        }\r\n\r\n        await apiRequest('PUT', `${API_CONFIG.ENDPOINTS.songlist}/${rowData.songID}`, updateData)\r\n\r\n        // Update row data\r\n        rowData[field] = newJA\r\n        rowData[field + 'En'] = newEN\r\n\r\n        // Trigger table update\r\n        const row = cell.getRow()\r\n        row.update(rowData)\r\n\r\n        modal.hide()\r\n\r\n        // Force complete redraw of this row to recalculate height\r\n        setTimeout(() => {\r\n          jsonTable.redrawRows([row])\r\n\r\n          // Success visual feedback after redraw\r\n          setTimeout(() => {\r\n            cell.getElement().style.backgroundColor = '#d4edda'\r\n            setTimeout(() => {\r\n              cell.getElement().style.backgroundColor = ''\r\n            }, 1000)\r\n          }, 50)\r\n        }, 50)\r\n\r\n        success(newJA) // Return primary language value\r\n      } catch (error) {\r\n        console.error('Error updating bilingual field:', error)\r\n        alert(`Error: ${error.message}`)\r\n        cancel()\r\n      }\r\n    })\r\n\r\n    // Handle cancel/close\r\n    $('#modalBilingualEdit').off('hidden.bs.modal').on('hidden.bs.modal', function() {\r\n      cancel()\r\n    })\r\n\r\n    // Show modal\r\n    modal.show()\r\n\r\n    // Focus on first input\r\n    setTimeout(() => $('#bilingualJA').focus(), 300)\r\n\r\n    // Return empty div (modal-based editor doesn't need inline element)\r\n    return document.createElement('div')\r\n  }\r\n\r\n\r\n  //set table\r\n  function configJsonTable(u, p){\r\n    var colDef\r\n\r\n    if(p == 'setlist'){\r\n      colDef=setlistColDef\r\n    }\r\n    if(p == 'streamlist'){\r\n      colDef=streamlistColDef\r\n    }\r\n    if(p == 'songlist'){\r\n      colDef=songlistColDef\r\n    }\r\n    if(p == 'aliases'){\r\n      colDef=aliasesColDef\r\n    }\r\n\r\n    // Error handling: if colDef is still undefined, show error message\r\n    if(!colDef){\r\n      console.error('[ERROR] Invalid table type:', p);\r\n      $('#tb').html('<div class=\"alert alert-danger\">Error: Invalid table type \"' + p + '\". Please reload the page.</div>');\r\n      return;\r\n    }\r\n\r\n    // Initial view mode: remove editors to allow row selection\r\n    const initialColDef = colDef.map(col => {\r\n      const newCol = { ...col, editable: false }\r\n      // Remove editors that would prevent row selection\r\n      // For all tables: remove editor in non-edit mode\r\n      if (col.editor) {\r\n        const { editor, ...rest } = newCol\r\n        return rest\r\n      }\r\n      return newCol\r\n    })\r\n\r\n    jsonTable = new Tabulator(\"#tb\", {\r\n      ajaxURL: u,\r\n      ajaxResponse: function(url, params, response) {\r\n        return response.data || response; // \u89E3\u5305 {data: [...]} \u683C\u5F0F\r\n      },\r\n      height:700,\r\n      columnDefaults:{\r\n        headerFilter:\"input\",\r\n      },\r\n      columns:initialColDef,\r\n      selectableRows:true,\r\n      selectableRowsRangeMode:\"click\",\r\n      clipboard:true,\r\n      addRowPos:\"top\",\r\n      downloadRowRange:'all'\r\n    })\r\n\r\n    // Listen for data processing events - data is ready for access via getData()\r\n    jsonTable.on(\"dataProcessed\", function(){\r\n      const data = jsonTable.getData();\r\n      // Store reference to processed data for getDynamicFieldData\r\n      window.tableDataLoaded = true;\r\n\r\n      // Re-initialize header filters after data is processed for dynamic field data\r\n      if (p === 'streamlist' || p === 'setlist') {\r\n        // Clear existing header filter\r\n        jsonTable.clearHeaderFilter();\r\n        // The header filters will be re-initialized automatically\r\n      }\r\n    });\r\n\r\n    // Add context menu for streamlist (right-click menu)\r\n    if (p === 'streamlist') {\r\n      jsonTable.on(\"rowContext\", function(e, row) {\r\n        const data = row.getData();\r\n        const categories = data.categories || [];\r\n\r\n        // Only show menu for singing streams\r\n        const isSingingStream = categories.some(cat =>\r\n          cat.includes('\u6B4C\u67A0') || cat.includes('Singing') || cat.includes('singing') || cat.includes('karaoke')\r\n        );\r\n\r\n        // Only prevent default context menu for singing streams\r\n        // Non-singing streams will show browser's default menu\r\n        if (!isSingingStream) {\r\n          return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        showContextMenu(e.pageX, e.pageY, [\r\n          {\r\n            label: '\uD83D\uDCDD \u88DC\u6A94\u7528 - \u6279\u6B21\u7DE8\u8F2F\u6B4C\u55AE',\r\n            action: () => openBatchEditor(data)\r\n          },\r\n          {\r\n            label: '\u26A1 \u76F4\u64AD\u7528 - \u5FEB\u901F\u65B0\u589E\u6B4C\u55AE',\r\n            action: () => openQuickAdd(data)\r\n          },\r\n          { type: 'divider' },\r\n          {\r\n            label: '\uD83D\uDCCB \u8907\u88FD\u7DB2\u5740',\r\n            action: async () => {\r\n              const url = `https://youtube.com/watch?v=${data.streamID}`;\r\n              try {\r\n                await navigator.clipboard.writeText(url);\r\n                // Optional: Show a brief success message\r\n                console.log('URL copied to clipboard:', url);\r\n              } catch (err) {\r\n                console.error('Failed to copy URL:', err);\r\n                // Fallback: create a temporary input element\r\n                const input = document.createElement('input');\r\n                input.value = url;\r\n                document.body.appendChild(input);\r\n                input.select();\r\n                document.execCommand('copy');\r\n                document.body.removeChild(input);\r\n              }\r\n            }\r\n          },\r\n          {\r\n            label: '\uD83C\uDFA5 \u67E5\u770B YouTube \u5F71\u7247',\r\n            action: () => window.open(`https://youtube.com/watch?v=${data.streamID}`, '_blank')\r\n          }\r\n        ]);\r\n      });\r\n    }\r\n\r\n    // Add context menu for setlist (right-click menu to add alias)\r\n    if (p === 'setlist') {\r\n      jsonTable.on(\"rowContext\", function(e, row) {\r\n        e.preventDefault();\r\n\r\n        const rowData = row.getData();\r\n\r\n        showContextMenu(e.pageX, e.pageY, [\r\n          {\r\n            label: '\u2795 \u65B0\u589E\u5225\u540D (Add Alias)',\r\n            action: () => {\r\n              // Pre-fill Quick Add modal with song data\r\n              $('#quickAliasType').val('artist')  // Default to artist\r\n              $('#quickAliasValue').val(rowData.artist || '')  // Pre-fill with artist name\r\n              $('#quickCanonicalName').val('').trigger('change')  // Empty for user to select\r\n              $('#quickAliasNote').val('')  // Ensure note is empty\r\n\r\n              // Store streamID and trackNo for later use\r\n              $('#modalQuickAddAlias').data('streamID', rowData.streamID)\r\n              $('#modalQuickAddAlias').data('trackNo', rowData.trackNo)\r\n              $('#modalQuickAddAlias').data('songData', rowData)\r\n\r\n              // Show modal\r\n              new bootstrap.Modal('#modalQuickAddAlias').show()\r\n            }\r\n          }\r\n        ]);\r\n      });\r\n    }\r\n\r\n    // Add API sync events for immediate save\r\n    jsonTable.on(\"cellEdited\", async function(cell) {\r\n      try {\r\n        const rowData = cell.getRow().getData()\r\n        const field = cell.getField()\r\n        const value = cell.getValue()\r\n\r\n        // Skip artist field ONLY in setlist (auto-updated by song selection)\r\n        // In other pages, artist is manually editable and should sync\r\n        if (p === 'setlist' && field === 'artist') {\r\n          console.log('Artist field updated via song selection in setlist, skipping API sync')\r\n          return\r\n        }\r\n\r\n        // Skip songName field ONLY in setlist (already synced in Select2 editor)\r\n        // In other pages, songName uses normal input editor and should sync\r\n        if (p === 'setlist' && field === 'songName') {\r\n          console.log('Song field already synced in Select2 editor in setlist, skipping API sync')\r\n          return\r\n        }\r\n\r\n        console.log(`Cell edited: ${field} = ${value}`)\r\n\r\n        // Determine API endpoint and ID field\r\n        let endpoint, idField, id\r\n        if (p === 'songlist') {\r\n          endpoint = API_CONFIG.ENDPOINTS.songlist\r\n          idField = 'songID'\r\n          id = rowData.songID\r\n        } else if (p === 'streamlist') {\r\n          endpoint = API_CONFIG.ENDPOINTS.streamlist\r\n          idField = 'streamID'\r\n          id = rowData.streamID\r\n        } else if (p === 'setlist') {\r\n          endpoint = API_CONFIG.ENDPOINTS.setlist\r\n          // setlist uses composite key\r\n          id = `${rowData.streamID}/${rowData.trackNo}`\r\n        } else if (p === 'aliases') {\r\n          endpoint = API_CONFIG.ENDPOINTS.aliases\r\n          idField = 'aliasID'\r\n          id = rowData.aliasID\r\n        } else {\r\n          console.log('No API sync for this table type')\r\n          return\r\n        }\r\n\r\n        // Skip if no ID (new row not yet saved)\r\n        if (!id) {\r\n          console.log('No ID found, skipping API sync')\r\n          return\r\n        }\r\n\r\n        // Map frontend field names to API field names\r\n        const fieldMapping = {\r\n          'segment': 'segmentNo',\r\n          'track': 'trackNo'\r\n        }\r\n        const apiField = fieldMapping[field] || field\r\n\r\n        // Handle timezone conversion for time field\r\n        // mutator displays as Taiwan time (YYYY/MM/DD HH:mm)\r\n        // Need to convert back to ISO 8601 UTC before sending to API\r\n        let finalValue = value\r\n        if (field === 'time') {\r\n          const date = dayjs(value, 'YYYY/MM/DD HH:mm')\r\n          finalValue = date.isValid() ? date.toISOString() : value\r\n          console.log(`Time field converted: ${value} (local) \u2192 ${finalValue} (UTC)`)\r\n        }\r\n\r\n        // PUT update to API\r\n        const updateData = { [apiField]: finalValue }\r\n        await apiRequest('PUT', `${endpoint}/${id}`, updateData)\r\n\r\n        // Show brief success indicator\r\n        cell.getElement().style.backgroundColor = '#d4edda'\r\n        setTimeout(() => {\r\n          cell.getElement().style.backgroundColor = ''\r\n        }, 1000)\r\n\r\n      } catch (error) {\r\n        console.error('Error syncing cell edit:', error)\r\n        // Revert cell value on error\r\n        cell.restoreOldValue()\r\n        alert(`Error saving changes: ${error.message}`)\r\n      }\r\n    })\r\n\r\n    jsonTable.on(\"rowDeleted\", function(row) {\r\n      // Row deleted from table - API delete is now handled in deleteRowOK handler\r\n      // This event is only used for logging\r\n      const rowData = row.getData()\r\n      console.log('Row deleted from table:', rowData)\r\n\r\n      // Show brief notification\r\n      $('#setTableMsg').text('\u8CC7\u6599\u5DF2\u5F9E\u8868\u683C\u79FB\u9664').addClass('text-bg-info')\r\n      setTimeout(() => {\r\n        $('#setTableMsg').html('&emsp;').removeClass('text-bg-info')\r\n      }, 2000)\r\n    })\r\n  }\r\n\r\n  //--- jsonTable button block ---\r\n\r\n  $('#content').on('click', '#reloadBtn', ()=>{\r\n    jsonTable.setData()\r\n    jsonTable.clearFilter(true)\r\n    jsonTable.deselectRow()\r\n  })\r\n\r\n  $('#content').on('click', '#edit', ()=>{\r\n    $('.addRow').prop('disabled', !canEdit())\r\n    $('#deleteRow').prop('disabled', canEdit())\r\n\r\n    if(canEdit()){\r\n      // \u9032\u5165\u7DE8\u8F2F\u6A21\u5F0F\uFF1A\u52D5\u614B\u6DFB\u52A0 editor\r\n      // \u5F9E\u8868\u683C\u5BE6\u4F8B\u7372\u53D6\u7576\u524D\u5217\u5B9A\u7FA9\r\n      const currentColDef = jsonTable.getColumnDefinitions()\r\n\r\n      // \u5B89\u5168\u6AA2\u67E5\uFF1A\u78BA\u4FDD API \u8FD4\u56DE\u6709\u6548\u6578\u7D44\r\n      if (!Array.isArray(currentColDef) || currentColDef.length === 0) {\r\n        console.error('[ERROR] Failed to get column definitions')\r\n        return\r\n      }\r\n\r\n      const editableColDef = currentColDef.map(col => {\r\n        // Songlist: Use bilingual editor for songName and artist\r\n        if (getProcess() === 'songlist') {\r\n          if (col.field === 'songName') {\r\n            return {\r\n              ...col,\r\n              editor: bilingualEditor,\r\n              editorParams: { field: 'songName', fieldLabel: 'Song Name / \u6B4C\u540D' },\r\n              editable: true\r\n            }\r\n          }\r\n          if (col.field === 'artist') {\r\n            return {\r\n              ...col,\r\n              editor: bilingualEditor,\r\n              editorParams: { field: 'artist', fieldLabel: 'Artist / \u6B4C\u624B' },\r\n              editable: true\r\n            }\r\n          }\r\n        }\r\n\r\n        // Setlist: Song \u6B04\u4F4D\u4F7F\u7528 Select2 editor\r\n        if (getProcess() === 'setlist' && col.field === 'songName') {\r\n          return {\r\n            ...col,\r\n            editor: setlistSongSelect2Editor,\r\n            editable: true\r\n          }\r\n        }\r\n        // Artist \u6B04\u4F4D\u5728 setlist \u4FDD\u6301\u552F\u8B80\uFF08\u7531 Select2 \u81EA\u52D5\u586B\u5165\uFF09\r\n        // \u5728 streamlist \u6DFB\u52A0 editor\uFF08\u5141\u8A31\u624B\u52D5\u7DE8\u8F2F\uFF09\r\n        if (col.field === 'artist') {\r\n          if (getProcess() === 'setlist') {\r\n            return col  // No editor in setlist, auto-updated by song selection\r\n          }\r\n          // For streamlist, fall through to add default editor\r\n        }\r\n        // songID \u96B1\u85CF\u6B04\u4F4D\u4E0D\u9700\u8981\u7DE8\u8F2F\r\n        if (col.field === 'songID') {\r\n          return col  // Keep as is\r\n        }\r\n        // \u5DF2\u6709 editor \u7684\u6B04\u4F4D\u4FDD\u6301\u4E0D\u8B8A\r\n        if (col.editor) {\r\n          return { ...col, editable: true }\r\n        }\r\n        // \u5176\u4ED6\u6B04\u4F4D\u6DFB\u52A0\u9810\u8A2D input editor\r\n        return { ...col, editor: \"input\", editable: true }\r\n      })\r\n      jsonTable.setColumns(editableColDef)\r\n      jsonTable.showColumn(\"YTLink\")\r\n      jsonTable.deselectRow()\r\n\r\n      // Show add new song button for setlist\r\n      if (getProcess() === 'setlist') {\r\n        $('#addNewSongInSetlist').show()\r\n      }\r\n\r\n      $('#setTableMsg').text('You can edit data by clicing cell , or using Excel edit , click the table, and paste to it.').addClass('text-bg-info')\r\n    }\r\n    else{\r\n      // \u96E2\u958B\u7DE8\u8F2F\u6A21\u5F0F\uFF1A\u6062\u5FA9\u539F\u59CB\u6B04\u4F4D\u5B9A\u7FA9\uFF08\u79FB\u9664\u7279\u5B9A editor \u907F\u514D\u6514\u622A\u9EDE\u64CA\uFF09\r\n      // \u5F9E\u8868\u683C\u5BE6\u4F8B\u7372\u53D6\u7576\u524D\u5217\u5B9A\u7FA9\r\n      const currentColDef = jsonTable.getColumnDefinitions()\r\n\r\n      // \u5B89\u5168\u6AA2\u67E5\uFF1A\u78BA\u4FDD API \u8FD4\u56DE\u6709\u6548\u6578\u7D44\r\n      if (!Array.isArray(currentColDef) || currentColDef.length === 0) {\r\n        console.error('[ERROR] Failed to get column definitions')\r\n        return\r\n      }\r\n\r\n      const viewColDef = currentColDef.map(col => {\r\n        const newCol = { ...col, editable: false }\r\n        // \u79FB\u9664\u6240\u6709 editor \u4EE5\u5141\u8A31\u6B63\u5E38\u7684 row selection\r\n        if (col.editor) {\r\n          const { editor, ...rest } = newCol\r\n          return rest\r\n        }\r\n        return newCol\r\n      })\r\n      jsonTable.setColumns(viewColDef)\r\n\r\n      // \u91CD\u65B0\u8F09\u5165\u8CC7\u6599\u4EE5\u78BA\u4FDD\u8207\u5F8C\u7AEF\u540C\u6B65\r\n      const currentProcess = getProcess()\r\n      const endpoint = API_CONFIG.ENDPOINTS[currentProcess]\r\n      if (endpoint) {\r\n        console.log(`[Edit Mode] Reloading ${currentProcess} data from API after exiting edit mode`)\r\n        apiRequest('GET', endpoint)\r\n          .then(data => {\r\n            jsonTable.setData(data)\r\n            console.log(`[Edit Mode] Successfully reloaded ${data.length} rows`)\r\n          })\r\n          .catch(error => {\r\n            console.error(`[Edit Mode] Failed to reload data:`, error)\r\n            showError(`Failed to reload data: ${error.message}`)\r\n          })\r\n      }\r\n\r\n      // Hide add new song button\r\n      $('#addNewSongInSetlist').hide()\r\n      //tell user editing completed\r\n      $('#setTableMsg').text('\u7DE8\u8F2F\u5B8C\u6210').addClass('text-bg-info')\r\n      setTimeout(()=>{\r\n        $('#setTableMsg').html('&emsp;').removeClass('text-bg-info')\r\n      },5000)\r\n    }\r\n  })\r\n\r\n  var addRowModal = new bootstrap.Modal(document.getElementById('modalAddRow'))\r\n  document.getElementById('modalAddRow').addEventListener('shown.bs.modal', () => {\r\n    $('#YTLink').focus()\r\n  })\r\n\r\n  var addSongModal = new bootstrap.Modal(document.getElementById('modalAddSong'))\r\n  document.getElementById('modalAddSong').addEventListener('shown.bs.modal', () => {\r\n    $('#songName').focus()\r\n  })\r\n    \r\n  $('#content').on('click', '#addRow', ()=>{\r\n    // Check which page type this is\r\n    const currentPath = window.location.pathname.split('/').pop()\r\n\r\n    if (currentPath === 'songlist') {\r\n      // Reset form\r\n      $('#modalAddSong form')[0].reset()\r\n\r\n      // Destroy existing Select2 if present\r\n      if ($('#artistName').hasClass('select2-hidden-accessible')) {\r\n        $('#artistName').select2('destroy')\r\n      }\r\n\r\n      // Initialize AJAX Artist Select2\r\n      initializeArtistSelect()\r\n\r\n      // Open songlist modal\r\n      addSongModal.show()\r\n    } else {\r\n      // Default: setlist modal\r\n      //$('#setlistDate').val(dayjs().format('YYYY/MM/DD'))\r\n      addRowModal.show()\r\n    }\r\n  })\r\n\r\n  $('#addRowData').on('click', ()=>{\r\n    let info = {d:$('#setlistDate').val(), y:$('#YTLink').val(), c:Number($('#songs').val())}\r\n\r\n    jsonTable.blockRedraw()\r\n    for(let i=info.c; i>0 ; i--){\r\n      jsonTable.addRow({date:info.d, YTLink:info.y, track:i}, true)\r\n    }\r\n    jsonTable.restoreRedraw()\r\n    jsonTable.redraw()\r\n  })\r\n\r\n  // songlist modal submit handler\r\n  $('#addSongData').on('click', async ()=>{\r\n    try {\r\n      // Validate required fields\r\n      const songName = $('#songName').val().trim()\r\n      const artistName = $('#artistName').val().trim()\r\n\r\n      if (!songName || !artistName) {\r\n        alert('Please fill in required fields: Song Name and Artist')\r\n        return\r\n      }\r\n\r\n      // Prepare song data\r\n      const songData = {\r\n        songName: songName,\r\n        songNameEn: $('#songNameEn').val().trim() || null,\r\n        artist: artistName,\r\n        artistEn: $('#artistNameEn').val().trim() || null,\r\n        genre: $('#genreName').val().trim() || null,\r\n        tieup: $('#tieupName').val().trim() || null,\r\n        songNote: $('#songNoteText').val().trim() || null\r\n      }\r\n\r\n      // Show loading state\r\n      const submitBtn = $('#addSongData')\r\n      const originalText = submitBtn.text()\r\n      submitBtn.prop('disabled', true).text('Adding...')\r\n\r\n      // POST to API\r\n      const newSong = await apiRequest('POST', API_CONFIG.ENDPOINTS.songlist, songData)\r\n\r\n      // Only add to table if we're on the songlist page\r\n      const currentPath = window.location.pathname.split('/').pop()\r\n      if (currentPath === 'songlist' && jsonTable) {\r\n        jsonTable.addRow(newSong, true)\r\n      }\r\n\r\n      // Close modal and reset form\r\n      addSongModal.hide()\r\n      $('#modalAddSong form')[0].reset()\r\n\r\n      // Show success message only if on songlist page\r\n      if (currentPath === 'songlist') {\r\n        $('#setTableMsg').text('Song added successfully').addClass('text-bg-success')\r\n        setTimeout(() => {\r\n          $('#setTableMsg').html('&emsp;').removeClass('text-bg-success')\r\n        }, 3000)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error adding song:', error)\r\n      alert(`Error adding song: ${error.message}`)\r\n    } finally {\r\n      // Reset button state\r\n      $('#addSongData').prop('disabled', false).text('Add Song')\r\n    }\r\n  })\r\n\r\n  $('#content').on('click', '#deleteRow', ()=>{\r\n      let selectedRows = jsonTable.getSelectedRows()\r\n      $('#modalFooter').empty()\r\n      if(selectedRows == 0 ){\r\n        $('#modalMsg').html(\"No selected row\")\r\n        $('#modalFooter').append(`<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">OK</button>`)\r\n      }\r\n      else{\r\n        $('#modalMsg').html(\"Delete?\")\r\n        $('#modalFooter').append(`<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"deleteRowCancel\">Cancel</button>\r\n                                  <button type=\"button\" class=\"btn btn-danger\" id=\"deleteRowOK\">OK</button>`)\r\n      }\r\n      msgModal.show()\r\n  })\r\n\r\n  $('#modalFooter').on('click', '#deleteRowOK', async ()=>{\r\n    const selectedRows = jsonTable.getSelectedRows()\r\n    const p = getProcess()\r\n\r\n    // 1. \u986F\u793A loading \u72C0\u614B\r\n    $('#modalMsg').html(`\r\n      <div class=\"text-center\">\r\n        <div class=\"spinner-border text-danger mb-3\" role=\"status\">\r\n          <span class=\"visually-hidden\">Deleting...</span>\r\n        </div>\r\n        <p class=\"mb-2\">\u6B63\u5728\u522A\u9664 ${selectedRows.length} \u7B46\u8CC7\u6599...</p>\r\n        <p class=\"small text-muted\">\u8ACB\u7A0D\u5019\uFF0C\u6B63\u5728\u6AA2\u67E5\u8CC7\u6599\u95DC\u806F\u6027</p>\r\n      </div>\r\n    `)\r\n    $('#modalFooter').empty()  // \u79FB\u9664\u6309\u9215\u9632\u6B62\u91CD\u8907\u9EDE\u64CA\r\n\r\n    // 2. \u78BA\u5B9A API endpoint\r\n    let endpoint\r\n    if (p === 'songlist') {\r\n      endpoint = API_CONFIG.ENDPOINTS.songlist\r\n    } else if (p === 'streamlist') {\r\n      endpoint = API_CONFIG.ENDPOINTS.streamlist\r\n    } else if (p === 'setlist') {\r\n      endpoint = API_CONFIG.ENDPOINTS.setlist\r\n    } else if (p === 'aliases') {\r\n      endpoint = API_CONFIG.ENDPOINTS.aliases\r\n    } else {\r\n      // \u4E0D\u652F\u63F4 API \u7684\u8868\u683C\uFF0C\u76F4\u63A5\u522A\u9664\r\n      jsonTable.blockRedraw()\r\n      selectedRows.forEach(row => row.delete())\r\n      jsonTable.restoreRedraw()\r\n      msgModal.hide()\r\n      return\r\n    }\r\n\r\n    // 3. \u9010\u4E00\u547C\u53EB API \u9A57\u8B49\u4E26\u522A\u9664\r\n    const results = []\r\n    for (let i = 0; i < selectedRows.length; i++) {\r\n      const row = selectedRows[i]\r\n      const rowData = row.getData()\r\n\r\n      // \u66F4\u65B0\u9032\u5EA6\r\n      $('#modalMsg').html(`\r\n        <div class=\"text-center\">\r\n          <div class=\"spinner-border text-danger mb-3\" role=\"status\"></div>\r\n          <p class=\"mb-2\">\u6B63\u5728\u522A\u9664 ${i + 1} / ${selectedRows.length} ...</p>\r\n          <p class=\"small text-muted\">${rowData.title || rowData.songName || rowData.streamID || ''}</p>\r\n        </div>\r\n      `)\r\n\r\n      // \u78BA\u5B9A ID\r\n      let id\r\n      if (p === 'songlist') {\r\n        id = rowData.songID\r\n      } else if (p === 'streamlist') {\r\n        id = rowData.streamID\r\n      } else if (p === 'setlist') {\r\n        id = `${rowData.streamID}/${rowData.trackNo}`\r\n      } else if (p === 'aliases') {\r\n        id = rowData.aliasID\r\n      }\r\n\r\n      if (!id) {\r\n        results.push({ row, success: false, error: 'No ID found' })\r\n        continue\r\n      }\r\n\r\n      // \u547C\u53EB API DELETE\r\n      try {\r\n        await apiRequest('DELETE', `${endpoint}/${id}`)\r\n        results.push({ row, success: true, data: rowData })\r\n      } catch (error) {\r\n        results.push({ row, success: false, error: error.message, data: rowData })\r\n      }\r\n    }\r\n\r\n    // 4. \u53EA\u522A\u9664\u6210\u529F\u7684 rows\r\n    jsonTable.blockRedraw()\r\n    results.forEach(r => {\r\n      if (r.success) {\r\n        r.row.delete()\r\n      }\r\n    })\r\n    jsonTable.restoreRedraw()\r\n\r\n    // 5. \u986F\u793A\u7D50\u679C\r\n    const successCount = results.filter(r => r.success).length\r\n    const failCount = results.length - successCount\r\n\r\n    if (failCount > 0) {\r\n      const failedRows = results.filter(r => !r.success)\r\n      const errorDetails = failedRows.map(r => {\r\n        const name = r.data?.title || r.data?.songName || r.data?.streamID || 'Unknown'\r\n        return `<li><strong>${name}</strong>: ${r.error}</li>`\r\n      }).join('')\r\n\r\n      $('#modalMsg').html(`\r\n        <div class=\"alert alert-warning mb-0\">\r\n          <h6 class=\"alert-heading\">\r\n            <i class=\"bi bi-exclamation-triangle-fill me-2\"></i>\r\n            \u90E8\u5206\u522A\u9664\u5931\u6557\r\n          </h6>\r\n          <p class=\"mb-2\">\r\n            <span class=\"badge bg-success\">${successCount} \u7B46\u6210\u529F</span>\r\n            <span class=\"badge bg-danger ms-2\">${failCount} \u7B46\u5931\u6557</span>\r\n          </p>\r\n          ${failCount <= 5 ? `\r\n            <hr>\r\n            <p class=\"mb-2\"><strong>\u5931\u6557\u539F\u56E0\uFF1A</strong></p>\r\n            <ul class=\"mb-0 small\">${errorDetails}</ul>\r\n          ` : `\r\n            <hr>\r\n            <p class=\"mb-0 small\"><strong>\u5E38\u898B\u539F\u56E0\uFF1A</strong>\u8A72\u9805\u76EE\u4ECD\u88AB\u5176\u4ED6\u8CC7\u6599\u5F15\u7528\uFF08\u4F8B\u5982 streamlist \u6709\u95DC\u806F\u7684 setlist\uFF09</p>\r\n          `}\r\n        </div>\r\n      `)\r\n    } else {\r\n      $('#modalMsg').html(`\r\n        <div class=\"alert alert-success mb-0\">\r\n          <h6 class=\"alert-heading\">\r\n            <i class=\"bi bi-check-circle-fill me-2\"></i>\r\n            \u522A\u9664\u6210\u529F\r\n          </h6>\r\n          <p class=\"mb-0\">\u6210\u529F\u522A\u9664 ${successCount} \u7B46\u8CC7\u6599</p>\r\n        </div>\r\n      `)\r\n    }\r\n\r\n    $('#modalFooter').html(`<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\u95DC\u9589</button>`)\r\n  })\r\n\r\n\r\n  $('#modalFooter').on('click', '#dlData', ()=>{\r\n    $('#dljson').click()\r\n    $('#modalFooter').empty()\r\n  })\r\n\r\n\r\n  $('#content').on('click', '#dlcsv', ()=>{\r\n    let filename=getProcess()\r\n    jsonTable.download('csv', filename + '.csv', {delimiter:\";\", bom:true})\r\n  })\r\n\r\n  $('#content').on('click', '#dljson', ()=>{\r\n    let filename=getProcess()\r\n    jsonTable.download('json', filename + '.json')\r\n  })\r\n\r\n  $('#setlistDate').on('blur', (e)=>{\r\n    let d = dayjs(e.target.value)\r\n    if(!d.isValid()){\r\n      $('#dateCheck').text('Date not valid')\r\n      $('#setlistDate').trigger( \"focus\" )\r\n    }\r\n    else{\r\n      $('#dateCheck').text('')\r\n      //e.target.value=d.format('YYYY/MM/DD HH:mm')\r\n    }\r\n  })\r\n\r\n  $('#YTLink').on('blur', async ()=>{\r\n    fillVedioInfo($('#YTLink'))\r\n  })\r\n\r\n  //for streamlist (quick solution)\r\n\r\n  var addStreamRowModal = new bootstrap.Modal(document.getElementById('modalAddStreamRow'))\r\n  document.getElementById('modalAddStreamRow').addEventListener('shown.bs.modal', () => {\r\n    $('#YTID').focus()\r\n  })\r\n  \r\n\r\n  $('#content').on('click', '#addStreamRow', ()=>{\r\n    $('.form-control').val('')\r\n\r\n    // Check if table data is loaded\r\n    if (!window.tableDataLoaded || !jsonTable) {\r\n      alert('Please wait for table data to load before adding new rows.');\r\n      return;\r\n    }\r\n\r\n    // Initialize select2 for category with dynamic data\r\n    $('#category').empty()\r\n    if ($('#category').hasClass('select2-hidden-accessible')) {\r\n      $('#category').select2('destroy')\r\n    }\r\n\r\n    let categoryData = getDynamicFieldData(jsonTable, 'categories')\r\n    console.log('Modal category data:', categoryData)\r\n\r\n    if (categoryData.length === 0) {\r\n      console.warn('No category data available, allow tags only');\r\n    }\r\n\r\n    $('#category').select2({\r\n      data: categoryData,\r\n      allowClear: true,\r\n      tags: true,  // Restored: Allow creating new categories\r\n      multiple: true,  // Restored: Allow multiple selection\r\n      width: '100%',\r\n      dropdownParent: $('#modalAddStreamRow'),\r\n      placeholder: categoryData.length === 0 ? 'Type to add categories...' : 'Select or type categories...'\r\n    })\r\n\r\n    // Set default category (Stage B-2: array for multiple mode)\r\n    $('#category').val(['\u6B4C\u67A0 / Singing']).trigger('change');\r\n\r\n    $('#streamTitle').prop('disabled', true)\r\n    $('#streamTime').prop('disabled', true)\r\n    addStreamRowModal.show()\r\n  })\r\n\r\n  $('#YTID').on('blur', async ()=>{\r\n    fillVedioInfo($('#YTID'))\r\n  })\r\n\r\n  function fillVedioInfo(obj){\r\n    // query youtube api get info\r\n    // You can use your API key to query the info\r\n    // https://developers.google.com/youtube/v3/getting-started\r\n    // if you have api key then decomment the following code\r\n    // and comment url:'https://getytvideoinfo.katani.workers.dev/?id='+id, decomment url:url\r\n\r\n    /* const YOUTUBEAPIKEY = 'YOUR_YOUTUBE_API_KEY'\r\n     let url = https://www.googleapis.com/youtube/v3/videos?key=' + YOUTUBEAPIKEY \r\n           + '&part=id,snippet,liveStreamingDetails'\r\n           + '&fields=items(id,snippet(publishedAt,channelId,title),liveStreamingDetails(scheduledStartTime))'\r\n           + '&id='+id\r\n    */\r\n    \r\n    const BERRYCHANNEL = ['UC7A7bGRVdIwo93nqnA3x-OQ', 'UCBOGwPeBtaPRU59j8jshdjQ', 'UC2cgr_UtYukapRUt404In-A']\r\n\r\n    let id = getYoutubeVideoId(obj.val())\r\n    if(id === undefined) return\r\n\r\n    //load content\r\n    $.ajax({\r\n      url:'https://getytvideoinfo.katani.workers.dev/?id='+id,\r\n      //url:url\r\n      })\r\n      .done((d, textStatus, request)=>{\r\n        let info = d.items[0]\r\n        let isBerryChannel = BERRYCHANNEL.filter(e=>info.snippet.channelId.includes(e))\r\n        //berry's video?\r\n        if( isBerryChannel.length > 0 ){\r\n          let title = info.snippet.title\r\n          $('#streamMsg').html(\"\u3000\")\r\n          $('#streamTitle').val(title)\r\n\r\n          $('#streamTime').val(info.time)\r\n          $('#setlistDate').val(info.time)\r\n          \r\n          $('#videoID').val(id)\r\n          $('#category').val(preCategory(title)).trigger('change');\r\n        }\r\n        else{\r\n          // \u975Eberry\u983B\u9053\uFF0C\u5728\u7576\u524Dmodal\u5167\u986F\u793A\u78BA\u8A8D\u6309\u9215\r\n          $('#streamMsg').html(`\r\n            <div class=\"text-warning\">\u26A0\uFE0F \u975Eberry\u983B\u9053 \u78BA\u8A8D\u8981\u65B0\u589E?</div>\r\n            <div class=\"mt-2\">\r\n              <button type=\"button\" class=\"btn btn-sm btn-secondary me-2\" id=\"cancelNonBerry\">\u53D6\u6D88</button>\r\n              <button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"confirmNonBerry\">\u78BA\u8A8D</button>\r\n            </div>\r\n          `)\r\n\r\n          // \u66AB\u5B58\u5F71\u7247\u8CC7\u8A0A\u4F9B\u78BA\u8A8D\u5F8C\u4F7F\u7528\r\n          $('#YTID').data('tempVideoInfo', {\r\n            info: info,\r\n            id: id\r\n          })\r\n        }    \r\n      })\r\n      .fail((jqXHR, textStatus)=>{\r\n        $('#streamMsg').html(\"Get video info fail.\")\r\n        $('#streamTitle').prop('disabled', false)\r\n        $('#streamTime').prop('disabled', false)\r\n      })\r\n  }\r\n  \r\n  $('#streamTime').on('blur', (e)=>{\r\n    if(e.target.value.length == 0) return\r\n    e.target.value = dayjs(e.target.value).format('YYYY-MM-DD HH:mm:00.000Z')\r\n  })\r\n\r\n  $('#addStreamRowData').on('click', async (e)=>{\r\n      // Select2 multiple already returns array format\r\n      const categories = $('#category').val() || [];\r\n      const streamID = $('#videoID').val()\r\n      const title = $('#streamTitle').val()\r\n      const time = dayjs($('#streamTime').val()).utc().format('YYYY-MM-DDTHH:mm:ss[Z]')\r\n      const note = null\r\n\r\n      // \u96B1\u85CF\u4E4B\u524D\u7684\u932F\u8AA4\u8A0A\u606F\r\n      $('#addStreamRowError').hide()\r\n\r\n      // \u5148\u9001\u8CC7\u6599\u5EAB\u9A57\u8B49\r\n      try {\r\n        // \u986F\u793A\u8F09\u5165\u72C0\u614B\r\n        $('#addStreamRowData').prop('disabled', true).text('\u65B0\u589E\u4E2D...')\r\n\r\n        // \u5148\u547C\u53EB API \u65B0\u589E\u5230\u8CC7\u6599\u5EAB\r\n        const result = await apiRequest('POST', API_CONFIG.ENDPOINTS.streamlist, {\r\n          streamID: streamID,\r\n          title: title,\r\n          time: time,\r\n          categories: categories,\r\n          note: note\r\n        }, {\r\n          headers: { 'X-Source': 'user' }\r\n        })\r\n\r\n        console.log('\u2705 Streamlist entry created:', result)\r\n\r\n        // API \u6210\u529F\u5F8C\u624D\u52A0\u5165 Tabulator \u8868\u683C\r\n        jsonTable.addRow({\r\n          streamID: streamID,\r\n          title: title,\r\n          time: time,\r\n          categories: categories,\r\n          note: note\r\n        }, true)\r\n\r\n        // \u95DC\u9589 Modal\uFF08\u2705 \u6210\u529F\u6642\u624D\u95DC\u9589\uFF09\r\n        addStreamRowModal.hide()\r\n\r\n        // \u6E05\u7A7A\u8868\u55AE\r\n        $('.form-control').val('')\r\n        $('#category').val([]).trigger('change')\r\n\r\n        // \u6062\u5FA9\u6309\u9215\u72C0\u614B\r\n        $('#addStreamRowData').prop('disabled', false).text('Add')\r\n\r\n      } catch (error) {\r\n        // API \u5931\u6557\u8655\u7406\r\n        console.error('Failed to create streamlist entry:', error)\r\n\r\n        // \u6062\u5FA9\u6309\u9215\u72C0\u614B\r\n        $('#addStreamRowData').prop('disabled', false).text('Add')\r\n\r\n        // \u8655\u7406\u7279\u5B9A\u932F\u8AA4\u4E26\u986F\u793A\u5728 Modal \u5167\r\n        const errorMsg = error.message || String(error)\r\n        let errorDetail = ''\r\n\r\n        if (errorMsg.includes('already exists') || errorMsg.includes('Conflict')) {\r\n          errorDetail = `\u6B64\u76F4\u64AD\u5DF2\u5B58\u5728<br><small>StreamID \"<strong>${streamID}</strong>\" \u5DF2\u5728\u8CC7\u6599\u5EAB\u4E2D\uFF0C\u8ACB\u4F7F\u7528\u5176\u4ED6\u5F71\u7247</small>`\r\n        } else if (errorMsg.includes('400') || errorMsg.includes('VALIDATION')) {\r\n          errorDetail = `\u8CC7\u6599\u683C\u5F0F\u932F\u8AA4<br><small>\u8ACB\u6AA2\u67E5\u5FC5\u586B\u6B04\u4F4D\u662F\u5426\u586B\u5BEB\u5B8C\u6574</small>`\r\n        } else if (errorMsg.includes('timeout') || errorMsg.includes('NetworkError')) {\r\n          errorDetail = `\u7DB2\u8DEF\u9023\u7DDA\u932F\u8AA4<br><small>\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u6216 Hyperdrive \u670D\u52D9\u662F\u5426\u555F\u52D5</small>`\r\n        } else {\r\n          errorDetail = `${errorMsg}<br><small>\u8ACB\u6AA2\u67E5\u8F38\u5165\u8CC7\u6599\u6216\u806F\u7E6B\u7BA1\u7406\u54E1</small>`\r\n        }\r\n\r\n        // \u5728 Modal \u5167\u986F\u793A\u932F\u8AA4\u8A0A\u606F\r\n        $('#addStreamRowErrorMsg').html(errorDetail)\r\n        $('#addStreamRowError').show()\r\n\r\n        // \u81EA\u52D5\u6372\u52D5\u5230\u932F\u8AA4\u8A0A\u606F\uFF08\u8B93\u4F7F\u7528\u8005\u770B\u5230\uFF09\r\n        $('#addStreamRowError')[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n\r\n        // \u26A0\uFE0F Modal \u4FDD\u6301\u958B\u555F\uFF0C\u8B93\u4F7F\u7528\u8005\u53EF\u4EE5\u4FEE\u6539\u8CC7\u6599\u5F8C\u91CD\u8A66\r\n      }\r\n    })\r\n\r\n  // \u8655\u7406\u975Eberry\u983B\u9053\u78BA\u8A8D\u6309\u9215\r\n  $(document).on('click', '#confirmNonBerry', (e)=>{\r\n    console.log('\u78BA\u8A8D\u6309\u9215\u88AB\u9EDE\u64CA') // \u8ABF\u8A66\u8F38\u51FA\r\n    let tempData = $('#YTID').data('tempVideoInfo')\r\n    console.log('\u66AB\u5B58\u8CC7\u6599:', tempData) // \u8ABF\u8A66\u8F38\u51FA\r\n\r\n    if (tempData) {\r\n      let {info, id} = tempData\r\n      let title = info.snippet.title\r\n\r\n      // \u586B\u5165\u5F71\u7247\u8CC7\u8A0A (\u8207berry\u983B\u9053\u76F8\u540C\u908F\u8F2F)\r\n      $('#streamMsg').html(\"\u3000\")\r\n      $('#streamTitle').val(title).prop('disabled', false)\r\n      $('#streamTime').val(info.time).prop('disabled', false)\r\n      $('#setlistDate').val(info.time)\r\n      $('#videoID').val(id)\r\n      $('#category').val(preCategory(title)).trigger('change')\r\n\r\n      console.log('\u5F71\u7247\u8CC7\u8A0A\u5DF2\u586B\u5165') // \u8ABF\u8A66\u8F38\u51FA\r\n      // \u6E05\u9664\u66AB\u5B58\u8CC7\u6599\r\n      $('#YTID').removeData('tempVideoInfo')\r\n    }\r\n  })\r\n\r\n  // \u8655\u7406\u975Eberry\u983B\u9053\u53D6\u6D88\u6309\u9215\r\n  $(document).on('click', '#cancelNonBerry', (e)=>{\r\n    console.log('\u53D6\u6D88\u6309\u9215\u88AB\u9EDE\u64CA') // \u8ABF\u8A66\u8F38\u51FA\r\n\r\n    // \u6E05\u7A7A\u8F38\u5165\u6846\u4E26\u91CD\u65B0\u7372\u5F97\u7126\u9EDE\r\n    $('#YTID').val('').focus()\r\n    $('#streamMsg').html(\"\u5DF2\u53D6\u6D88\u65B0\u589E\")\r\n\r\n    // \u6E05\u9664\u66AB\u5B58\u8CC7\u6599\r\n    $('#YTID').removeData('tempVideoInfo')\r\n  })\r\n\r\n  // Add from list button click handler\r\n  $('#content').on('click', '#addFromList', () => {\r\n    addFromLatestList()\r\n  })\r\n\r\n  // Add from latest list function for streamlist\r\n  function addFromLatestList() {\r\n    $.ajax({\r\n      url: 'https://getytvideoinfo.katani.workers.dev/newvideos'\r\n    })\r\n    .done((data) => {\r\n      if (!data.items || data.items.length === 0) {\r\n        $('#setTableMsg').text('No new data available').addClass('text-bg-warning')\r\n        setTimeout(() => {\r\n          $('#setTableMsg').html('&emsp;').removeClass('text-bg-warning')\r\n        }, 3000)\r\n        return\r\n      }\r\n\r\n      // Get existing IDs from current table data\r\n      const existingIds = jsonTable.getData().map(row => row.id)\r\n      \r\n      // Filter out duplicates and convert format\r\n      const newData = data.items\r\n        .filter(item => !existingIds.includes(item.id))\r\n        .map(item => ({\r\n          id: item.id,\r\n          title: item.snippet.title,\r\n          time: item.time,\r\n          category: item.category || preCategory(item.snippet.title)\r\n        }))\r\n        .sort((a, b) => new Date(b.time) - new Date(a.time)) // Sort by date desc\r\n\r\n      if (newData.length === 0) {\r\n        $('#setTableMsg').text('No new videos found (all videos already exist)').addClass('text-bg-info')\r\n        setTimeout(() => {\r\n          $('#setTableMsg').html('&emsp;').removeClass('text-bg-info')\r\n        }, 3000)\r\n        return\r\n      }\r\n\r\n      // Add data to table at top\r\n      jsonTable.addData(newData, true)\r\n      \r\n      $('#setTableMsg').text(`Successfully added ${newData.length} new video(s)`).addClass('text-bg-success')\r\n      setTimeout(() => {\r\n        $('#setTableMsg').html('&emsp;').removeClass('text-bg-success')\r\n      }, 3000)\r\n    })\r\n    .fail((error) => {\r\n      console.error('Error fetching latest videos:', error)\r\n      $('#setTableMsg').text('Failed to fetch latest videos').addClass('text-bg-danger')\r\n      setTimeout(() => {\r\n        $('#setTableMsg').html('&emsp;').removeClass('text-bg-danger')\r\n      }, 3000)\r\n    })\r\n  }\r\n\r\n  //--- Aliases Page Handlers ---\r\n\r\n  // Add Alias button - open quick add modal\r\n  $('#content').on('click', '#addAlias', () => {\r\n    $('#quickAliasType').val('artist')\r\n    $('#quickCanonicalName').val('')\r\n    $('#quickAliasValue').val('')\r\n    $('#quickAliasNote').val('')\r\n    new bootstrap.Modal('#modalQuickAddAlias').show()\r\n  })\r\n\r\n  // Batch Add Aliases button\r\n  $('#content').on('click', '#batchAddAliases', () => {\r\n    $('#batchAliasType').val('artist')\r\n    $('#batchAliasJSON').val('')\r\n    new bootstrap.Modal('#modalBatchAddAliases').show()\r\n  })\r\n\r\n  // Test Alias button\r\n  $('#content').on('click', '#testAlias', () => {\r\n    $('#testAliasType').val('artist')\r\n    $('#testAliasInput').val('')\r\n    $('#testAliasResults').hide()\r\n    $('#testAliasResultsContent').empty()\r\n    new bootstrap.Modal('#modalTestAlias').show()\r\n  })\r\n\r\n  // Quick Add Alias: Initialize Select2 and load options\r\n  $('#modalQuickAddAlias').on('shown.bs.modal', async function() {\r\n    // Initialize Select2 for canonical name dropdown\r\n    if (!$('#quickCanonicalName').data('select2')) {\r\n      $('#quickCanonicalName').select2({\r\n        dropdownParent: $('#modalQuickAddAlias'),\r\n        width: '100%',\r\n        placeholder: '\u8ACB\u9078\u64C7...',\r\n        allowClear: true\r\n      })\r\n    }\r\n\r\n    // Load initial options based on current type\r\n    await loadQuickAddOptions()\r\n  })\r\n\r\n  // Quick Add Alias: Update options when type changes\r\n  $('#quickAliasType').on('change', async function() {\r\n    await loadQuickAddOptions()\r\n\r\n    // Auto-update alias value based on new type\r\n    const aliasType = $(this).val()\r\n    const songData = $('#modalQuickAddAlias').data('songData')\r\n\r\n    if (songData) {\r\n      if (aliasType === 'artist') {\r\n        $('#quickAliasValue').val(songData.artist || '')\r\n      } else if (aliasType === 'title') {\r\n        $('#quickAliasValue').val(songData.songName || '')\r\n      }\r\n    }\r\n  })\r\n\r\n  // Function to load canonical name options for Quick Add\r\n  async function loadQuickAddOptions() {\r\n    const aliasType = $('#quickAliasType').val()\r\n\r\n    try {\r\n      // Fetch songlist data from API\r\n      const response = await apiRequest('GET', API_CONFIG.ENDPOINTS.songlist)\r\n      const songlist = response.data || response\r\n\r\n      // Extract unique canonical names based on type\r\n      let options = []\r\n      if (aliasType === 'artist') {\r\n        // Get unique artist names\r\n        const artists = new Set()\r\n        songlist.forEach(song => {\r\n          if (song.artist) artists.add(song.artist)\r\n        })\r\n        options = Array.from(artists).sort()\r\n      } else {\r\n        // Get unique song titles\r\n        const titles = new Set()\r\n        songlist.forEach(song => {\r\n          if (song.songName) titles.add(song.songName)\r\n        })\r\n        options = Array.from(titles).sort()\r\n      }\r\n\r\n      // Update select options\r\n      const $select = $('#quickCanonicalName')\r\n      $select.empty()\r\n      $select.append('<option value=\"\">\u8ACB\u9078\u64C7...</option>')\r\n      options.forEach(option => {\r\n        $select.append(`<option value=\"${option}\">${option}</option>`)\r\n      })\r\n\r\n      // Trigger Select2 to refresh\r\n      $select.trigger('change.select2')\r\n\r\n    } catch (error) {\r\n      console.error('Error loading canonical names:', error)\r\n      alert(`\u274C \u7121\u6CD5\u8F09\u5165\u9078\u9805 (Failed to load options): ${error.message}`)\r\n    }\r\n  }\r\n\r\n  // Helper function to show alerts in Quick Add Alias Modal\r\n  function showQuickAliasAlert(message, type = 'info') {\r\n    const alertContainer = $('#quickAliasAlert')\r\n    const alertClass = type === 'success' ? 'alert-success' : type === 'danger' ? 'alert-danger' : 'alert-info'\r\n\r\n    alertContainer.html(`\r\n      <div class=\"alert ${alertClass} alert-dismissible fade show\" role=\"alert\">\r\n        ${message}\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\r\n      </div>\r\n    `).show()\r\n\r\n    // Auto-hide success messages after 5 seconds\r\n    if (type === 'success') {\r\n      setTimeout(() => {\r\n        alertContainer.find('.alert').alert('close')\r\n        alertContainer.hide()\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  // Save Quick Alias\r\n  $('#saveQuickAlias').on('click', async () => {\r\n    const aliasType = $('#quickAliasType').val()\r\n    const canonicalName = $('#quickCanonicalName').val().trim()\r\n    const aliasValue = $('#quickAliasValue').val().trim()\r\n    const note = $('#quickAliasNote').val().trim()\r\n\r\n    // Validation\r\n    if (!canonicalName || !aliasValue) {\r\n      showQuickAliasAlert('\u8ACB\u586B\u5BEB\u6A19\u6E96\u540D\u7A31\u548C\u5225\u540D (Canonical Name and Alias are required)', 'danger')\r\n      return\r\n    }\r\n\r\n    try {\r\n      // Disable button during request\r\n      $('#saveQuickAlias').prop('disabled', true).html('<span class=\"spinner-border spinner-border-sm me-2\"></span>Adding...')\r\n\r\n      const result = await apiRequest('POST', API_CONFIG.ENDPOINTS.aliasesQuickAdd, {\r\n        aliasType,\r\n        canonicalName,\r\n        aliasValue,\r\n        note: note || null\r\n      })\r\n\r\n      // Reload table if on aliases page\r\n      if (getProcess() === 'aliases') {\r\n        jsonTable.setData()\r\n      }\r\n\r\n      // Show success message\r\n      showQuickAliasAlert(`\u2705 \u5225\u540D\u65B0\u589E\u6210\u529F (Alias added successfully)<br><br><strong>\u985E\u578B:</strong> ${aliasType}<br><strong>\u6A19\u6E96\u540D\u7A31:</strong> ${canonicalName}<br><strong>\u5225\u540D:</strong> ${aliasValue}`, 'success')\r\n\r\n      // Clear form for next entry\r\n      $('#quickCanonicalName').val('').trigger('change')\r\n      $('#quickAliasValue').val('')\r\n      $('#quickAliasNote').val('')\r\n\r\n    } catch (error) {\r\n      console.error('Error adding alias:', error)\r\n      showQuickAliasAlert(`\u274C \u65B0\u589E\u5931\u6557 (Failed to add alias): ${error.message}`, 'danger')\r\n    } finally {\r\n      $('#saveQuickAlias').prop('disabled', false).html('<i class=\"bi bi-plus-circle\"></i> Add')\r\n    }\r\n  })\r\n\r\n  // Save Batch Aliases\r\n  $('#saveBatchAliases').on('click', async () => {\r\n    const aliasType = $('#batchAliasType').val()\r\n    const jsonText = $('#batchAliasJSON').val().trim()\r\n\r\n    // Validation\r\n    if (!jsonText) {\r\n      alert('\u8ACB\u8F38\u5165 JSON \u8CC7\u6599 (Please enter JSON data)')\r\n      return\r\n    }\r\n\r\n    let jsonData\r\n    try {\r\n      jsonData = JSON.parse(jsonText)\r\n    } catch (error) {\r\n      alert(`\u274C JSON \u683C\u5F0F\u932F\u8AA4 (Invalid JSON format):\\n${error.message}`)\r\n      return\r\n    }\r\n\r\n    // Validate JSON structure\r\n    if (typeof jsonData !== 'object' || jsonData === null) {\r\n      alert('\u274C JSON \u5FC5\u9808\u662F\u7269\u4EF6\u683C\u5F0F (JSON must be an object)\\n\\n\u6B63\u78BA\u683C\u5F0F\uFF1A{\"\u6A19\u6E96\u540D\u7A31\": [\"\u5225\u540D1\", \"\u5225\u540D2\"]}')\r\n      return\r\n    }\r\n\r\n    // Convert JSON object to aliases array\r\n    const aliases = []\r\n    for (const [canonicalName, aliasValues] of Object.entries(jsonData)) {\r\n      if (!Array.isArray(aliasValues)) {\r\n        alert(`\u274C \u932F\u8AA4\uFF1A\u300C${canonicalName}\u300D\u7684\u503C\u5FC5\u9808\u662F\u9663\u5217 (Value must be an array)\\n\\n\u6B63\u78BA\u683C\u5F0F\uFF1A{\"${canonicalName}\": [\"\u5225\u540D1\", \"\u5225\u540D2\"]}`)\r\n        return\r\n      }\r\n      for (const aliasValue of aliasValues) {\r\n        if (typeof aliasValue !== 'string' || !aliasValue.trim()) {\r\n          alert(`\u274C \u932F\u8AA4\uFF1A\u5225\u540D\u503C\u5FC5\u9808\u662F\u975E\u7A7A\u5B57\u4E32 (Alias value must be a non-empty string)`)\r\n          return\r\n        }\r\n        aliases.push({\r\n          aliasType,\r\n          canonicalName: canonicalName.trim(),\r\n          aliasValue: aliasValue.trim(),\r\n          note: null\r\n        })\r\n      }\r\n    }\r\n\r\n    if (aliases.length === 0) {\r\n      alert('\u6C92\u6709\u8981\u65B0\u589E\u7684\u5225\u540D (No aliases to add)')\r\n      return\r\n    }\r\n\r\n    try {\r\n      // Disable button during request\r\n      $('#saveBatchAliases').prop('disabled', true).html('<span class=\"spinner-border spinner-border-sm me-2\"></span>Uploading...')\r\n\r\n      const result = await apiRequest('POST', API_CONFIG.ENDPOINTS.aliasesBatch, { aliases })\r\n\r\n      // Validate response (apiRequest already unpacks result.data)\r\n      if (!result || typeof result.total === 'undefined') {\r\n        throw new Error('API \u8FD4\u56DE\u683C\u5F0F\u932F\u8AA4 (Invalid API response)')\r\n      }\r\n\r\n      // Close modal\r\n      bootstrap.Modal.getInstance('#modalBatchAddAliases').hide()\r\n\r\n      // Reload table if on aliases page\r\n      if (getProcess() === 'aliases') {\r\n        jsonTable.setData()\r\n      }\r\n\r\n      // Show success message\r\n      const summary = result\r\n      alert(`\u2705 \u6279\u6B21\u65B0\u589E\u5B8C\u6210 (Batch add completed)\\n\\n\u7E3D\u6578: ${summary.total}\\n\u6210\u529F\u65B0\u589E: ${summary.inserted}\\n\u5DF2\u5B58\u5728\uFF08\u66F4\u65B0\uFF09: ${summary.updated}${summary.errors ? `\\n\u932F\u8AA4: ${summary.errors.length}` : ''}`)\r\n\r\n    } catch (error) {\r\n      console.error('Error batch adding aliases:', error)\r\n      alert(`\u274C \u6279\u6B21\u65B0\u589E\u5931\u6557 (Batch add failed): ${error.message}`)\r\n    } finally {\r\n      $('#saveBatchAliases').prop('disabled', false).html('<i class=\"bi bi-upload\"></i> Upload')\r\n    }\r\n  })\r\n\r\n  // Setlist: Add Alias button click handler\r\n  $('#content').on('click', '.add-alias-btn', function() {\r\n    const streamID = $(this).data('streamid')\r\n    const trackNo = $(this).data('trackno')\r\n\r\n    // Find the row data from table\r\n    const rows = jsonTable.getData()\r\n    const rowData = rows.find(r => r.streamID === streamID && r.trackNo === trackNo)\r\n\r\n    if (!rowData) {\r\n      alert('\u7121\u6CD5\u627E\u5230\u8A72\u6B4C\u66F2\u8CC7\u6599 (Cannot find song data)')\r\n      return\r\n    }\r\n\r\n    // Determine alias type based on what's missing\r\n    // If both are present, default to title\r\n    let aliasType = 'title'\r\n    let canonicalName = ''\r\n    let aliasValue = ''\r\n\r\n    // Pre-fill canonical name with the parsed value from setlist\r\n    // User needs to manually input the correct canonical name from database\r\n    if (rowData.songName) {\r\n      aliasType = 'title'\r\n      canonicalName = '' // User should fill this with the correct song name from database\r\n      aliasValue = rowData.songName\r\n    } else if (rowData.artist) {\r\n      aliasType = 'artist'\r\n      canonicalName = '' // User should fill this with the correct artist name from database\r\n      aliasValue = rowData.artist\r\n    }\r\n\r\n    // Open modal with pre-filled values\r\n    $('#quickAliasType').val(aliasType)\r\n    $('#quickCanonicalName').val(canonicalName)\r\n    $('#quickAliasValue').val(aliasValue)\r\n    $('#quickAliasNote').val(`From setlist: ${rowData.streamID} track ${rowData.trackNo}`)\r\n\r\n    new bootstrap.Modal('#modalQuickAddAlias').show()\r\n\r\n    // Show instruction alert\r\n    setTimeout(() => {\r\n      alert(`\uD83D\uDCA1 \u4F7F\u7528\u8AAA\u660E (Instructions):\\n\\n1. \u8ACB\u5728\u300C\u6A19\u6E96\u540D\u7A31\u300D\u6B04\u4F4D\u586B\u5165\u8CC7\u6599\u5EAB\u4E2D\u6B63\u78BA\u7684\u6B4C\u540D/\u6B4C\u624B\u540D\u7A31\\n   (Enter the correct song/artist name from the database in \"Canonical Name\")\\n\\n2. \u300C\u5225\u540D\u300D\u6B04\u4F4D\u5DF2\u9810\u586B\u6B4C\u55AE\u4E2D\u7684\u540D\u7A31\\n   (The \"Alias\" field is pre-filled with the name from setlist)\\n\\n3. \u78BA\u8A8D\u7121\u8AA4\u5F8C\u9EDE\u64CA Add \u5373\u53EF\u65B0\u589E\u5225\u540D\\n   (Click Add to save the alias mapping)`)\r\n    }, 300)\r\n  })\r\n\r\n  // Run Test Alias\r\n  $('#runTestAlias').on('click', async () => {\r\n    const aliasType = $('#testAliasType').val()\r\n    const inputText = $('#testAliasInput').val().trim()\r\n\r\n    if (!inputText) {\r\n      alert('\u8ACB\u8F38\u5165\u6E2C\u8A66\u6587\u5B57 (Please enter input text)')\r\n      return\r\n    }\r\n\r\n    try {\r\n      // Disable button during request\r\n      $('#runTestAlias').prop('disabled', true).html('<span class=\"spinner-border spinner-border-sm me-2\"></span>Testing...')\r\n\r\n      const result = await apiRequest('POST', API_CONFIG.ENDPOINTS.aliasesTest, {\r\n        aliasType,\r\n        inputText\r\n      })\r\n\r\n      // Display results\r\n      const data = result.data\r\n      if (data.matches.length === 0) {\r\n        $('#testAliasResultsContent').html('<div class=\"alert alert-info\">\u6C92\u6709\u627E\u5230\u5339\u914D\u7684\u5225\u540D (No matches found)</div>')\r\n      } else {\r\n        let html = `<p class=\"mb-2\">\u627E\u5230 ${data.matchCount} \u500B\u5339\u914D (Found ${data.matchCount} matches):</p>`\r\n        html += '<div class=\"list-group\">'\r\n        for (const match of data.matches) {\r\n          html += `\r\n            <div class=\"list-group-item\">\r\n              <h6 class=\"mb-2\"><strong>${match.canonicalName}</strong></h6>\r\n              <div class=\"ms-3\">\r\n                ${match.aliases.map(a => `\r\n                  <div class=\"small\">\r\n                    \u2022 ${a.value}\r\n                    ${a.note ? `<span class=\"text-muted\">(${a.note})</span>` : ''}\r\n                  </div>\r\n                `).join('')}\r\n              </div>\r\n            </div>\r\n          `\r\n        }\r\n        html += '</div>'\r\n        $('#testAliasResultsContent').html(html)\r\n      }\r\n\r\n      $('#testAliasResults').show()\r\n\r\n    } catch (error) {\r\n      console.error('Error testing alias:', error)\r\n      alert(`\u274C \u6E2C\u8A66\u5931\u6557 (Test failed): ${error.message}`)\r\n    } finally {\r\n      $('#runTestAlias').prop('disabled', false).html('<i class=\"bi bi-search\"></i> Test')\r\n    }\r\n  })\r\n\r\n\r\n//--- json table ---\r\n\r\nfunction getProcess(){\r\n  //get what page the user in\r\n  let p = location.pathname.slice(1)\r\n  return (p.length==0? null:p)\r\n}\r\n\r\nfunction getYoutubeVideoId(url){\r\n  //trim the https://www.youtube.com/watch?v=abcdefg to abcdefg\r\n  // for 2023 the ID length is 11\r\n  \r\n  let ytPrefix = ['https://www.youtube.com/watch?v=','https://www.youtube.com/live/','https://youtu.be/','https://youtube.com/shorts/']\r\n  let idLength = 11\r\n  let prefix = ytPrefix.filter(e=>url.includes(e))\r\n  let id=''\r\n\r\n  if(url.length == idLength){\r\n    // assume input id\r\n    return url\r\n  }\r\n\r\n  if(prefix.length==0) {\r\n    $('#streamMsg').text('url not start from ' + ytPrefix[0] )\r\n    return\r\n  }\r\n\r\n  id = url.slice(prefix[0].length, prefix[0].length + idLength)\r\n  \r\n  //test id length\r\n  if (id.length < idLength){\r\n    $('#streamMsg').text('videoID length not ' + idLength )\r\n  }\r\n  else{\r\n    return id\r\n  }\r\n}\r\n\r\nfunction preCategory(t){\r\n  //when user add streamlist, pre-category\r\n  //Returns ALL matching categories (not just first match)\r\n  let origin = ['xfd', '\u30AA\u30EA\u30B8\u30CA\u30EB', 'music video']\r\n  let chat = ['chat', 'talk', '\u96D1\u8AC7']\r\n  let categories = []\r\n\r\n  if(t.includes('\u6B4C\u67A0')){\r\n    categories.push('\u6B4C\u67A0 / Singing')\r\n  }\r\n  if(t.toLowerCase().includes('gam')){\r\n    categories.push('\u30B2\u30FC\u30E0 / Gaming')\r\n  }\r\n  if(t.toLowerCase().includes('short')){\r\n    categories.push('\u30B7\u30E7\u30FC\u30C8 / Shorts')\r\n  }\r\n  if(t.toLowerCase().includes('\u6B4C\u3063\u3066\u307F\u305F')){\r\n    categories.push('\u6B4C\u3063\u3066\u307F\u305F\u52D5\u753B / Cover movie')\r\n  }\r\n  if(origin.some(e=>t.toLowerCase().includes(e))){\r\n    categories.push('\u30AA\u30EA\u30B8\u30CA\u30EB\u66F2 / Original Songs')\r\n  }\r\n  if(chat.some(e=>t.toLowerCase().includes(e))){\r\n    categories.push('\u96D1\u8AC7 / Chatting')\r\n  }\r\n\r\n  // If no categories matched, return 'other'\r\n  return categories.length > 0 ? categories : ['other']\r\n}\r\n\r\nasync function getLatest(){\r\n  try {\r\n    const [ytLatest, gitCommitMsg] = await Promise.all([getYTlatest(), getGitCommitMsg()])\r\n    return ytLatest + gitCommitMsg\r\n  }\r\n  catch (error) {\r\n    console.error('Error fetching data:', error)\r\n  }\r\n}\r\n\r\n//get berry latest public video\r\nfunction getYTlatest(){\r\n  return new Promise((resolve, reject)=>{\r\n    $.ajax({\r\n      url:'https://getytvideoinfo.katani.workers.dev/latest'\r\n    })\r\n    .done((d)=>{\r\n      let v = d.items[0].snippet\r\n      let html =`\r\n      <div id='YTlatest' class='card'>\r\n        <a href=\"https://www.youtube.com/watch?v=${v.resourceId.videoId}\" class=\"card-link\"><img src=\"${v.thumbnails.medium.url}\" class=\"card-img-top\"></a>\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Latest Public Video</h5>\r\n          <h6 class=\"card-subtitle mb-2 text-body-secondary\">publish @ ${dayjs(v.publishedAt).format('YYYY/MM/DD HH:mmZ')}</h6>\r\n          <a href=\"https://www.youtube.com/watch?v=${v.resourceId.videoId}\" class=\"card-link\">${v.title}</a>\r\n        </div>\r\n      </div>\r\n      `\r\n      resolve(html)\r\n    })\r\n    .fail((err)=>{reject(err)});\r\n  })\r\n}\r\n\r\n  //--- Batch Editor Event Handlers ---\r\n  $('#generateBatchTable').on('click', function() {\r\n    const startTrack = parseInt($('#batchStartTrack').val()) || 1\r\n    const totalSongs = parseInt($('#batchTotalSongs').val()) || 20\r\n    const segment = parseInt($('#batchSegment').val()) || 1\r\n\r\n    // Generate empty rows (segment is shared for all, not per-row)\r\n    const rows = []\r\n    for (let i = 0; i < totalSongs; i++) {\r\n      rows.push({\r\n        trackNo: startTrack + i,\r\n        songID: null,\r\n        songDisplay: '',\r\n        note: ''\r\n      })\r\n    }\r\n\r\n    // Destroy previous table if exists\r\n    if (batchTable) {\r\n      batchTable.destroy()\r\n    }\r\n\r\n    // Create batch edit table with Movable Rows\r\n    batchTable = new Tabulator(\"#batchTableContainer\", {\r\n      data: rows,\r\n      layout: \"fitColumns\",\r\n      movableRows: true,\r\n      columns: [\r\n        {title: \"Track\", field: \"trackNo\", width: 80, editor: false},\r\n        {\r\n          title: \"Song (\u6B4C\u540D - \u6B4C\u624B)\",\r\n          field: \"songID\",\r\n          editor: batchSongSelect2Editor,\r\n          formatter: songDisplayFormatter,\r\n          headerSort: false,\r\n          widthGrow: 3\r\n        },\r\n        {\r\n          title: \"Note\",\r\n          field: \"note\",\r\n          editor: \"input\",\r\n          headerSort: false,\r\n          widthGrow: 2\r\n        }\r\n      ]\r\n    })\r\n\r\n    // Update track numbers on row move\r\n    batchTable.on(\"rowMoved\", recalculateTrackNumbers)\r\n\r\n    // Update track numbers when start track changes\r\n    $('#batchStartTrack').off('change').on('change', function() {\r\n      if (batchTable) {\r\n        recalculateTrackNumbers()\r\n      }\r\n    })\r\n  })\r\n\r\n  function recalculateTrackNumbers() {\r\n    const startTrack = parseInt($('#batchStartTrack').val()) || 1\r\n    const rows = batchTable.getRows()\r\n\r\n    rows.forEach((row, index) => {\r\n      row.update({ trackNo: startTrack + index })\r\n    })\r\n  }\r\n\r\n  $('#saveBatchSetlist').on('click', async function() {\r\n    if (!batchTable || !batchStreamData) {\r\n      alert('\u8868\u683C\u672A\u5EFA\u7ACB\u6216\u8CC7\u6599\u907A\u5931')\r\n      return\r\n    }\r\n\r\n    const rows = batchTable.getData()\r\n    const segment = parseInt($('#batchSegment').val()) || 1\r\n\r\n    // Validate: check for empty songID\r\n    const errors = []\r\n    rows.forEach((row, index) => {\r\n      if (!row.songID) {\r\n        errors.push(`\u7B2C ${index + 1} \u884C\uFF1A\u6B4C\u66F2\u672A\u9078\u64C7`)\r\n      }\r\n    })\r\n\r\n    if (errors.length > 0) {\r\n      alert('\u8ACB\u4FEE\u6B63\u4EE5\u4E0B\u932F\u8AA4\uFF1A\\n' + errors.join('\\n'))\r\n      return\r\n    }\r\n\r\n    // Disable button and show loading state\r\n    const $saveBtn = $(this)\r\n    const originalText = $saveBtn.html()\r\n    $saveBtn.prop('disabled', true).html('\u23F3 \u5132\u5B58\u4E2D...')\r\n\r\n    try {\r\n      // Prepare batch data (songID already stored in rows)\r\n      const batchData = rows.map(row => ({\r\n        streamID: batchStreamData.streamID,\r\n        trackNo: row.trackNo,\r\n        segmentNo: segment,\r\n        songID: row.songID,\r\n        note: row.note || null\r\n      }))\r\n\r\n      // Send batch POST request with user source header (to enable overwrite mode)\r\n      const result = await apiRequest('POST', API_CONFIG.ENDPOINTS.setlist, batchData, {\r\n        headers: { 'X-Source': 'user' }\r\n      })\r\n\r\n      alert(`\u6210\u529F\u5132\u5B58 ${rows.length} \u7B46\u6B4C\u55AE\u8CC7\u6599\uFF01`)\r\n      batchEditModal.hide()\r\n\r\n      // Reload setlist table if on setlist page\r\n      if (getProcess() === 'setlist') {\r\n        jsonTable.setData(API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.setlist)\r\n      }\r\n    } catch (error) {\r\n      console.error('Batch save failed:', error)\r\n      alert('\u5132\u5B58\u5931\u6557\uFF1A' + error.message)\r\n    } finally {\r\n      // Re-enable button and restore text\r\n      $saveBtn.prop('disabled', false).html(originalText)\r\n    }\r\n  })\r\n\r\n  //--- Quick Add Event Handlers ---\r\n  $('#quickStartBtn').on('click', async function() {\r\n    // \u6E05\u7A7A\u4E26\u96B1\u85CF\u932F\u8AA4\u8A0A\u606F\r\n    $('#quickAddErrorMsg').html('')\r\n    $('#quickAddError').hide()\r\n\r\n    const startTrack = parseInt($('#quickStartTrack').val())\r\n    if (!startTrack || startTrack < 1) {\r\n      $('#quickAddErrorMsg').html('\u8ACB\u586B\u5BEB\u8D77\u59CB Track \u7DE8\u865F<br><small>Track \u7DE8\u865F\u5FC5\u9808\u70BA\u5927\u65BC 0 \u7684\u6574\u6578</small>')\r\n      $('#quickAddError').show()\r\n      $('#quickAddError')[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n      $('#quickStartTrack').focus()\r\n      return\r\n    }\r\n\r\n    quickCurrentTrack = startTrack\r\n    $('#quickNextTrack').text(quickCurrentTrack)\r\n\r\n    // \u986F\u793A\u8F09\u5165\u72C0\u614B\r\n    const $btn = $(this)\r\n    const originalText = $btn.html()\r\n    $btn.prop('disabled', true).html('\u23F3 \u8F09\u5165\u4E2D...')\r\n\r\n    // Initialize Select2 for song selection\r\n    try {\r\n      const songlist = await apiRequest('GET', API_CONFIG.ENDPOINTS.songlist)\r\n      const songOptions = songlist.map(s => ({\r\n        id: s.songID,\r\n        text: `${s.songName} - ${s.artist}`\r\n      })).sort((a, b) => a.text.localeCompare(b.text))\r\n\r\n      $('#quickSongSelect').select2({\r\n        data: songOptions,\r\n        width: '100%',\r\n        dropdownParent: $('#modalQuickAdd'),\r\n        placeholder: '\u641C\u5C0B\u6B4C\u66F2...',\r\n        allowClear: true\r\n      })\r\n\r\n      quickSongSelect2 = $('#quickSongSelect').data('select2')\r\n\r\n      // \u6062\u5FA9\u6309\u9215\u72C0\u614B\r\n      $btn.prop('disabled', false).html(originalText)\r\n    } catch (error) {\r\n      console.error('Failed to load songlist:', error)\r\n\r\n      // \u6062\u5FA9\u6309\u9215\u72C0\u614B\r\n      $btn.prop('disabled', false).html(originalText)\r\n\r\n      // \u8655\u7406\u7279\u5B9A\u932F\u8AA4\u4E26\u986F\u793A\u5728 Modal \u5167\r\n      const errorMsg = error.message || String(error)\r\n      let errorDetail = ''\r\n\r\n      if (errorMsg.includes('timeout') || errorMsg.includes('NetworkError') || errorMsg.includes('Failed to fetch')) {\r\n        errorDetail = `\u7121\u6CD5\u9023\u7DDA\u5230 Hyperdrive \u670D\u52D9<br><small>\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u6216\u78BA\u8A8D Hyperdrive \u670D\u52D9\u662F\u5426\u555F\u52D5\uFF08<code>http://localhost:8785</code>\uFF09</small>`\r\n      } else if (errorMsg.includes('400') || errorMsg.includes('VALIDATION')) {\r\n        errorDetail = `\u8CC7\u6599\u683C\u5F0F\u932F\u8AA4<br><small>\u8ACB\u6AA2\u67E5 StreamID \u662F\u5426\u6709\u6548</small>`\r\n      } else {\r\n        errorDetail = `${errorMsg}<br><small>\u8ACB\u806F\u7E6B\u7BA1\u7406\u54E1\u6216\u7A0D\u5F8C\u518D\u8A66</small>`\r\n      }\r\n\r\n      // \u5728 Modal \u5167\u986F\u793A\u932F\u8AA4\u8A0A\u606F\r\n      $('#quickAddErrorMsg').html(errorDetail)\r\n      $('#quickAddError').show()\r\n\r\n      // \u81EA\u52D5\u6372\u52D5\u5230\u932F\u8AA4\u8A0A\u606F\r\n      $('#quickAddError')[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n\r\n      return\r\n    }\r\n\r\n    // Switch UI\r\n    $('#quickStartSection').hide()\r\n    $('#quickAddFormSection').show()\r\n\r\n    // Focus on song select\r\n    setTimeout(() => $('#quickSongSelect').select2('open'), 100)\r\n  })\r\n\r\n  $('#quickAddSongBtn').on('click', quickAddSong)\r\n\r\n  // Enter key to add song\r\n  $('#quickNote').on('keypress', function(e) {\r\n    if (e.which === 13) {\r\n      e.preventDefault()\r\n      quickAddSong()\r\n    }\r\n  })\r\n\r\n  // Esc key handling for Quick Add modal is disabled\r\n  // Reason: Conflicts with HTML setting data-bs-keyboard=\"false\"\r\n  // The modal should NOT close on Esc to prevent accidental data loss during continuous adding\r\n  // User must explicitly click X button to close\r\n  // TODO: Remove this commented code after confirming no side effects (tested 2025-10-26)\r\n  /*\r\n  $(document).on('keydown', function(e) {\r\n    if (e.key === 'Escape' && quickAddModal._isShown) {\r\n      quickAddModal.hide()\r\n    }\r\n  })\r\n  */\r\n\r\n  async function quickAddSong() {\r\n    // \u6E05\u7A7A\u4E26\u96B1\u85CF\u932F\u8AA4\u8A0A\u606F\r\n    $('#quickAddErrorMsg').html('')\r\n    $('#quickAddError').hide()\r\n\r\n    const songID = $('#quickSongSelect').val()\r\n    const note = $('#quickNote').val()\r\n    const segment = parseInt($('#quickSegment').val()) || 1\r\n\r\n    if (!songID) {\r\n      $('#quickAddErrorMsg').html('\u8ACB\u9078\u64C7\u6B4C\u66F2<br><small>\u5F9E\u4E0B\u62C9\u9078\u55AE\u9078\u64C7\u6B4C\u66F2\uFF0C\u6216\u9EDE\u64CA\u300C\u65B0\u589E\u521D\u56DE\u6B4C\u66F2\u300D\u6309\u9215</small>')\r\n      $('#quickAddError').show()\r\n      $('#quickAddError')[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n      setTimeout(() => $('#quickSongSelect').select2('open'), 300)\r\n      return\r\n    }\r\n\r\n    try {\r\n      // POST to API immediately with user source header\r\n      await apiRequest('POST', API_CONFIG.ENDPOINTS.setlist, {\r\n        streamID: quickStreamData.streamID,\r\n        trackNo: quickCurrentTrack,\r\n        segmentNo: segment,\r\n        songID: parseInt(songID),\r\n        note: note || null\r\n      }, {\r\n        headers: { 'X-Source': 'user' }\r\n      })\r\n\r\n      // Get song name for display\r\n      const selectedData = $('#quickSongSelect').select2('data')[0]\r\n      const songDisplay = selectedData ? selectedData.text : `Song ID: ${songID}`\r\n\r\n      // Add to list\r\n      const listItem = $(`\r\n        <div class=\"border-bottom pb-1 mb-1\">\r\n          <small>\r\n            <strong>Track ${quickCurrentTrack}:</strong> ${songDisplay}\r\n            ${note ? `<span class=\"text-muted\">(${note})</span>` : ''}\r\n          </small>\r\n        </div>\r\n      `)\r\n\r\n      if ($('#quickAddedList').find('.text-muted').length > 0) {\r\n        $('#quickAddedList').empty()\r\n      }\r\n      $('#quickAddedList').append(listItem)\r\n\r\n      // Auto-scroll to bottom\r\n      $('#quickAddedList').scrollTop($('#quickAddedList')[0].scrollHeight)\r\n\r\n      // Increment track\r\n      quickCurrentTrack++\r\n      $('#quickNextTrack').text(quickCurrentTrack)\r\n\r\n      // Clear form\r\n      $('#quickSongSelect').val('').trigger('change')\r\n      $('#quickNote').val('')\r\n\r\n      // Focus back to song select\r\n      setTimeout(() => $('#quickSongSelect').select2('open'), 100)\r\n\r\n      console.log(`Quick added: Track ${quickCurrentTrack - 1}`)\r\n\r\n    } catch (error) {\r\n      console.error('Quick add failed:', error)\r\n\r\n      // \u8655\u7406\u7279\u5B9A\u932F\u8AA4\u4E26\u986F\u793A\u5728 Modal \u5167\r\n      const errorMsg = error.message || String(error)\r\n      let errorDetail = ''\r\n\r\n      if (errorMsg.includes('already exists') || errorMsg.includes('Conflict')) {\r\n        errorDetail = `\u6B64\u6B4C\u66F2\u5DF2\u5B58\u5728\u65BC\u6B64 Track<br><small>Track <strong>${quickCurrentTrack}</strong> \u5DF2\u6709\u6B4C\u66F2\uFF0C\u7CFB\u7D71\u5DF2\u57F7\u884C\u66F4\u65B0</small>`\r\n      } else if (errorMsg.includes('timeout') || errorMsg.includes('NetworkError') || errorMsg.includes('Failed to fetch')) {\r\n        errorDetail = `\u7121\u6CD5\u9023\u7DDA\u5230 Hyperdrive \u670D\u52D9<br><small>\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u6216\u78BA\u8A8D Hyperdrive \u670D\u52D9\u662F\u5426\u555F\u52D5\uFF08<code>http://localhost:8785</code>\uFF09</small>`\r\n      } else if (errorMsg.includes('400') || errorMsg.includes('VALIDATION') || errorMsg.includes('Required fields missing')) {\r\n        errorDetail = `\u8CC7\u6599\u683C\u5F0F\u932F\u8AA4<br><small>\u8ACB\u78BA\u8A8D\u6240\u6709\u5FC5\u586B\u6B04\u4F4D\u5DF2\u586B\u5BEB\uFF08StreamID, Track, Segment, SongID\uFF09</small>`\r\n      } else if (errorMsg.includes('Foreign key constraint')) {\r\n        errorDetail = `\u8CC7\u6599\u5EAB\u932F\u8AA4<br><small>StreamID \u6216 SongID \u4E0D\u5B58\u5728\u65BC\u8CC7\u6599\u5EAB\u4E2D</small>`\r\n      } else {\r\n        errorDetail = `${errorMsg}<br><small>\u8ACB\u806F\u7E6B\u7BA1\u7406\u54E1\u6216\u7A0D\u5F8C\u518D\u8A66</small>`\r\n      }\r\n\r\n      // \u5728 Modal \u5167\u986F\u793A\u932F\u8AA4\u8A0A\u606F\r\n      $('#quickAddErrorMsg').html(errorDetail)\r\n      $('#quickAddError').show()\r\n\r\n      // \u81EA\u52D5\u6372\u52D5\u5230\u932F\u8AA4\u8A0A\u606F\r\n      $('#quickAddError')[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n    }\r\n  }\r\n\r\n  // Add new song button in batch editor\r\n  $('#batchAddNewSong').on('click', function() {\r\n    // Close batch editor temporarily\r\n    batchEditModal.hide()\r\n\r\n    // Reset and prepare add song modal\r\n    $('#modalAddSong form')[0].reset()\r\n    if ($('#artistName').hasClass('select2-hidden-accessible')) {\r\n      $('#artistName').select2('destroy')\r\n    }\r\n    initializeArtistSelect()\r\n\r\n    // Open add song modal\r\n    const addSongModal = new bootstrap.Modal(document.getElementById('modalAddSong'))\r\n    addSongModal.show()\r\n\r\n    // When song is added, reload batch editor\r\n    $('#modalAddSong').one('hidden.bs.modal', function() {\r\n      // Reopen batch editor\r\n      batchEditModal.show()\r\n\r\n      // Refresh the table to get new songlist data\r\n      if (batchTable) {\r\n        // Trigger a refresh - user can re-generate table if needed\r\n        console.log('Song added, regenerate table to see new song')\r\n      }\r\n    })\r\n  })\r\n\r\n  // Add new song button in quick add\r\n  $('#quickAddNewSong').on('click', function() {\r\n    // Close quick add temporarily\r\n    quickAddModal.hide()\r\n\r\n    // Reset and prepare add song modal\r\n    $('#modalAddSong form')[0].reset()\r\n    if ($('#artistName').hasClass('select2-hidden-accessible')) {\r\n      $('#artistName').select2('destroy')\r\n    }\r\n    initializeArtistSelect()\r\n\r\n    // Open add song modal\r\n    const addSongModal = new bootstrap.Modal(document.getElementById('modalAddSong'))\r\n    addSongModal.show()\r\n\r\n    // When song is added, reload quick add and refresh Select2\r\n    $('#modalAddSong').one('hidden.bs.modal', async function() {\r\n      // Reopen quick add\r\n      quickAddModal.show()\r\n\r\n      // Reload Select2 options with new song\r\n      try {\r\n        const songlist = await apiRequest('GET', API_CONFIG.ENDPOINTS.songlist)\r\n        const songOptions = songlist.map(s => ({\r\n          id: s.songID,\r\n          text: `${s.songName} - ${s.artist}`\r\n        })).sort((a, b) => a.text.localeCompare(b.text))\r\n\r\n        // Clear and reload Select2\r\n        $('#quickSongSelect').empty().select2('destroy')\r\n        $('#quickSongSelect').select2({\r\n          data: songOptions,\r\n          width: '100%',\r\n          dropdownParent: $('#modalQuickAdd'),\r\n          placeholder: '\u641C\u5C0B\u6B4C\u66F2...',\r\n          allowClear: true\r\n        })\r\n\r\n        // Auto-select the newly added song (last one in the list)\r\n        const lastSong = songlist[songlist.length - 1]\r\n        if (lastSong) {\r\n          $('#quickSongSelect').val(lastSong.songID).trigger('change')\r\n          console.log(`Auto-selected newly added song: ${lastSong.songName}`)\r\n        }\r\n\r\n        // Focus on song select\r\n        setTimeout(() => $('#quickSongSelect').select2('open'), 100)\r\n\r\n      } catch (error) {\r\n        console.error('Failed to reload songlist:', error)\r\n        alert('\u91CD\u65B0\u8F09\u5165\u6B4C\u66F2\u6E05\u55AE\u5931\u6557')\r\n      }\r\n    })\r\n  })\r\n\r\n  // Add new song button in setlist table (use event delegation for dynamic element)\r\n  $('#content').on('click', '#addNewSongInSetlist', function() {\r\n    // Reset and prepare add song modal\r\n    $('#modalAddSong form')[0].reset()\r\n    if ($('#artistName').hasClass('select2-hidden-accessible')) {\r\n      $('#artistName').select2('destroy')\r\n    }\r\n    initializeArtistSelect()\r\n\r\n    // Show modal\r\n    const addSongModal = new bootstrap.Modal($('#modalAddSong')[0])\r\n    addSongModal.show()\r\n\r\n    // Handle modal close - reload setlist to get updated songlist\r\n    $('#modalAddSong').one('hidden.bs.modal', function() {\r\n      // Check if we're still on setlist page\r\n      if (getProcess() === 'setlist') {\r\n        console.log('Song may have been added, reloading setlist table')\r\n        // Reload table to refresh songlist data in Select2\r\n        jsonTable.setData(API_CONFIG.BASE_URL + API_CONFIG.ENDPOINTS.setlist)\r\n      }\r\n    })\r\n  })\r\n\r\n//get github latest commit\r\nfunction getGitCommitMsg(){\r\n  return new Promise((resolve, reject)=>{\r\n    $.ajax({\r\n      url:'https://api.github.com/repos/maisakiberryfan/website/commits?per_page=1',\r\n    })\r\n    .done((d)=>{\r\n      let html = `\r\n      <div class=\"container mt-3\">\r\n        <p>Last update\uFF1A${dayjs(d[0].commit.committer.date).format('YYYY/MM/DD HH:mmZ')}</p>\r\n        <p>Update content\uFF1A${marked.parse(d[0].commit.message)}</p>\r\n      </div>\r\n      `\r\n      resolve(html)\r\n    })\r\n    .fail((err)=>{reject(err)});\r\n  })  \r\n}\r\n\r\n})//end ready\r\n", "export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption,  convert){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption,  convert);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}", "export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic retrieveNestedData(separator, field, data){\n\t\tvar structure = separator ? field.split(separator) : [field],\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdata = data[structure[i]];\n\n\t\t\toutput = data;\n\n\t\t\tif(!data){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}\n", "import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else{\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tlet offsetHeight = Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0);\n\t\tif((y + this.element.offsetHeight) > offsetHeight) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.element.style.height = offsetHeight + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}\n", "import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nexport default class Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else{\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}", "export default {\r\n\trownum:function(value, data, type, params, column, row){\r\n\t\treturn row.getPosition();\r\n\t}\r\n};", "import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultAccessors from './defaults/accessors.js';\n\nexport default class Accessor extends Module{\n\t\n\tstatic moduleName = \"accessor\";\n\n\t//load defaults\n\tstatic accessors = defaultAccessors;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}", "export default {\n\tmethod: \"GET\",\n};", "function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}", "export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}", "function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};", "import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nexport default class Ajax extends Module{\n\n\tstatic moduleName = \"ajax\";\n\n\t//load defaults\n\tstatic defaultConfig = defaultConfig;\n\tstatic defaultURLGenerator = defaultURLGenerator;\n\tstatic defaultLoaderPromise = defaultLoaderPromise;\n\tstatic contentTypeFormatters = defaultContentTypeFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(Object.assign({}, ajaxParams), params);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}", "export default {\n\treplace:function(data){\n\t\treturn this.table.setData(data);\n\t},\n\tupdate:function(data){\n\t\treturn this.table.updateOrAddData(data);\n\t},\n\tinsert:function(data){\n\t\treturn this.table.addData(data);\n\t},\n};", "export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\t\t\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\t\t\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\t\t\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\t\t\t\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\t\t\t\t\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\t\t\t\t\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\trows.push(row);\n\t\t\t});\n\t\t\t\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t},\n};", "export default {\r\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 67\"],\r\n};\r\n", "export default {\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n", "import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};", "import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class Clipboard extends Module{\n\n\tstatic moduleName = \"clipboard\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic pasteActions = defaultPasteActions;\n\tstatic pasteParsers = defaultPasteParsers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\t\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPasteOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPasteOrigin(e){\n\t\tvar valid = true;\n\t\tvar blocked = this.confirm(\"clipboard-paste\", [e]);\n\n\t\tif(blocked || ![\"DIV\", \"SPAN\"].includes(e.target.tagName)){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}", "export default class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}", "//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\n\t\tif(this.column.isRowHeader){\n\t\t\tthis.element.classList.add(\"tabulator-row-header\");\n\t\t}\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else{\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n", "//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.getParentComponent();\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}", "export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};", "import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nexport default class Column extends CoreFeature{\n\t\n\tstatic defaultOptionList = defaultOptions;\n\t\n\tconstructor(def, parent, rowHeader){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.isGroup = false;\n\t\tthis.isRowHeader = rowHeader;\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\t\t\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\t\t\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\t\t\n\t\tthis.mapDefinitions();\n\t\t\n\t\tthis.setField(this.definition.field);\n\t\t\n\t\tthis.modules = {}; //hold module variables;\n\t\t\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\t\t\n\t\tthis.visible = true; //default visible state\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\t\t\t\n\t\t\tthis.isGroup = true;\n\t\t\t\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\t\t\t\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\t\t\n\t\tthis._initialize();\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tif(this.isRowHeader){\n\t\t\tel.classList.add(\"tabulator-row-header\");\n\t\t}\n\t\t\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\t\t\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\t\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\t\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\t\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\t\t\t\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\t\t\n\t\tthis.element.appendChild(this.contentElement);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\t\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\t\t\n\t\tthis.dispatch(\"column-layout\", this);\n\t\t\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\t\t\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\t\t\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\t\t\n\t\tthis.reinitializeWidth();\n\t\t\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\t\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\t\t\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\t\t\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\t\t\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\t\t\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\t\t\n\t\treturn contentElement;\n\t}\n\t\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\t\t\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\t\t\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\t\t\t\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn titleHolderElement;\n\t}\n\t\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\t\t\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\t\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\t\t\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t\t\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\t\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\t\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t\n\t\t\toutput = dataObj;\n\t\t\t\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\t\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\t\t\t\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\t\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\t\t\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\t\t\n\t\tthis.element.style.height = parentHeight + \"px\";\n\t\t\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\t\t\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\t\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\t\t\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\t\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\t\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\t\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\t\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\t\t\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else{\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\t\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\t\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\t\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\t\t\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\t\t\t\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\t\t\n\t\treturn this.definition;\n\t}\n\t\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\t\t\t\n\t\t\tthis.element.style.display = \"\";\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\t\t\t\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tthis.element.style.display = \"none\";\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\t\t\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\t\t\tif (this.table.initialized) {\n\t\t\t\tthis.element.style.width = childWidth + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\t\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\t\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\t\t\n\t\twidth = Math.max(this.minWidth, width);\n\t\t\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\t\t\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.width = this.widthStyled;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width\", this);\n\t\t\n\t\tif(this.subscribedExternal(\"columnWidth\")){\n\t\t\tthis.dispatchExternal(\"columnWidth\", this.getComponent());\n\t\t}\n\t}\n\t\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n\t\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\t\t\n\t\treturn offset;\n\t}\n\t\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\t\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\t\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\t\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"column-delete\", this);\n\t\t\t\n\t\t\tvar cellCount = this.cells.length;\n\t\t\t\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\t\t\t\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tthis.dispatch(\"column-deleted\", this);\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\t\t\n\t\tthis.cells.push(cell);\n\t\t\n\t\treturn cell;\n\t}\n\t\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\t\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\t\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\t\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\t\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\t\t\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\t\t\n\t\tthis.fitToData(force);\n\t\t\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\t\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\t\t\t\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar maxWidth = this.element.offsetWidth;\n\t\t\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\t\n\t\t\t\tif(force){\n\t\t\t\t\tthis.setWidth(setTo);\n\t\t\t\t}else{\n\t\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tupdateDefinition(updates){\n\t\tvar definition;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\t\t\t\t\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\t\t\t\t\t\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\t\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n\t\n\tgetPosition(){\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;\n\t}\n\t\n\tgetParentComponent(){\n\t\treturn this.parent instanceof Column ? this.parent.getComponent() : false;\n\t}\n}", "//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0, minHeight  = 0;\n\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.calcMinHeight();\n\t\t\tmaxHeight = this.calcMaxHeight();\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\n\tcalcMinHeight(){\n\t\treturn this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t}\n\n\tcalcMaxHeight(){\n\t\tvar maxHeight = 0;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tvar height = cell.getHeight();\n\n\t\t\tif(height > maxHeight){\n\t\t\t\tmaxHeight = height;\n\t\t\t}\n\t\t});\n\n\t\treturn maxHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\n\t\t\tif(this.subscribedExternal(\"rowHeight\")){\n\t\t\t\tthis.dispatchExternal(\"rowHeight\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n", "export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};", "import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nexport default class ColumnCalcs extends Module{\n\n\tstatic moduleName = \"columnCalcs\";\n\n\t//load defaults\n\tstatic calculations = defaultCalculations;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tif(!this.topInitialized){\n\n\t\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\t\tfragment.appendChild(this.topElement);\n\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [],\n\t\thasDataTreeColumnCalcs = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs,\n\t\tdataTree = this.table.modules.dataTree;\n\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif(hasDataTreeColumnCalcs && row.modules.dataTree?.open){\n\t\t\t\tthis.rowsToData(dataTree.getFilteredTreeChildren(row)).forEach(dataRow =>{\n\t\t\t\t\tdata.push(row);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.lookupFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.lookupFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}", "import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nimport RowComponent from '../../core/row/RowComponent.js';\n\nexport default class DataTree extends Module{\n\n\tstatic moduleName = \"dataTree\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row, false, true);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren, sortOnly){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children, sortOnly);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child, false, true);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDeleting(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config && config.children && Array.isArray(config.children)){\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\tchildRow.wipe();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\tthis.getTreeChildren(childRow, component, recurse).forEach(child => {\n\t\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}", "export default function(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n", "export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}", "export default function(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\",\n\tjspdfLib, doc;\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tjspdfLib = this.dependencyRegistry.lookup(\"jspdf\", \"jsPDF\");\n\tdoc = new jspdfLib(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n", "import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tXLSXLib = this.dependencyRegistry.lookup(\"XLSX\"),\n\tworkbook = XLSXLib.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSXLib.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSXLib.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSXLib.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n", "export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}", "export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}", "import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};", "import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nexport default class Download extends Module{\n\n\tstatic moduleName = \"download\";\n\n\t//load defaults\n\tstatic downloaders = defaultDownloaders;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}", "export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}", "import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}", "import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}", "import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}", "//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}", "//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n", "//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"HH:mm\");\n\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n", "//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\")) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"HH:mm\");\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n", "import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\t// if(this.params.listItemFormatter){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.sortValuesList){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchFunc){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchingPlaceholder){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else{\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else{\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else{\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else{\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else{\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else{\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else{\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else{\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(!this._emptyValueCheck(val)){\n\t\t\t\t\tif(this.params.multiselect && Array.isArray(val)){\n\t\t\t\t\t\tval.forEach((item) => {\n\t\t\t\t\t\t\tif(!this._emptyValueCheck(item)){\n\t\t\t\t\t\t\t\toutput[item] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\n\t_emptyValueCheck(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\";\n\t}\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else{\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else{\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else{\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else{\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else{\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else{\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else{\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else{\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else{\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else{\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n", "import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}", "//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}", "//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}", "//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}", "export default function(cell, onRendered, success, cancel, params){\r\n\tvar column = cell._getSelf().column,\r\n\tlookup, editorFunc, editorParams;\r\n    \r\n\tfunction defaultLookup(cell){\r\n\t\tvar value = cell.getValue(),\r\n\t\teditor = \"input\";\r\n        \r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"number\":\r\n\t\t\t\teditor = \"number\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"boolean\":\r\n\t\t\t\teditor = \"tickCross\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(value.includes(\"\\n\")){\r\n\t\t\t\t\teditor = \"textarea\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n        \r\n\t\treturn editor;\r\n\t}\r\n    \r\n\tlookup = params.editorLookup ? params.editorLookup(cell) : defaultLookup(cell);\r\n\r\n\tif(params.paramsLookup){\r\n\t\teditorParams = typeof params.paramsLookup === \"function\" ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup];\r\n\t}\r\n\r\n\teditorFunc = this.table.modules.edit.lookupEditor(lookup, column);\r\n    \r\n\treturn  editorFunc.call(this, cell, onRendered, success, cancel, editorParams || {});\r\n}", "import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport date from './editors/date.js';\nimport time from './editors/time.js';\nimport datetime from './editors/datetime.js';\nimport list from './editors/list.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\nimport adaptable from './editors/adaptable.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tlist:list,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n\tadaptable:adaptable,\n};", "import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nexport default class Edit extends Module{\n\n\tstatic moduleName = \"edit\";\n\n\t//load defaults\n\tstatic editors = defaultEditors;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\tthis.convertEmptyValues = false;\n\t\t\n\t\tthis.editors = Edit.editors;\n\t\n\t\tthis.registerTableOption(\"editTriggerEvent\", \"focus\");\n\t\tthis.registerTableOption(\"editorEmptyValue\");\n\t\tthis.registerTableOption(\"editorEmptyValueFunc\", this.emptyValueCheck.bind(this));\n\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\tthis.registerColumnOption(\"editorEmptyValue\");\n\t\tthis.registerColumnOption(\"editorEmptyValueFunc\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\tthis.subscribe(\"clipboard-paste\", this.pasteBlocker.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\t\n\t\t// this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\t// this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\n\t\tif(Object.keys(this.table.options).includes(\"editorEmptyValue\")){\n\t\t\tthis.convertEmptyValues = true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Paste Negation //////////\n\t///////////////////////////////////\n\t\n\tpasteBlocker(e){\n\t\tif(this.currentCell){\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(!this.invalidEdit){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar convertEmpty = Object.keys(column.definition).includes(\"editorEmptyValue\");\n\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {},\n\t\t\tconvertEmptyValues:convertEmpty,\n\t\t\teditorEmptyValue:column.definition.editorEmptyValue,\n\t\t\teditorEmptyValueFunc:column.definition.editorEmptyValueFunc,\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tconfig.editor = this.lookupEditor(column.definition.editor, column);\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\n\tlookupEditor(editor, column){\n\t\tvar editorFunc;\n\n\t\tswitch(typeof editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[editor]){\n\t\t\t\t\teditorFunc = this.editors[editor];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\teditorFunc = editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditorFunc = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditorFunc = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn editorFunc;\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(this.options(\"editTriggerEvent\") === \"dblclick\"){\n\t\t\t\telement.addEventListener(\"dblclick\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\" || this.options(\"editTriggerEvent\") === \"click\"){\n\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\"){\n\t\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\t\t\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\teditFinished = false,\n\t\tcellEditor, component, params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\t\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\n\t\t\t\t\teditFinished = true;\n\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = self.transformEmptyValues(value, cell);\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\teditFinished = true;\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\teditFinished = false;\n\t\t\t\t\t}, 10);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\t// editFinished = true;\n\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\tthis.blur(element);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.blur(element);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\tthis.blur(element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\tthis.blur(element);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\temptyValueCheck(value){\n\t\treturn value === \"\" || value === null || typeof value === \"undefined\";\n\t}\n\n\ttransformEmptyValues(value, cell){\n\t\tvar mod = cell.column.modules.edit, \n\t\tconvert = mod.convertEmptyValues || this.convertEmptyValues,\n\t\tcheckFunc;\n\t\t\n\t\tif(convert){\n\t\t\tcheckFunc = mod.editorEmptyValueFunc || this.options(\"editorEmptyValueFunc\");\n\n\t\t\tif(checkFunc && checkFunc(value)){\n\t\t\t\tvalue = mod.convertEmptyValues ? mod.editorEmptyValue : this.options(\"editorEmptyValue\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn value;\n\t}\n\t\n\tblur(element){\n\t\tif(!this.confirm(\"edit-blur\", [element]) ){\n\t\t\telement.blur();\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}", "export default class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}", "export default class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}", "export default {\r\n\r\n};", "export default {\r\n\tvisible:function(){\r\n\t\treturn this.rowManager.getVisibleRows(false, true);\r\n\t},\r\n\tall:function(){\r\n\t\treturn this.rowManager.rows;\r\n\t},\r\n\tselected:function(){\r\n\t\treturn this.modules.selectRow.selectedRows;\r\n\t},\r\n\tactive:function(){\r\n\t\tif(this.options.pagination){\r\n\t\t\treturn this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2);\r\n\t\t}else{\r\n\t\t\treturn this.rowManager.getDisplayRows();\r\n\t\t}\r\n\t},\r\n};", "import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nimport columnLookups from './defaults/columnLookups.js';\nimport rowLookups from './defaults/rowLookups.js';\n\nexport default class Export extends Module{\n\n\tstatic moduleName = \"export\";\n\n\tstatic columnLookups = columnLookups;\n\tstatic rowLookups = rowLookups;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\tthis.colVisPropAttach = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tvar headers, body, columns, colLookup;\n\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\tthis.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1);\n\n\t\tcolLookup = Export.columnLookups[range];\n\n\t\tif(colLookup){\n\t\t\tcolumns = colLookup.call(this.table);\n\t\t\tcolumns = columns.filter(col => this.columnVisCheck(col));\n\t\t}\n\n\t\theaders = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders(columns)) : [];\n\n\t\tif(columns){\n\t\t\tcolumns = columns.map(col => col.getComponent());\n\t\t}\n\t\t\n\t\tbody = this.bodyToExportRows(this.rowLookup(range), columns);\n\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [], \n\t\trowLookup;\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\trowLookup = Export.rowLookups[range] || Export.rowLookups[\"active\"];\n\n\t\t\trows = rowLookup.call(this.table);\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(columns){\n\t\tvar output = [];\n\t\t\n\t\tif (!columns) {\n\t\t\tcolumns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t}\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\n\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisPropAttach)] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\n\t\tif(this.config.rowHeaders === false && column.isRowHeader){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\n\t\tif(visProp === false || visProp === true){\n\t\t\treturn visProp;\n\t\t}\n\n\t\treturn column.visible && column.field;\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows, columns = []){\n\t\tvar exportRows = [];\n\t\t\n\t\tif (columns.length === 0) {\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisPropAttach)],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisPropAttach)];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.styleRowHeader = styles.firstRow.getElementsByClassName(\"tabulator-row-header\")[0];\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-left\", \"border-right\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent && column.component._column.parent.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(this.table.columnManager.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\ttable =  this.table,\n\t\t\t\tindex = table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle, styleProps;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:function(){\n\t\t\t\t\t\treturn table;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\n\t\t\t\tstyleProps = [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"];\n\n\t\t\t\tif(column.isRowHeader){\n\t\t\t\t\tcellStyle = styles.styleRowHeader;\n\t\t\t\t\tstyleProps.push(\"background-color\");\n\t\t\t\t}else{\n\t\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, styleProps);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n", "export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};", "import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nexport default class Filter extends Module{\n\n\tstatic moduleName = \"filter\";\n\n\t//load defaults\n\tstatic filters = defaultFilters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}", "export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}", "export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}", "export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}", "export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else{\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}", "import Helpers from '../../../../core/tools/Helpers.js';\n\n\nexport default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\n\t\t\tvalue = Helpers.retrieveNestedData(this.table.options.nestedFieldSeparator, formatterParams.urlField, data);\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n}", "export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}", "export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}", "export default function(cell, formatterParams, onRendered){\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}", "export default function (cell, formatterParams, onRendered) {\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}", "export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}", "export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}", "export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}", "import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}", "export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}", "export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}", "export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}", "export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\tsize = formatterParams.size ||15,\r\n\tsizePx = size + \"px\",\r\n\tcontainEl, switchEl,\r\n\tonValue = formatterParams.hasOwnProperty(\"onValue\") ? formatterParams.onValue : true,\r\n\toffValue = formatterParams.hasOwnProperty(\"offValue\") ? formatterParams.offValue : false,\r\n\r\n\r\n\tstate = formatterParams.onTruthy ? value : value === onValue;\r\n\r\n\t\r\n\tcontainEl = document.createElement(\"div\");\r\n\tcontainEl.classList.add(\"tabulator-toggle\");\r\n\r\n\tif(state){\r\n\t\tcontainEl.classList.add(\"tabulator-toggle-on\");\r\n\t\tcontainEl.style.flexDirection = \"row-reverse\";\r\n\r\n\t\tif(formatterParams.onColor){\r\n\t\t\tcontainEl.style.background = formatterParams.onColor;\r\n\t\t}\r\n\t}else{\r\n\t\tif(formatterParams.offColor){\r\n\t\t\tcontainEl.style.background = formatterParams.offColor;\r\n\t\t}\r\n\t}\r\n\r\n\tcontainEl.style.width = (2.5 * size) + \"px\";\r\n\tcontainEl.style.borderRadius = sizePx;\r\n\r\n\tif(formatterParams.clickable){\r\n\t\tcontainEl.addEventListener(\"click\", (e) => {\r\n\t\t\tcell.setValue(state ? offValue : onValue);\r\n\t\t});\r\n\t}\r\n\r\n\tswitchEl = document.createElement(\"div\");\r\n\tswitchEl.classList.add(\"tabulator-toggle-switch\");\r\n\r\n\tswitchEl.style.height = sizePx;\r\n\tswitchEl.style.width = sizePx;\r\n\tswitchEl.style.borderRadius = sizePx;\r\n\t\r\n\tcontainEl.appendChild(switchEl);\r\n\t\r\n\treturn containEl;\r\n}", "export default function(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\tvar table = cell.getTable();\n\n\trow.watchPosition((position) => {\n\t\tif (formatterParams.relativeToPage) {\n\t\t\tposition += table.modules.page.getPageSize() * (table.modules.page.getPage() - 1);\n\t\t}\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}\n", "export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}", "export default function(cell, params, onRendered){\r\n\tvar lookup, formatterFunc, formatterParams;\r\n    \r\n\tfunction defaultLookup(cell){\r\n\t\tvar value = cell.getValue(),\r\n\t\tformatter = \"plaintext\";\r\n        \r\n\t\tswitch(typeof value){           \r\n\t\t\tcase \"boolean\":\r\n\t\t\t\tformatter = \"tickCross\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(value.includes(\"\\n\")){\r\n\t\t\t\t\tformatter = \"textarea\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n        \r\n\t\treturn formatter;\r\n\t}\r\n    \r\n\tlookup = params.formatterLookup ? params.formatterLookup(cell) : defaultLookup(cell);\r\n\r\n\tif(params.paramsLookup){\r\n\t\tformatterParams = typeof params.paramsLookup === \"function\" ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup];\r\n\t}\r\n\r\n\tformatterFunc = this.table.modules.format.lookupFormatter(lookup);\r\n    \r\n\treturn  formatterFunc.call(this, cell, formatterParams || {}, onRendered);\r\n}", "import Helpers from '../../../../core/tools/Helpers.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar delimiter = formatterParams.delimiter || \",\",\n\tvalue = cell.getValue(),\n\ttable = this.table,\n\tvalueMap;\n\t\n\tif(formatterParams.valueMap){\n\t\tif(typeof formatterParams.valueMap === \"string\"){\n\t\t\tvalueMap = function(value){\n\t\t\t\treturn value.map((item) => {\n\t\t\t\t\treturn Helpers.retrieveNestedData(table.options.nestedFieldSeparator, formatterParams.valueMap, item);\n\t\t\t\t});\n\t\t\t};\n\t\t}else{\n\t\t\tvalueMap = formatterParams.valueMap;\n\t\t}\n\t}\n\n\tif(Array.isArray(value)){\n\t\tif(valueMap){\n\t\t\tvalue = valueMap(value);\n\t\t}\n\n\t\treturn value.join(delimiter);\n\t}else{\n\t\treturn value;\n\t}\n}", "export default function(cell, formatterParams, onRendered){\n\tvar indent = formatterParams.indent || \"\\t\",\n\tmultiline = typeof formatterParams.multiline === \"undefined\" ? true : formatterParams.multiline,\n\treplacer = formatterParams.replacer || null,\n\tvalue = cell.getValue();\n\t\n\tif(multiline){\n\t\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\t}\n\n\treturn JSON.stringify(value, replacer, indent);\n}", "import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport toggle from './formatters/toggle.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\nimport adaptable from './formatters/adaptable.js';\nimport array from './formatters/array.js';\nimport json from './formatters/json.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\ttoggle:toggle,\n\trownum:rownum,\n\thandle:handle,\n\tadaptable:adaptable,\n\tarray:array,\n\tjson:json,\n};", "import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nexport default class Format extends Module{\n\t\n\tstatic moduleName = \"format\";\n\t\n\t//load defaults\n\tstatic formatters = defaultFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupTypeFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupTypeFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupTypeFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupTypeFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupTypeFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\tconfig.formatter = this.lookupFormatter(formatter);\n\t\t\n\t\treturn config;\n\t}\n\t\n\t\n\tlookupFormatter(formatter){\n\t\tvar formatterFunc;\n\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatterFunc = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatterFunc = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tformatterFunc = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatterFunc = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatterFunc;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.lookupFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n}", "import Module from '../../core/Module.js';\n\nexport default class FrozenColumns extends Module{\n\n\tstatic moduleName = \"frozenColumns\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-deleted\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-show\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\n\t\tthis.layout();\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else{\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\telement.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\telement.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\n\tgetFrozenColumns(){\n\t\treturn this.leftColumns.concat(this.rightColumns);\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class FrozenRows extends Module{\n\n\tstatic moduleName = \"frozenRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\t\t\n\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\tfragment.appendChild(this.topElement);\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}", "//public group object\nexport default class GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}", "import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nexport default class Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else{\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}", "import Module from '../../core/Module.js';\n\nimport Group from './Group.js';\n\nexport default class GroupRows extends Module{\n\n\tstatic moduleName = \"groupRows\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else{\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else{\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else{\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}", "export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};", "export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};", "export default {\r\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\r\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\r\n};\r\n", "export default {\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n", "import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};", "import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class History extends Module{\n\n\tstatic moduleName = \"history\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic undoers = defaultUndoers;\n\tstatic redoers = defaultRedoers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Undo Error - No more history to undo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Redo Error - No more history to redo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class HtmlTableImport extends Module{\n\n\tstatic moduleName = \"htmlTableImport\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}", "export default function(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}", "export default function(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}", "export default function (input){\n\treturn input;\n}", "export default function(input){\r\n\tvar XLSXLib = this.dependencyRegistry.lookup(\"XLSX\"),\r\n\tworkbook2 = XLSXLib.read(input),\r\n\tsheet = workbook2.Sheets[workbook2.SheetNames[0]];\r\n\t\r\n\treturn XLSXLib.utils.sheet_to_json(sheet, {header: 1 });\r\n}", "import csv from './importers/csv.js';\nimport json from './importers/json.js';\nimport array from './importers/array.js';\nimport xlsx from './importers/xlsx.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tarray:array,\n\txlsx:xlsx,\n};", "import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nexport default class Import extends Module{\n\t\n\tstatic moduleName = \"import\";\n\t\n\t//load defaults\n\tstatic importers = defaultImporters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t\tthis.registerTableOption(\"importHeaderTransform\");\n\t\tthis.registerTableOption(\"importValueTransform\");\n\t\tthis.registerTableOption(\"importDataValidator\");\n\t\tthis.registerTableOption(\"importFileValidator\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\t\t\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\t\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\t\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\t\n\tlookupImporter(importFormat){\n\t\tvar importer;\n\t\t\n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n\t\t\n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else{\n\t\t\timporter = importFormat;\n\t\t}\n\t\t\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n\t\t\n\t\treturn importer;\n\t}\n\t\n\timportFromFile(importFormat, extension, importReader){\n\t\tvar importer = this.lookupImporter(importFormat);\n\t\t\n\t\tif(importer){\n\t\t\treturn this.pickFile(extension, importReader)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.mutateData.bind(this))\n\t\t\t\t.then(this.validateData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tthis.dispatch(\"import-error\", err);\n\t\t\t\t\tthis.dispatchExternal(\"importError\", err);\n\t\t\t\t\t\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\t\n\t\t\t\t\tthis.table.dataLoader.alertError();\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.table.dataLoader.clearAlert();\n\t\t\t\t\t}, 3000);\n\t\t\t\t\t\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\tpickFile(extensions, importReader){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n\t\t\t\n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader(),\n\t\t\t\tvalid = this.validateFile(file);\n\n\t\t\t\tif(valid === true){\n\t\t\t\t\n\t\t\t\t\tthis.dispatch(\"import-importing\", input.files);\n\t\t\t\t\tthis.dispatchExternal(\"importImporting\", input.files);\n\t\t\t\t\n\t\t\t\t\tswitch(importReader || this.table.options.importReader){\n\t\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\tresolve(reader.result);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\treject(valid);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"import-choose\");\n\t\t\tthis.dispatchExternal(\"importChoose\");\n\t\t\tinput.click();\n\t\t});\n\t}\n\t\n\timportData(importer, fileContents){\n\t\tvar data;\n\t\t\n\t\tthis.table.dataLoader.alertLoader();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdata = importer.call(this.table, fileContents);\n\t\t\t\t\n\t\t\t\tif(data instanceof Promise){\n\t\t\t\t\tresolve(data);\n\t\t\t\t}else{\n\t\t\t\t\tdata ? resolve(data) : reject();\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t});\n\t}\n\t\n\tstructureData(parsedData){\n\t\tvar data = [];\n\t\t\n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else{\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\t\n\tmutateData(data){\n\t\tvar output = [];\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"import\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\ttransformHeader(headers){\n\t\tvar output = [];\n\t\t\n\t\tif(this.table.options.importHeaderTransform){\n\t\t\theaders.forEach((item) => {\n\t\t\t\toutput.push(this.table.options.importHeaderTransform.call(this.table, item, headers));\n\t\t\t});\n\t\t}else{\n\t\t\treturn headers;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\ttransformData(row){\n\t\tvar output = [];\n\n\t\tif(this.table.options.importValueTransform){\n\t\t\trow.forEach((item) => {\n\t\t\t\toutput.push(this.table.options.importValueTransform.call(this.table, item, row));\n\t\t\t});\n\t\t}else{\n\t\t\treturn row;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = this.transformHeader(parsedData.shift());\t\n\t\t\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tvalues = this.transformData(values);\n\t\t\t\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\t\t\t\n\t\t\treturn row;\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tfirstRow = this.transformHeader(parsedData[0]),\n\t\tcolumns = this.table.getColumns();\n\t\t\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && firstRow[0]){\n\t\t\tif(columns[0].getDefinition().title === firstRow[0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n\t\t\n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData = this.transformData(rowData);\n\t\t\t\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\t\t\t\t\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tdata.push(row);\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\n\tvalidateFile(file){\n\t\tif(this.table.options.importFileValidator){\n\t\t\treturn this.table.options.importFileValidator.call(this.table, file);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tvalidateData(data){\n\t\tvar result;\n\n\t\tif(this.table.options.importDataValidator){\n\t\t\tresult = this.table.options.importDataValidator.call(this.table, data);\n\n\t\t\tif(result === true){\n\t\t\t\treturn data;\n\t\t\t}else{\n\t\t\t\treturn Promise.reject(result);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\t\n\tsetData(data){\n\t\tthis.dispatch(\"import-imported\", data);\n\t\tthis.dispatchExternal(\"importImported\", data);\n\t\t\n\t\tthis.table.dataLoader.clearAlert();\n\t\t\n\t\treturn this.table.setData(data);\n\t}\n}", "import Module from '../../core/Module.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\n\nexport default class Interaction extends Module{\n\n\tstatic moduleName = \"interaction\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else{\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}", "export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tnavLeft:37,\n\tnavRight:39,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n};\n", "export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n};\n", "import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nexport default class Keybindings extends Module{\n\n\tstatic moduleName = \"keybindings\";\n\n\t//load defaults\n\tstatic bindings = defaultBindings;\n\tstatic actions = defaultActions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class Menu extends Module{\n\n\tstatic moduleName = \"menu\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\t// this.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// if(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t// \tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t// }\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatch(\"menu-closed\", menu, popup);\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatch(\"menu-opened\", menu, popup);\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n", "import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nexport default class MoveColumns extends Module{\n\n\tstatic moduleName = \"moveColumn\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"alert-show\", this.abortMove.bind(this));\n\t\t}\n\t}\n\n\tabortMove(){\n\t\tclearTimeout(this.checkTimeout);\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\n\t\tif(!column.modules.frozen && !column.isGroup && !column.isRowHeader){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\t//Prevent moving columns when range selection is active\n\t\tif(this.table.modules.selectRange && this.table.modules.selectRange.columnSelection){\n\t\t\tif(this.table.modules.selectRange.mousedown && this.table.modules.selectRange.selecting === \"column\"){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\n\t\tthis.dispatch(\"column-moving\", e, this.moving);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}", "export default {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};", "export default{\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};", "import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultSenders from './defaults/senders.js';\nimport defaultReceivers from './defaults/receivers.js';\n\nexport default class MoveRows extends Module{\n\n\tstatic moduleName = \"moveRow\";\n\n\t//load defaults\n\tstatic senders = defaultSenders;\n\tstatic receivers = defaultReceivers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = MoveRows.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = MoveRows.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}", "export default {};", "import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nexport default class Mutator extends Module{\n\n\tstatic moduleName = \"mutator\";\n\n\t//load defaults\n\tstatic mutators = defaultMutators;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\", \"import\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutatorImport\");\n\t\tthis.registerColumnOption(\"mutatorImportParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\t// console.log(\"key\", key)\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}", "export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}", "export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}", "import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};", "import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nexport default class Page extends Module{\n\n\tstatic moduleName = \"page\";\n\n\t//load defaults\n\tstatic pageCounters = defaultPageCounters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\tthis.registerTableOption(\"paginationOutOfRange\", false); //reset the current page when the last page < this.page, values: false|function|any value accepted by setPage()\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder; \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin, paginationOutOfRange;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\n\t\t\t\tif(this.page > this.max){\n\t\t\t\t\tconsole.warn( \"Remote Pagination Error - Server returned last page value lower than the current page\" );\n\n\t\t\t\t\tpaginationOutOfRange = this.options('paginationOutOfRange');\n\n\t\t\t\t\tif(paginationOutOfRange){\n\t\t\t\t\t\treturn this.setPage(typeof paginationOutOfRange === 'function' ? paginationOutOfRange.call(this, this.page, this.max) :\tpaginationOutOfRange);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}", "// read persistance information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n", "//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};", "import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nexport default class Persistence extends Module{\n\n\tstatic moduleName = \"persistence\";\n\n\tstatic moduleInitOrder = -10;\n\n\t//load defaults\n\tstatic readers = defaultReaders;\n\tstatic writers = defaultWriters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout, true));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols, mergeAllNew){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(mergeAllNew){\n\t\t\t\t\tkeys = Object.keys(column);\n\t\t\t\t}else if(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class Popup extends Module{\n\t\n\tstatic moduleName = \"popup\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else{\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class Print extends Module{\n\n\tstatic moduleName = \"print\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class ReactiveData extends Module{\n\n\tstatic moduleName = \"reactiveData\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class ResizeColumns extends Module{\n\n\tstatic moduleName = \"resizeColumns\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t\tthis.registerTableOption(\"resizableColumnGuide\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else{\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t\tcell.modules.resize.handleEl.style[\"z-index\"] = 11;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.dispatchExternal(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\tresize(e, column){\n\t\tvar x = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\tstartDiff = x - this.startX,\n\t\tmoveDiff = x - this.latestX,\n\t\tblockedBefore, blockedAfter;\n\n\t\tthis.latestX = x;\n\n\t\tif(this.table.rtl){\n\t\t\tstartDiff = -startDiff;\n\t\t\tmoveDiff = -moveDiff;\n\t\t}\n\n\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tcolumn.setWidth(this.startWidth + startDiff);\n\n\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tif(moveDiff < 0){\n\t\t\tthis.nextColumn = this.initialNextColumn;\n\t\t}\n\n\t\tif(this.table.options.resizableColumnFit && this.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\tlet colWidth = this.nextColumn.getWidth();\n\n\t\t\tif(moveDiff > 0){\n\t\t\t\tif(colWidth <= this.nextColumn.minWidth){\n\t\t\t\t\tthis.nextColumn = this.nextColumn.nextColumn();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.nextColumn){\n\t\t\t\tthis.nextColumn.setWidth(this.nextColumn.getWidth() - moveDiff);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\tif(!this.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\tcolumn.checkCellHeights();\n\t\t}\n\t}\n\n\tcalcGuidePosition(e, column, handle) {\n\t\tvar mouseX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\thandleX = handle.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x,\n\t\ttableX = this.table.element.getBoundingClientRect().x,\n\t\tcolumnX = column.element.getBoundingClientRect().left - tableX,\n\t\tmouseDiff = mouseX - this.startX,\n\t\tpos = Math.max(handleX + mouseDiff, columnX + column.minWidth);\n\n\t\tif(column.maxWidth){\n\t\t\tpos = Math.min(pos, columnX + column.maxWidth);\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tthis.dispatchExternal(\"columnResizing\", column.getComponent());\n\n\t\tif(self.table.options.resizableColumnGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-col-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, column);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tself.resize(e, column);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.dispatchExternal(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class ResizeRows extends Module{\n\n\tstatic moduleName = \"resizeRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t\tthis.registerTableOption(\"resizableRowGuide\", false);\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\tresize(e, row) {\n\t\trow.setHeight(this.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - this.startY));\n\t}\n\n\tcalcGuidePosition(e, row, handle) {\n\t\tvar mouseY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY,\n\t\thandleY = handle.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y,\n\t\ttableY = this.table.element.getBoundingClientRect().y,\n\t\trowY = row.element.getBoundingClientRect().top - tableY,\n\t\tmouseDiff = mouseY - this.startY;\n\n\t\treturn Math.max(handleY + mouseDiff, rowY);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tself.dispatchExternal(\"rowResizing\", row.getComponent());\n\n\t\tif(self.table.options.resizableRowGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-row-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, row);\n\t\t\t}\n\t\t}\n\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tself.resize(e, row);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class ResizeTable extends Module{\n\n\tstatic moduleName = \"resizeTable\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else{\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}", "export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}", "import responsiveCollapse from './formatters/responsiveCollapse.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\tresponsiveCollapse:responsiveCollapse,\r\n\t\t}\r\n\t}\r\n};", "import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class ResponsiveLayout extends Module{\n\n\tstatic moduleName = \"responsiveLayout\";\n\tstatic moduleExtensions = extensions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\tif(this.collapseFormatter){\n\t\t\tthis.collapseFormatter = this.collapseFormatter.bind(this.table);\n\t\t}\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t\trow.calcHeight(true);\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach((item) => {\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\t\n\t\t\tthis.modules.localize.bind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t});\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}", "import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}", "import rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\trowSelection:rowSelection,\r\n\t\t}\r\n\t}\r\n};", "import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class SelectRow extends Module{\n\n\tstatic moduleName = \"selectRow\";\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectableRows\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectableRowsPersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableRowsCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tif(this.table.options.selectableRows === \"highlight\" && this.table.options.selectableRange){\n\t\t\tthis.table.options.selectableRows = false;\n\t\t}\n\n\t\tif(this.table.options.selectableRows !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectableRows && !this.table.options.selectableRowsPersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheck(\"selectable\", \"selectableRows\", true);\n\t\t// this.deprecationCheck(\"selectableRollingSelection\", \"selectableRowsRollingSelection\", true);\n\t\t// this.deprecationCheck(\"selectableRangeMode\", \"selectableRowsRangeMode\", true);\n\t\t// this.deprecationCheck(\"selectablePersistence\", \"selectableRowsPersistence\", true);\n\t\t// this.deprecationCheck(\"selectableCheck\", \"selectableRowsCheck\", true);\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tselectable = self.checkRowSelectability(row),\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\n\t\telement.classList.toggle(\"tabulator-selectable\", selectable);\n\t\telement.classList.toggle(\"tabulator-unselectable\", !selectable);\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\t\t\t\n\t\t\tif(self.table.options.selectableRows && self.table.options.selectableRows != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectableRows !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectableRows){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectableRows !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectableRows){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectableRows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableRowsCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectableRows){\n\t\t\t\tif(this.table.options.selectableRowsRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}", "export default class RangeComponent {\n\tconstructor(range) {\n\t\tthis._range = range;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function (target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t} else {\n\t\t\t\t\treturn target._range.table.componentFunctionBinder.handle(\"range\", target._range, name);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tgetElement() {\n\t\treturn this._range.element;\n\t}\n\n\tgetData() {\n\t\treturn this._range.getData();\n\t}\n\n\tgetCells() {\n\t\treturn this._range.getCells(true, true);\n\t}\n\n\tgetStructuredCells() {\n\t\treturn this._range.getStructuredCells();\n\t}\n\n\tgetRows() {\n\t\treturn this._range.getRows().map((row) => row.getComponent());\n\t}\n\n\tgetColumns() {\n\t\treturn this._range.getColumns().map((column) => column.getComponent());\n\t}\n\t\n\tgetBounds() {\n\t\treturn this._range.getBounds();\n\t}\n\n\tgetTopEdge() {\n\t\treturn this._range.top;\n\t}\n\n\tgetBottomEdge() {\n\t\treturn this._range.bottom;\n\t}\n\n\tgetLeftEdge() {\n\t\treturn this._range.left;\n\t}\n\n\tgetRightEdge() {\n\t\treturn this._range.right;\n\t}\n\n\tsetBounds(start, end){\n\t\tif(this._range.destroyedGuard(\"setBounds\")){\n\t\t\tthis._range.setBounds(start ? start._cell : start, end ? end._cell : end);\n\t\t}\n\t}\n\n\tsetStartBound(start){\n\t\tif(this._range.destroyedGuard(\"setStartBound\")){\n\t\t\tthis._range.setEndBound(start ? start._cell : start);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tsetEndBound(end){\n\t\tif(this._range.destroyedGuard(\"setEndBound\")){\n\t\t\tthis._range.setEndBound(end ? end._cell : end);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tclearValues(){\n\t\tif(this._range.destroyedGuard(\"clearValues\")){\n\t\t\tthis._range.clearValues();\n\t\t}\n\t}\n\n\tremove(){\n\t\tif(this._range.destroyedGuard(\"remove\")){\n\t\t\tthis._range.destroy(true);\n\t\t}\n\t}\n}", "import CoreFeature from '../../core/CoreFeature.js';\nimport RangeComponent from \"./RangeComponent\";\n\nexport default class Range extends CoreFeature{\n\tconstructor(table, rangeManager, start, end) {\n\t\tsuper(table);\n\t\t\n\t\tthis.rangeManager = rangeManager;\n\t\tthis.element = null;\n\t\tthis.initialized = false;\n\t\tthis.initializing = {\n\t\t\tstart:false,\n\t\t\tend:false,\n\t\t};\n\t\tthis.destroyed = false;\n\t\t\n\t\tthis.top = 0;\n\t\tthis.bottom = 0;\n\t\tthis.left = 0;\n\t\tthis.right = 0;\n\t\t\n\t\tthis.table = table;\n\t\tthis.start = {row:0, col:0};\n\t\tthis.end = {row:0, col:0};\n\n\t\tif(this.rangeManager.rowHeader){\n\t\t\tthis.left = 1;\n\t\t\tthis.right = 1;\n\t\t\tthis.start.col = 1;\n\t\t\tthis.end.col = 1;\n\t\t}\n\t\t\n\t\tthis.initElement();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.initBounds(start, end);\n\t\t});\n\t}\n\t\n\tinitElement(){\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-range\");\n\t}\n\t\n\tinitBounds(start, end){\n\t\tthis._updateMinMax();\n\t\t\n\t\tif(start){\n\t\t\tthis.setBounds(start, end || start);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Boundary Setup    ///////\n\t///////////////////////////////////\n\t\n\tsetStart(row, col) {\n\t\tif(this.start.row !== row || this.start.col !== col){\n\t\t\tthis.start.row = row;\n\t\t\tthis.start.col = col;\n\t\t\t\n\t\t\tthis.initializing.start = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetEnd(row, col) {\n\t\tif(this.end.row !== row || this.end.col !== col){\n\t\t\tthis.end.row = row;\n\t\t\tthis.end.col = col;\n\t\t\t\n\t\t\tthis.initializing.end = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetBounds(start, end, visibleRows){\n\t\tif(start){\n\t\t\tthis.setStartBound(start);\n\t\t}\n\t\t\n\t\tthis.setEndBound(end || start);\n\t\tthis.rangeManager.layoutElement(visibleRows);\n\t}\n\t\n\tsetStartBound(element){\n\t\tvar row, col;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tthis.setStart(0, element.getPosition() - 1);\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\t\n\t\t\tif (element.column === this.rangeManager.rowHeader) {\n\t\t\t\tthis.setStart(row, 1);\n\t\t\t} else {\n\t\t\t\tthis.setStart(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetEndBound(element){\n\t\tvar rowsCount = this._getTableRows().length,\n\t\trow, col, isRowHeader;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tif (this.rangeManager.selecting === \"column\") {\n\t\t\t\t\tthis.setEnd(rowsCount - 1, element.getPosition() - 1);\n\t\t\t\t} else if (this.rangeManager.selecting === \"cell\") {\n\t\t\t\t\tthis.setEnd(0, element.getPosition() - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\tisRowHeader = element.column === this.rangeManager.rowHeader;\n\t\t\t\n\t\t\tif (this.rangeManager.selecting === \"row\") {\n\t\t\t\tthis.setEnd(row, this._getTableColumns().length - 1);\n\t\t\t} else if (this.rangeManager.selecting !== \"row\" && isRowHeader) {\n\t\t\t\tthis.setEnd(row, 0);\n\t\t\t} else if (this.rangeManager.selecting === \"column\") {\n\t\t\t\tthis.setEnd(rowsCount - 1, col);\n\t\t\t} else {\n\t\t\t\tthis.setEnd(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_updateMinMax() {\n\t\tthis.top = Math.min(this.start.row, this.end.row);\n\t\tthis.bottom = Math.max(this.start.row, this.end.row);\n\t\tthis.left = Math.min(this.start.col, this.end.col);\n\t\tthis.right = Math.max(this.start.col, this.end.col);\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeChanged\", this.getComponent());\n\t\t}else{\n\t\t\tif(this.initializing.start && this.initializing.end){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.dispatchExternal(\"rangeAdded\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_getTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\t_getTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Rendering      ///////\n\t///////////////////////////////////\n\t\n\tlayout() {\n\t\tvar _vDomTop = this.table.rowManager.renderer.vDomTop,\n\t\t_vDomBottom = this.table.rowManager.renderer.vDomBottom,\n\t\t_vDomLeft = this.table.columnManager.renderer.leftCol,\n\t\t_vDomRight = this.table.columnManager.renderer.rightCol,\t\t\n\t\ttop, bottom, left, right, topLeftCell, bottomRightCell, topLeftCellEl, bottomRightCellEl, topLeftRowEl, bottomRightRowEl;\n\n\t\tif(this.table.options.renderHorizontal === \"virtual\" && this.rangeManager.rowHeader) {\n\t\t\t_vDomRight += 1;\n\t\t}\n\t\t\n\t\tif (_vDomTop == null) {\n\t\t\t_vDomTop = 0;\n\t\t}\n\t\t\n\t\tif (_vDomBottom == null) {\n\t\t\t_vDomBottom = Infinity;\n\t\t}\n\t\t\n\t\tif (_vDomLeft == null) {\n\t\t\t_vDomLeft = 0;\n\t\t}\n\t\t\n\t\tif (_vDomRight == null) {\n\t\t\t_vDomRight = Infinity;\n\t\t}\n\t\t\n\t\tif (this.overlaps(_vDomLeft, _vDomTop, _vDomRight, _vDomBottom)) {\n\t\t\ttop = Math.max(this.top, _vDomTop);\n\t\t\tbottom = Math.min(this.bottom, _vDomBottom);\n\t\t\tleft = Math.max(this.left, _vDomLeft);\n\t\t\tright = Math.min(this.right, _vDomRight);\n\t\t\t\n\t\t\ttopLeftCell = this.rangeManager.getCell(top, left);\n\t\t\tbottomRightCell = this.rangeManager.getCell(bottom, right);\n\t\t\ttopLeftCellEl = topLeftCell.getElement();\n\t\t\tbottomRightCellEl = bottomRightCell.getElement();\n\t\t\ttopLeftRowEl = topLeftCell.row.getElement();\n\t\t\tbottomRightRowEl = bottomRightCell.row.getElement();\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-range-active\");\n\t\t\t// this.element.classList.toggle(\"tabulator-range-active\", this === this.rangeManager.activeRange);\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.element.style.right = topLeftRowEl.offsetWidth - topLeftCellEl.offsetLeft - topLeftCellEl.offsetWidth + \"px\";\n\t\t\t\tthis.element.style.width = topLeftCellEl.offsetLeft + topLeftCellEl.offsetWidth - bottomRightCellEl.offsetLeft + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.left = topLeftRowEl.offsetLeft + topLeftCellEl.offsetLeft + \"px\";\n\t\t\t\tthis.element.style.width = bottomRightCellEl.offsetLeft + bottomRightCellEl.offsetWidth - topLeftCellEl.offsetLeft + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.element.style.top = topLeftRowEl.offsetTop + \"px\";\n\t\t\tthis.element.style.height = bottomRightRowEl.offsetTop + bottomRightRowEl.offsetHeight - topLeftRowEl.offsetTop + \"px\";\n\t\t}\n\t}\n\t\n\tatTopLeft(cell) {\n\t\treturn cell.row.position - 1 === this.top && cell.column.getPosition() - 1 === this.left;\n\t}\n\t\n\tatBottomRight(cell) {\n\t\treturn cell.row.position - 1 === this.bottom && cell.column.getPosition() - 1 === this.right;\n\t}\n\t\n\toccupies(cell) {\n\t\treturn this.occupiesRow(cell.row) && this.occupiesColumn(cell.column);\n\t}\n\t\n\toccupiesRow(row) {\n\t\treturn this.top <= row.position - 1 && row.position - 1 <= this.bottom;\n\t}\n\t\n\toccupiesColumn(col) {\n\t\treturn this.left <= col.getPosition() - 1 && col.getPosition() - 1 <= this.right;\n\t}\n\t\n\toverlaps(left, top, right, bottom) {\n\t\tif ((this.left > right || left > this.right) || (this.top > bottom || top > this.bottom)){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\tgetData() {\n\t\tvar data = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tvar rowData = row.getData(),\n\t\t\tresult = {};\n\t\t\t\n\t\t\tcolumns.forEach((column) => {\n\t\t\t\tresult[column.field] = rowData[column.field];\n\t\t\t});\n\t\t\t\n\t\t\tdata.push(result);\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetCells(structured, component) {\n\t\tvar cells = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\tif (structured) {\n\t\t\tcells = rows.map((row) => {\n\t\t\t\tvar arr = [];\n\t\t\t\t\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tarr.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn arr;\n\t\t\t});\n\t\t} else {\n\t\t\trows.forEach((row) => {\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tcells.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn cells;\n\t}\n\t\n\tgetStructuredCells() {\n\t\treturn this.getCells(true, true);\n\t}\n\t\n\tgetRows() {\n\t\treturn this._getTableRows().slice(this.top, this.bottom + 1);\n\t}\n\t\n\tgetColumns() {\n\t\treturn this._getTableColumns().slice(this.left, this.right + 1);\n\t}\n\t\n\tclearValues(){\n\t\tvar cells = this.getCells();\n\t\tvar clearValue = this.table.options.selectableRangeClearCellsValue;\n\t\t\n\t\tthis.table.blockRedraw();\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tcell.setValue(clearValue);\n\t\t});\n\t\t\n\t\tthis.table.restoreRedraw();\n\t\t\n\t}\n\t\n\tgetBounds(component){\n\t\tvar cells = this.getCells(false, component),\n\t\toutput = {\n\t\t\tstart:null,\n\t\t\tend:null,\n\t\t};\n\t\t\n\t\tif(cells.length){\n\t\t\toutput.start = cells[0];\n\t\t\toutput.end = cells[cells.length - 1];\n\t\t}else{\n\t\t\tconsole.warn(\"No bounds defined on range\");\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponent() {\n\t\tif (!this.component) {\n\t\t\tthis.component = new RangeComponent(this);\n\t\t}\n\t\treturn this.component;\n\t}\n\t\n\tdestroy(notify) {\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.element.remove();\n\t\t\n\t\tif(notify){\n\t\t\tthis.rangeManager.rangeRemoved(this);\n\t\t}\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeRemoved\", this.getComponent());\n\t\t}\n\t}\n\t\n\tdestroyedGuard(func){\n\t\tif(this.destroyed){\n\t\t\tconsole.warn(\"You cannot call the \"  + func + \" function on a destroyed range\");\n\t\t}\n\t\t\n\t\treturn !this.destroyed;\n\t}\n}", "export default {\r\n\trangeJumpUp:[\"ctrl + 38\", \"meta + 38\"],\r\n\trangeJumpDown:[\"ctrl + 40\", \"meta + 40\"],\r\n\trangeJumpLeft:[\"ctrl + 37\", \"meta + 37\"],\r\n\trangeJumpRight:[\"ctrl + 39\", \"meta + 39\"],\r\n\trangeExpandUp:\"shift + 38\",\r\n\trangeExpandDown:\"shift + 40\",\r\n\trangeExpandLeft:\"shift + 37\",\r\n\trangeExpandRight:\"shift + 39\",\r\n\trangeExpandJumpUp:[\"ctrl + shift + 38\", \"meta + shift + 38\"],\r\n\trangeExpandJumpDown:[\"ctrl + shift + 40\", \"meta + shift + 40\"],\r\n\trangeExpandJumpLeft:[\"ctrl + shift + 37\", \"meta + shift + 37\"],\r\n\trangeExpandJumpRight:[\"ctrl + shift + 39\", \"meta + shift + 39\"],\r\n};\r\n", "export default {\r\n\trangeJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, false);\r\n\t},\r\n\trangeJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, false);\r\n\t},\r\n\trangeJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, false);\r\n\t},\r\n\trangeJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, false);\r\n\t},\r\n\trangeExpandLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", false, true);\r\n\t},\r\n\trangeExpandRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", false, true);\r\n\t},\r\n\trangeExpandUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", false, true);\r\n\t},\r\n\trangeExpandDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", false, true);\r\n\t},\r\n\trangeExpandJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, true);\r\n\t},\r\n\trangeExpandJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, true);\r\n\t},\r\n\trangeExpandJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, true);\r\n\t},\r\n\trangeExpandJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, true);\r\n\t},\r\n};\r\n", "export default {\r\n\trange:function(data){\r\n\t\tvar rows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, startRow, rowWidth, dataLength;\r\n\r\n\t\tdataLength = data.length;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\t\t\t\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\trows = this.table.rowManager.activeRows.slice();\r\n\t\t\t\tstartRow = rows.indexOf(startCell.row);\r\n\r\n\t\t\t\tif(singleCell){\r\n\t\t\t\t\trowWidth = data.length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowWidth = (rows.indexOf(bounds.end.row) - startRow) + 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(startRow >-1){\r\n\t\t\t\t\tthis.table.blockRedraw();\r\n\t\t\t\t\t\r\n\t\t\t\t\trows = rows.slice(startRow, startRow + rowWidth);\r\n\t\t\t\t\t\r\n\t\t\t\t\trows.forEach((row, i) => {\r\n\t\t\t\t\t\trow.updateData(data[i % dataLength]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.table.restoreRedraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n};", "export default {\r\n\trange:function(clipboard){\r\n\t\tvar data = [],\r\n\t\trows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, colWidth, columnMap, startCol;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\t//get data from clipboard into array of columns and rows.\r\n\t\t\t\tclipboard = clipboard.split(\"\\n\");\r\n\t\t\t\t\r\n\t\t\t\tclipboard.forEach(function(row){\r\n\t\t\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(data.length){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.getVisibleColumnsByIndex();\r\n\t\t\t\t\tstartCol = columnMap.indexOf(startCell.column);\r\n\r\n\t\t\t\t\tif(startCol > -1){\r\n\t\t\t\t\t\tif(singleCell){\r\n\t\t\t\t\t\t\tcolWidth = data[0].length;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcolWidth = (columnMap.indexOf(bounds.end.column) - startCol) + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumnMap = columnMap.slice(startCol, startCol + colWidth);\r\n\r\n\t\t\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\t\t\tvar row = {};\r\n\t\t\t\t\t\t\tvar itemLength = item.length;\r\n\r\n\t\t\t\t\t\t\tcolumnMap.forEach(function(col, i){\r\n\t\t\t\t\t\t\t\trow[col.field] = item[i % itemLength];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trows.push(row);\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn rows;\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n};", "export default {\r\n\trange:function(){\r\n\t\tvar columns = this.modules.selectRange.selectedColumns();\r\n\r\n\t\tif(this.columnManager.rowHeader){\r\n\t\t\tcolumns.unshift(this.columnManager.rowHeader);\r\n\t\t}\r\n\r\n\t\treturn columns;\r\n\t},\r\n};", "export default {\r\n\trange:function(){\r\n\t\treturn this.modules.selectRange.selectedRows();\r\n\t},\r\n};", "import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\nimport pasteActions from './clipboard/pasteActions.js';\r\nimport pasteParsers from './clipboard/pasteParsers.js';\r\nimport columnLookups from './export/columnLookups.js';\r\nimport rowLookups from './export/rowLookups.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n\tclipboard:{\r\n\t\tpasteActions:pasteActions,\r\n\t\tpasteParsers:pasteParsers\r\n\t},\r\n\texport:{\r\n\t\tcolumnLookups:columnLookups,\r\n\t\trowLookups:rowLookups,\r\n\t}\r\n};", "import Module from \"../../core/Module.js\";\nimport Range from \"./Range.js\";\nimport extensions from './extensions/extensions.js';\n\n\nexport default class SelectRange extends Module {\n\t\n\tstatic moduleName = \"selectRange\";\n\tstatic moduleInitOrder = 1;\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table) {\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = \"cell\";\n\t\tthis.mousedown = false;\n\t\tthis.ranges = [];\n\t\tthis.overlay = null;\n\t\tthis.rowHeader = null;\n\t\tthis.layoutChangeTimeout = null;\n\t\tthis.columnSelection = false;\n\t\tthis.rowSelection = false;\n\t\tthis.maxRanges = 0;\n\t\tthis.activeRange = false;\n\t\tthis.blockKeydown = false;\n\t\t\n\t\tthis.keyDownEvent = this._handleKeyDown.bind(this);\n\t\tthis.mouseUpEvent = this._handleMouseUp.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"selectableRange\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeColumns\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeRows\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeClearCells\", false); //allow clearing of active range\n\t\tthis.registerTableOption(\"selectableRangeClearCellsValue\", undefined); //value for cleared active range\n\t\tthis.registerTableOption(\"selectableRangeAutoFocus\", true); //focus on a cell after resetRanges\n\t\t\n\t\tthis.registerTableFunction(\"getRangesData\", this.getRangesData.bind(this));\n\t\tthis.registerTableFunction(\"getRanges\", this.getRanges.bind(this));\n\t\tthis.registerTableFunction(\"addRange\", this.addRangeFromComponent.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"getRanges\", this.cellGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getRanges\", this.rowGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getRanges\", this.colGetRanges.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////    Initialization   ///////\n\t///////////////////////////////////\n\t\n\tinitialize() {\n\t\tif (this.options(\"selectableRange\")) {\t\n\t\t\tif(!this.options(\"selectableRows\")){\n\t\t\t\tthis.maxRanges = this.options(\"selectableRange\");\n\t\t\t\t\n\t\t\t\tthis.initializeTable();\n\t\t\t\tthis.initializeWatchers();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"SelectRange functionality cannot be used in conjunction with row selection\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').findIndex((column) => column.frozen) > 0) {\n\t\t\t\tconsole.warn(\"Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').filter((column) => column.frozen) > 1) {\n\t\t\t\tconsole.warn(\"Having multiple frozen columns with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tinitializeTable() {\t\t\n\t\tthis.overlay = document.createElement(\"div\");\n\t\tthis.overlay.classList.add(\"tabulator-range-overlay\");\n\t\t\n\t\tthis.rangeContainer = document.createElement(\"div\");\n\t\tthis.rangeContainer.classList.add(\"tabulator-range-container\");\n\t\t\n\t\tthis.activeRangeCellElement = document.createElement(\"div\");\n\t\tthis.activeRangeCellElement.classList.add(\"tabulator-range-cell-active\");\n\t\t\n\t\tthis.overlay.appendChild(this.rangeContainer);\n\t\tthis.overlay.appendChild(this.activeRangeCellElement);\n\t\t\n\t\tthis.table.rowManager.element.addEventListener(\"keydown\", this.keyDownEvent);\n\t\t\n\t\tthis.resetRanges();\n\t\t\n\t\tthis.table.rowManager.element.appendChild(this.overlay);\n\t\tthis.table.columnManager.element.setAttribute(\"tabindex\", 0);\n\t\tthis.table.element.classList.add(\"tabulator-ranges\");\n\t}\n\t\n\tinitializeWatchers() {\n\t\tthis.columnSelection = this.options(\"selectableRangeColumns\");\n\t\tthis.rowSelection = this.options(\"selectableRangeRows\");\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-mousedown\", this.handleColumnMouseDown.bind(this));\n\t\tthis.subscribe(\"column-mousemove\", this.handleColumnMouseMove.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.handleColumnResized.bind(this));\n\t\tthis.subscribe(\"column-moving\", this.handleColumnMoving.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.handleColumnMoved.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.updateHeaderColumn.bind(this));\n\t\t\n\t\tthis.subscribe(\"cell-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.renderCell.bind(this));\n\t\tthis.subscribe(\"cell-mousedown\", this.handleCellMouseDown.bind(this));\n\t\tthis.subscribe(\"cell-mousemove\", this.handleCellMouseMove.bind(this));\n\t\tthis.subscribe(\"cell-click\", this.handleCellClick.bind(this));\n\t\tthis.subscribe(\"cell-editing\", this.handleEditingCell.bind(this));\n\t\t\n\t\tthis.subscribe(\"page-changed\", this.redraw.bind(this));\n\t\t\n\t\tthis.subscribe(\"scroll-vertical\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.layoutChange.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-destroy\", this.tableDestroyed.bind(this));\n\t\tthis.subscribe(\"data-processed\", this.resetRanges.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-layout\", this.layoutElement.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.redraw.bind(this));\n\t\tthis.subscribe(\"table-destroy\", this.tableDestroyed.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-editor-clear\", this.finishEditingCell.bind(this));\n\t\tthis.subscribe(\"edit-blur\", this.restoreFocus.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.keyNavigate.bind(this, \"up\"));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.keyNavigate.bind(this, \"down\"));\n\t\tthis.subscribe(\"keybinding-nav-range\", this.keyNavigateRange.bind(this));\n\t}\n\t\n\t\n\tinitializeColumn(column) {\n\t\tif(this.columnSelection && column.definition.headerSort && this.options(\"headerSortClickElement\") !== \"icon\"){\n\t\t\tconsole.warn(\"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\");\n\t\t}\n\t\t\n\t\tif (column.modules.edit) {\n\t\t\t// Block editor from taking action so we can trigger edit by\n\t\t\t// double clicking.\n\t\t\t// column.modules.edit.blocked = true;\n\t\t}\n\t}\n\t\n\tupdateHeaderColumn(){\n\t\tvar frozenCols;\n\n\t\tif(this.rowSelection){\n\t\t\tthis.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0];\n\t\t\t\n\t\t\tif(this.rowHeader){\n\t\t\t\tthis.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + \" tabulator-range-row-header\";\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.headerSort){\n\t\t\t\t\tconsole.warn(\"Using column headerSort with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.editor){\n\t\t\t\t\tconsole.warn(\"Using column editor with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//warn if invalid frozen column configuration detected\n\t\tif(this.table.modules.frozenColumns && this.table.modules.frozenColumns.active){\n\t\t\tfrozenCols = this.table.modules.frozenColumns.getFrozenColumns();\n\n\t\t\tif(frozenCols.length > 1 || (frozenCols.length === 1 && frozenCols[0] !== this.rowHeader)){\n\t\t\t\tconsole.warn(\"Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Table Functions   ///////\n\t///////////////////////////////////\n\t\n\tgetRanges(){\n\t\treturn this.ranges.map((range) => range.getComponent());\n\t}\n\t\n\tgetRangesData() {\n\t\treturn this.ranges.map((range) => range.getData());\n\t}\n\t\n\taddRangeFromComponent(start, end){\n\t\tstart = start ? start._cell : null;\n\t\tend = end ? end._cell : null;\n\t\t\n\t\treturn this.addRange(start, end);\n\t}\n\t\n\t///////////////////////////////////\n\t/////// Component Functions ///////\n\t///////////////////////////////////\n\t\n\tcellGetRanges(cell){\n\t\tvar ranges = [];\n\t\t\n\t\tif (cell.column === this.rowHeader) {\n\t\t\tranges = this.ranges.filter((range) => range.occupiesRow(cell.row));\n\t\t} else {\n\t\t\tranges = this.ranges.filter((range) => range.occupies(cell));\n\t\t}\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\trowGetRanges(row){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesRow(row));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\tcolGetRanges(col){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesColumn(col));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Event Handlers /////////\n\t///////////////////////////////////\n\t\n\t_handleMouseUp(e){\n\t\tthis.mousedown = false;\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t}\n\t\n\t_handleKeyDown(e) {\n\t\tif (!this.blockKeydown && (!this.table.modules.edit || (this.table.modules.edit && !this.table.modules.edit.currentCell))) {\n\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t// is editing a cell?\n\t\t\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.modules.edit.editCell(this.getActiveCell());\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tif ((e.key === \"Backspace\" || e.key === \"Delete\") && this.options(\"selectableRangeClearCells\")) {\n\t\t\t\tif(this.activeRange){\n\t\t\t\t\tthis.activeRange.clearValues();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeFocus(cell){\n\t\tvar range;\n\n\t\tthis.restoreFocus();\n\t\t\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\t\n\trestoreFocus(element){\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\treturn true;\n\t}\n\t\n\t///////////////////////////////////\n\t////// Column Functionality ///////\n\t///////////////////////////////////\n\t\n\thandleColumnResized(column) {\n\t\tvar selected;\n\t\t\n\t\tif (this.selecting !== \"column\" && this.selecting !== \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tselected = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (!selected) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.ranges.forEach((range) => {\n\t\t\tvar selectedColumns = range.getColumns(true);\n\t\t\t\n\t\t\tselectedColumns.forEach((selectedColumn) => {\n\t\t\t\tif (selectedColumn !== column) {\n\t\t\t\t\tselectedColumn.setWidth(column.width);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t\n\thandleColumnMoving(_event, column) {\n\t\tthis.resetRanges().setBounds(column);\n\t\tthis.overlay.style.visibility = \"hidden\";\n\t}\n\n\thandleColumnMoved(from, _to, _after) {\n\t\tthis.activeRange.setBounds(from);\n\t\tthis.layoutElement();\n\t}\n\n\thandleColumnMouseDown(event, column) {\n\t\tif (event.button === 2 && (this.selecting === \"column\" || this.selecting === \"all\") && this.activeRange.occupiesColumn(column)) {\n\t\t\treturn;\n\t\t}\n\n\t\t//If columns are movable, allow dragging columns only if they are not\n\t\t//selected. Dragging selected columns should move the columns instead.\n\t\tif(this.table.options.movableColumns && this.selecting === \"column\" && this.activeRange.occupiesColumn(column)){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, column);\n\t}\n\t\n\thandleColumnMouseMove(e, column) {\n\t\tif (column === this.rowHeader || !this.mousedown || this.selecting === 'all') {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, column, true);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Cell Functionality ///////\n\t///////////////////////////////////\n\t\n\trenderCell(cell) {\n\t\tvar el = cell.getElement(),\n\t\trangeIdx = this.ranges.findIndex((range) => range.occupies(cell));\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", rangeIdx !== -1);\n\t\tel.classList.toggle(\"tabulator-range-only-cell-selected\", this.ranges.length === 1 && this.ranges[0].atTopLeft(cell) &&\tthis.ranges[0].atBottomRight(cell));\n\t\t\n\t\tel.dataset.range = rangeIdx;\n\t}\n\t\n\thandleCellMouseDown(event, cell) {\n\t\tif (event.button === 2 && (this.activeRange.occupies(cell) || ((this.selecting === \"row\" || this.selecting === \"all\") && this.activeRange.occupiesRow(cell.row)))) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, cell);\n\t}\n\t\n\thandleCellMouseMove(e, cell) {\n\t\tif (!this.mousedown || this.selecting === \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, cell, true);\n\t}\n\t\n\thandleCellClick(e, cell){\n\t\tthis.initializeFocus(cell);\n\t}\n\t\n\thandleEditingCell(cell) {\n\t\tif(this.activeRange){\n\t\t\tthis.activeRange.setBounds(cell);\n\t\t}\n\t}\n\t\n\tfinishEditingCell() {\n\t\tthis.blockKeydown = true;\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.blockKeydown = false;\n\t\t}, 10);\n\t}\n\t\n\t///////////////////////////////////\n\t///////     Navigation      ///////\n\t///////////////////////////////////\n\t\n\tkeyNavigate(dir, e){\n\t\tif(this.navigate(false, false, dir)){\n\t\t\t// e.preventDefault();\n\t\t}\n\t\te.preventDefault();\n\t}\n\t\n\tkeyNavigateRange(e, dir, jump, expand){\n\t\tif(this.navigate(jump, expand, dir)){\n\t\t\t// e.preventDefault();\n\t\t}\n\t\te.preventDefault();\n\t}\n\t\n\tnavigate(jump, expand, dir) {\n\t\tvar moved = false,\n\t\trange, rangeEdge, prevRect, nextRow, nextCol, row, column,\n\t\trowRect, rowManagerRect, columnRect, columnManagerRect;\n\t\t\n\t\t// Don't navigate while editing\n\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// If there are more than 1 range, use the active range and destroy the others\n\t\tif (this.ranges.length > 1) {\n\t\t\tthis.ranges = this.ranges.filter((range) => {\n\t\t\t\tif (range === this.activeRange) {\n\t\t\t\t\trange.setEnd(range.start.row, range.start.col);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\trange.destroy();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\t\n\t\trange = this.activeRange;\n\t\tprevRect = {\n\t\t\ttop: range.top,\n\t\t\tbottom: range.bottom,\n\t\t\tleft: range.left,\n\t\t\tright: range.right\n\t\t};\n\t\t\n\t\trangeEdge = expand ? range.end : range.start;\n\t\tnextRow = rangeEdge.row;\n\t\tnextCol = rangeEdge.col;\n\t\t\n\t\tif(jump){\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = this.findJumpCellLeft(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = this.findJumpCellRight(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = this.findJumpCellUp(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = this.findJumpCellDown(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}else{\n\t\t\tif(expand){\n\t\t\t\tif ((this.selecting === 'row' && (dir === 'left' || dir === 'right')) || (this.selecting === 'column' && (dir === 'up' || dir === 'down'))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = Math.max(nextCol - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = Math.min(nextCol + 1, this.getTableColumns().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = Math.max(nextRow - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = Math.min(nextRow + 1, this.getTableRows().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.rowHeader && nextCol === 0) {\n\t\t\tnextCol = 1;\n\t\t}\n\t\t\n\t\tif(!expand){\n\t\t\trange.setStart(nextRow, nextCol);\n\t\t}\n\t\t\n\t\trange.setEnd(nextRow, nextCol);\n\t\t\n\t\tif(!expand){\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\n\t\tmoved = prevRect.top !== range.top || prevRect.bottom !== range.bottom || prevRect.left !== range.left || prevRect.right !== range.right;\n\n\t\tif (moved) {\n\t\t\trow = this.getRowByRangePos(range.end.row);\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col);\n\t\t\trowRect = row.getElement().getBoundingClientRect();\n\t\t\tcolumnRect = column.getElement().getBoundingClientRect();\n\t\t\trowManagerRect = this.table.rowManager.getElement().getBoundingClientRect();\n\t\t\tcolumnManagerRect = this.table.columnManager.getElement().getBoundingClientRect();\n\t\t\t\n\t\t\tif(!(rowRect.top >= rowManagerRect.top && rowRect.bottom <= rowManagerRect.bottom)){\n\t\t\t\tif(row.getElement().parentNode && column.getElement().parentNode){\n\t\t\t\t\t// Use faster autoScroll when the elements are on the DOM\n\t\t\t\t\tthis.autoScroll(range, row.getElement(), column.getElement());\n\t\t\t\t}else{\n\t\t\t\t\trow.getComponent().scrollTo(undefined, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!(columnRect.left >= columnManagerRect.left + this.getRowHeaderWidth() && columnRect.right <= columnManagerRect.right)){\n\t\t\t\tif(row.getElement().parentNode && column.getElement().parentNode){\n\t\t\t\t\t// Use faster autoScroll when the elements are on the DOM\n\t\t\t\t\tthis.autoScroll(range, row.getElement(), column.getElement());\n\t\t\t\t}else{\n\t\t\t\t\tcolumn.getComponent().scrollTo(undefined, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.layoutElement();\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\trangeRemoved(removed){\n\t\tthis.ranges = this.ranges.filter((range) => range !== removed);\n\t\t\n\t\tif(this.activeRange === removed){\n\t\t\tif(this.ranges.length){\n\t\t\t\tthis.activeRange = this.ranges[this.ranges.length - 1];\n\t\t\t}else{\n\t\t\t\tthis.addRange();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.layoutElement();\n\t}\n\t\n\tfindJumpRow(column, rows, reverse, emptyStart, emptySide){\n\t\tif(reverse){\n\t\t\trows = rows.reverse();\n\t\t}\n\n\t\treturn this.findJumpItem(emptyStart, emptySide, rows, function(row){return row.getData()[column.getField()];});\n\t}\n\t\n\tfindJumpCol(row, columns, reverse, emptyStart, emptySide){\n\t\tif(reverse){\n\t\t\tcolumns = columns.reverse();\n\t\t}\n\n\t\treturn this.findJumpItem(emptyStart, emptySide, columns, function(column){return row.getData()[column.getField()];});\n\t}\n\n\tfindJumpItem(emptyStart, emptySide, items, valueResolver){\n\t\tvar nextItem;\n\n\t\tfor(let currentItem of items){\n\t\t\tlet currentValue = valueResolver(currentItem);\n\t\t\t\n\t\t\tif(emptyStart){\n\t\t\t\tnextItem = currentItem;\n\t\t\t\tif(currentValue){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(emptySide){\n\t\t\t\t\tnextItem = currentItem;\n\t\t\t\t\t\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tnextItem = currentItem;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextItem;\n\t}\n\n\tfindJumpCellLeft(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcolumns = this.getTableColumns(),\n\t\tisStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()]),\n\t\tisLeftOfStartingCellEmpty = columns[colPos - 1] ? this.isEmpty(row.getData()[columns[colPos - 1].getField()]) : false,\n\t\ttargetCols = this.rowHeader ? columns.slice(1, colPos) : columns.slice(0, colPos),\n\t\tjumpCol = this.findJumpCol(row, targetCols, true, isStartingCellEmpty, isLeftOfStartingCellEmpty);\n\t\t\n\t\tif(jumpCol){\n\t\t\treturn jumpCol.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn colPos;\n\t}\n\t\n\tfindJumpCellRight(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcolumns = this.getTableColumns(),\n\t\tisStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()]),\n\t\tisRightOfStartingCellEmpty = columns[colPos + 1] ? this.isEmpty(row.getData()[columns[colPos + 1].getField()]) : false,\n\t\tjumpCol = this.findJumpCol(row, columns.slice(colPos + 1, columns.length), false, isStartingCellEmpty, isRightOfStartingCellEmpty);\n\t\t\n\t\tif(jumpCol){\n\t\t\treturn jumpCol.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn colPos;\n\t}\n\t\n\tfindJumpCellUp(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\trows = this.getTableRows(),\n\t\tisStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()]),\n\t\tisTopOfStartingCellEmpty = rows[rowPos - 1] ? this.isEmpty(rows[rowPos - 1].getData()[column.getField()]) : false,\n\t\tjumpRow = this.findJumpRow(column, rows.slice(0, rowPos), true, isStartingCellEmpty, isTopOfStartingCellEmpty);\n\t\t\n\t\tif(jumpRow){\n\t\t\treturn jumpRow.position - 1;\n\t\t}\n\t\t\n\t\treturn rowPos;\n\t}\n\t\n\tfindJumpCellDown(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\trows = this.getTableRows(),\n\t\tisStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()]),\n\t\tisBottomOfStartingCellEmpty = rows[rowPos + 1] ? this.isEmpty(rows[rowPos + 1].getData()[column.getField()]) : false,\n\t\tjumpRow = this.findJumpRow(column, rows.slice(rowPos + 1, rows.length), false, isStartingCellEmpty, isBottomOfStartingCellEmpty);\n\t\t\n\t\tif(jumpRow){\n\t\t\treturn jumpRow.position - 1;\n\t\t}\n\t\t\n\t\treturn rowPos;\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Selection      ///////\n\t///////////////////////////////////\n\tnewSelection(event, element) {\n\t\tvar range;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(!this.columnSelection){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (element === this.rowHeader) {\n\t\t\t\trange = this.resetRanges();\n\t\t\t\tthis.selecting = \"all\";\n\t\t\t\t\n\t\t\t\tvar topLeftCell, bottomRightCell = this.getCell(-1, -1);\n\t\t\t\t\n\t\t\t\tif(this.rowHeader){\n\t\t\t\t\ttopLeftCell = this.getCell(0, 1);\n\t\t\t\t}else{\n\t\t\t\t\ttopLeftCell = this.getCell(0, 0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trange.setBounds(topLeftCell, bottomRightCell);\t\t\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selecting = \"column\";\n\t\t\t}\n\t\t} else if (element.column === this.rowHeader) {\n\t\t\tthis.selecting = \"row\";\n\t\t} else {\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\t\t\n\t\tif (event.shiftKey) {\n\t\t\tthis.activeRange.setBounds(false, element);\n\t\t} else if (event.ctrlKey) {\n\t\t\tthis.addRange().setBounds(element);\n\t\t} else {\n\t\t\tthis.resetRanges().setBounds(element);\n\t\t}\n\t}\n\t\n\tautoScroll(range, row, column) {\n\t\tvar tableHolder = this.table.rowManager.element,\n\t\trect, view, withinHorizontalView, withinVerticalView;\n\t\t\n\t\tif (typeof row === 'undefined') {\n\t\t\trow = this.getRowByRangePos(range.end.row).getElement();\n\t\t}\n\t\t\n\t\tif (typeof column === 'undefined') {\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col).getElement();\n\t\t}\n\t\t\n\t\trect = {\n\t\t\tleft: column.offsetLeft,\n\t\t\tright: column.offsetLeft + column.offsetWidth,\n\t\t\ttop: row.offsetTop,\n\t\t\tbottom: row.offsetTop + row.offsetHeight,\n\t\t};\n\t\t\n\t\tview = {\n\t\t\tleft: tableHolder.scrollLeft + this.getRowHeaderWidth(),\n\t\t\tright: Math.ceil(tableHolder.scrollLeft + tableHolder.clientWidth),\n\t\t\ttop: tableHolder.scrollTop,\n\t\t\tbottom:\ttableHolder.scrollTop +\ttableHolder.offsetHeight - this.table.rowManager.scrollbarWidth,\n\t\t};\n\t\t\n\t\twithinHorizontalView = view.left < rect.left &&\trect.left < view.right && view.left < rect.right &&\trect.right < view.right;\n\t\t\n\t\twithinVerticalView = view.top < rect.top &&\trect.top < view.bottom && view.top < rect.bottom &&\trect.bottom < view.bottom;\n\t\t\n\t\tif (!withinHorizontalView) {\n\t\t\tif (rect.left < view.left) {\n\t\t\t\ttableHolder.scrollLeft = rect.left - this.getRowHeaderWidth();\n\t\t\t} else if (rect.right > view.right) {\n\t\t\t\ttableHolder.scrollLeft = Math.min(rect.right - tableHolder.clientWidth, rect.left - this.getRowHeaderWidth());\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!withinVerticalView) {\n\t\t\tif (rect.top < view.top) {\n\t\t\t\ttableHolder.scrollTop = rect.top;\n\t\t\t} else if (rect.bottom > view.bottom) {\n\t\t\t\ttableHolder.scrollTop = rect.bottom - tableHolder.clientHeight;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////       Layout        ///////\n\t///////////////////////////////////\n\t\n\tlayoutChange(){\n\t\tthis.overlay.style.visibility = \"hidden\";\n\t\tclearTimeout(this.layoutChangeTimeout);\n\t\tthis.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);\n\t}\n\t\n\tredraw(force) {\n\t\tif (force) {\n\t\t\tthis.selecting = 'cell';\n\t\t\tthis.resetRanges();\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\t\n\tlayoutElement(visibleRows) {\n\t\tvar rows;\n\t\t\n\t\tif (visibleRows) {\n\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t} else {\n\t\t\trows = this.table.rowManager.getRows();\n\t\t}\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\") {\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\trow.cells.forEach((cell) => this.renderCell(cell));\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.getTableColumns().forEach((column) => {\n\t\t\tthis.layoutColumn(column);\n\t\t});\n\t\t\n\t\tthis.layoutRanges();\n\t}\n\t\n\tlayoutRow(row) {\n\t\tvar el = row.getElement(),\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesRow(row));\n\t\t\n\t\tif (this.selecting === \"row\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutColumn(column) {\n\t\tvar el = column.getElement(),\t\t\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (this.selecting === \"column\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutRanges() {\n\t\tvar activeCell, activeCellEl, activeRowEl;\n\t\t\n\t\tif (!this.table.initialized) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tactiveCell = this.getActiveCell();\n\t\t\n\t\tif (!activeCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tactiveCellEl = activeCell.getElement();\n\t\tactiveRowEl = activeCell.row.getElement();\n\n\t\tif(this.table.rtl){\n\t\t\tthis.activeRangeCellElement.style.right = activeRowEl.offsetWidth - activeCellEl.offsetLeft - activeCellEl.offsetWidth + \"px\";\n\t\t}else{\n\t\t\tthis.activeRangeCellElement.style.left = activeRowEl.offsetLeft + activeCellEl.offsetLeft + \"px\";\n\t\t}\n\n\t\tthis.activeRangeCellElement.style.top =\tactiveRowEl.offsetTop + \"px\";\n\t\tthis.activeRangeCellElement.style.width = activeCellEl.offsetWidth + \"px\";\n\t\tthis.activeRangeCellElement.style.height =  activeRowEl.offsetHeight  + \"px\";\n\t\t\n\t\tthis.ranges.forEach((range) => range.layout());\n\t\t\n\t\tthis.overlay.style.visibility = \"visible\";\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////  Helper Functions   ///////\n\t///////////////////////////////////\t\n\t\n\tgetCell(rowIdx, colIdx) {\n\t\tvar row;\n\t\t\n\t\tif (colIdx < 0) {\n\t\t\tcolIdx = this.getTableColumns().length + colIdx;\n\t\t\tif (colIdx < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (rowIdx < 0) {\n\t\t\trowIdx = this.getTableRows().length + rowIdx;\n\t\t}\n\t\t\n\t\trow = this.table.rowManager.getRowFromPosition(rowIdx + 1);\n\t\t\n\t\treturn row ? row.getCells(false, true).filter((cell) => cell.column.visible)[colIdx] : null;\n\t}\n\t\n\t\n\tgetActiveCell() {\n\t\treturn this.getCell(this.activeRange.start.row, this.activeRange.start.col);\n\t}\n\t\n\tgetRowByRangePos(pos) {\n\t\treturn this.getTableRows()[pos];\n\t}\n\t\n\tgetColumnByRangePos(pos) {\n\t\treturn this.getTableColumns()[pos];\n\t}\n\t\n\tgetTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\tgetTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\taddRange(start, end) {\n\t\tvar  range;\n\t\t\n\t\tif(this.maxRanges !== true && this.ranges.length >= this.maxRanges){\n\t\t\tthis.ranges.shift().destroy();\n\t\t}\n\t\t\n\t\trange = new Range(this.table, this, start, end);\n\t\t\n\t\tthis.activeRange = range;\n\t\tthis.ranges.push(range);\n\t\tthis.rangeContainer.appendChild(range.element);\n\t\t\n\t\treturn range;\n\t}\n\t\n\tresetRanges() {\n\t\tvar range, cell, visibleCells;\n\t\t\n\t\tthis.ranges.forEach((range) => range.destroy());\n\t\tthis.ranges = [];\n\t\t\n\t\trange = this.addRange();\n\t\t\n\t\tif(this.table.rowManager.activeRows.length){\n\t\t\tvisibleCells = this.table.rowManager.activeRows[0].cells.filter((cell) => cell.column.visible);\n\t\t\tcell = visibleCells[this.rowHeader ? 1 : 0];\n\n\t\t\tif(cell){\n\t\t\t\trange.setBounds(cell);\n\t\t\t\tif(this.options(\"selectableRangeAutoFocus\")){\n\t\t\t\t\tthis.initializeFocus(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn range;\n\t}\n\t\n\ttableDestroyed(){\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t\tthis.table.rowManager.element.removeEventListener(\"keydown\", this.keyDownEvent);\n\t}\n\t\n\tselectedRows(component) {\n\t\treturn component ? this.activeRange.getRows().map((row) => row.getComponent()) : this.activeRange.getRows();\n\t}\n\t\n\tselectedColumns(component) {\n\t\treturn component ? this.activeRange.getColumns().map((col) => col.getComponent()) : this.activeRange.getColumns();\n\t}\n\n\tgetRowHeaderWidth(){\n\t\tif(!this.rowHeader){\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.rowHeader.getElement().offsetWidth;\n\t}\n\n\tisEmpty(value) {\n\t\treturn value === null || value === undefined || value === \"\";\n\t}\n}\n", "//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}", "//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}", "//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else{\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else{\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}", "import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}", "import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}", "//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}", "import Helpers from '../../../../core/tools/Helpers.js';\n\n//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0,\n\ttable = this.table,\n\tvalueMap;\n\n\tif(params.valueMap){\n\t\tif(typeof params.valueMap === \"string\"){\n\t\t\tvalueMap = function(value){\n\t\t\t\treturn value.map((item) => {\n\t\t\t\t\treturn Helpers.retrieveNestedData(table.options.nestedFieldSeparator, params.valueMap, item);\n\t\t\t\t});\n\t\t\t};\n\t\t}else{\n\t\t\tvalueMap = params.valueMap;\n\t\t}\n\t}\n\n\tfunction calc(value){\n\t\tvar result;\n\t\t\n\t\tif(valueMap){\n\t\t\tvalue = valueMap(value);\n\t\t}\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\t\t\t\tresult = value.join(\"\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else{\n\t\tif(type === \"string\"){\n\t\t\treturn String(calc(a)).toLowerCase().localeCompare(String(calc(b)).toLowerCase());\n\t\t}else{\n\t\t\treturn calc(b) - calc(a);\n\t\t}\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}", "//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}", "//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}", "import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};", "import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nexport default class Sort extends Module{\n\n\tstatic moduleName = \"sort\";\n\n\t//load defaults\n\tstatic sorters = defaultSorters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\t\t\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\t\t\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\t\t\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\t\t\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\t\t\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\t\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\t\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\t\t\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\t\t\n\t\tparams.sort = sorters;\n\t\t\n\t\treturn params;\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\t\t\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\t\t\n\t\tif(column.definition.headerSort !== false){\n\t\t\t\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\t\t\t\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\t\t\t\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\t\t\t\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\t\t\t\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t\n\t\t\tif(this.table.options.headerSortClickElement === \"icon\"){\n\t\t\t\tarrowEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\t\t\t\t\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\t\t\t\t\t\t\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\t\t\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\t\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\t\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\t\t\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn sorters;\n\t}\n\t\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\t\t\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\t\t\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\t\t\t\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tself.sortList = newSortList;\n\t\t\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\t\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\t\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\t\t\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\t\t\t\n\t\t\tif(field){\n\t\t\t\t\n\t\t\t\tvalue = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Sort.sorters[sorter];\n\t}\n\t\n\t//work through sort list sorting data\n\tsort(data, sortOnly){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\t\t\n\t\tif(!sortOnly) {\n\t\t\tself.clearColumnHeaders();\n\t\t}\n\t\t\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\t\t\t\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\t\t\t\t\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\t\t\t\t\t\n\t\t\t\t\tif(sortObj){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\t\t\t\t\t\t\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!sortOnly) {\n\t\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\t\t\t\n\t\t}else if(!sortOnly) {\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\t\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\t\t\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\t\t\t\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else{\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\t\t\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\t\t\t\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\t\t\t\t\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\t\t\t\t\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn result;\n\t\t});\n\t}\n\t\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\t\t\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\t\t\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\t\t\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\t\t\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\t\t\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}", "export default class GridCalculator{\r\n\tconstructor(columns, rows){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.rowCount = rows;\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t}\r\n\r\n\tgenColumns(data){\r\n\t\tvar colCount = Math.max(this.columnCount, Math.max(...data.map(item => item.length)));\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\r\n\t\tfor(let i = 1; i <= colCount; i++){\r\n\t\t\tthis.incrementChar(this.columnString.length - 1);\r\n\t\t\tthis.columns.push(this.columnString.join(\"\"));\r\n\t\t}\r\n\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tgenRows(data){\r\n\t\tvar rowCount = Math.max(this.rowCount, data.length);\r\n\r\n\t\tthis.rows = [];\r\n\r\n\t\tfor(let i = 1; i <= rowCount; i++){\r\n\t\t\tthis.rows.push(i);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.rows;\r\n\t}\r\n\r\n\tincrementChar(i){\r\n\t\tlet char = this.columnString[i];\r\n\r\n\t\tif(char){\r\n\t\t\tif(char !== \"Z\"){\r\n\t\t\t\tthis.columnString[i] = String.fromCharCode(this.columnString[i].charCodeAt(0) + 1);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columnString[i] = \"A\";\r\n\t\t\t\t\r\n\t\t\t\tif(i){\r\n\t\t\t\t\tthis.incrementChar(i-1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.columnString.push(\"A\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.columnString.push(\"A\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetRowCount(count){\r\n\t\tthis.rowCount = count;\r\n\t}\r\n\r\n\tsetColumnCount(count){\r\n\t\tthis.columnCount = count;\r\n\t}\r\n}", "export default class SheetComponent {\r\n\tconstructor(sheet) {\r\n\t\tthis._sheet = sheet;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function (target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn target._sheet.table.componentFunctionBinder.handle(\"sheet\", target._sheet, name);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tgetTitle(){\r\n\t\treturn this._sheet.title;\r\n\t}\r\n\r\n\tgetKey(){\r\n\t\treturn this._sheet.key;\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._sheet.getDefinition();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this._sheet.getData();\r\n\t}\r\n\r\n\tsetData(data) {\r\n\t\treturn this._sheet.setData(data);\r\n\t}\r\n\r\n\tclear(){\r\n\t\treturn this._sheet.clear();\r\n\t}\r\n\r\n\tremove(){\r\n\t\treturn this._sheet.remove();\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\treturn this._sheet.active();\r\n\t}\r\n\r\n\tsetTitle(title){\r\n\t\treturn this._sheet.setTitle(title);\r\n\t}\r\n\r\n\tsetRows(rows){\r\n\t\treturn this._sheet.setRows(rows);\r\n\t}\r\n\r\n\tsetColumns(columns){\r\n\t\treturn this._sheet.setColumns(columns);\r\n\t}\r\n}", "import CoreFeature from '../../core/CoreFeature.js';\r\nimport GridCalculator from \"./GridCalculator\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Sheet extends CoreFeature{\r\n\tconstructor(spreadsheetManager, definition) {\r\n\t\tsuper(spreadsheetManager.table);\r\n\t\t\r\n\t\tthis.spreadsheetManager = spreadsheetManager;\r\n\t\tthis.definition = definition;\r\n\t\t\r\n\t\tthis.title = this.definition.title || \"\";\r\n\t\tthis.key = this.definition.key || this.definition.title;\r\n\t\tthis.rowCount = this.definition.rows;\r\n\t\tthis.columnCount = this.definition.columns;\r\n\t\tthis.data = this.definition.data || [];\r\n\t\tthis.element = null;\r\n\t\tthis.isActive = false;\r\n\t\t\r\n\t\tthis.grid = new GridCalculator(this.columnCount, this.rowCount);\r\n\t\t\r\n\t\tthis.defaultColumnDefinition = {width:100, headerHozAlign:\"center\", headerSort:false};\r\n\t\tthis.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options(\"spreadsheetColumnDefinition\"));\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\tthis.rowDefs = [];\r\n\t\tthis.columnFields = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t\t\r\n\t\tthis.scrollTop = null;\r\n\t\tthis.scrollLeft = null;\r\n\t\t\r\n\t\tthis.initialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetAdded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Initialization //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializeElement();\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\treinitialize(){\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\tinitializeElement(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab\");\r\n\t\tthis.element.innerText = this.title;\r\n\t\t\r\n\t\tthis.element.addEventListener(\"click\", () => {\r\n\t\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeColumns(){\r\n\t\tthis.grid.setColumnCount(this.columnCount);\r\n\t\tthis.columnFields = this.grid.genColumns(this.data);\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\t\r\n\t\tthis.columnFields.forEach((ref) => {\r\n\t\t\tvar def = Object.assign({}, this.columnDefinition);\r\n\t\t\tdef.field = ref;\r\n\t\t\tdef.title = ref;\r\n\t\t\t\r\n\t\t\tthis.columnDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeRows(){\r\n\t\tvar refs;\r\n\t\t\r\n\t\tthis.grid.setRowCount(this.rowCount);\r\n\t\t\r\n\t\trefs = this.grid.genRows(this.data);\r\n\t\t\r\n\t\tthis.rowDefs = [];\r\n\t\t\r\n\t\trefs.forEach((ref, i) => {\r\n\t\t\tvar def = {\"_id\":ref};\r\n\t\t\tvar data = this.data[i];\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((val, j) => {\r\n\t\t\t\t\tvar field = this.columnFields[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\tdef[field] = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.rowDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tunload(){\r\n\t\tthis.isActive = false;\r\n\t\tthis.scrollTop = this.table.rowManager.scrollTop;\r\n\t\tthis.scrollLeft = this.table.rowManager.scrollLeft;\r\n\t\tthis.data = this.getData(true);\r\n\t\tthis.element.classList.remove(\"tabulator-spreadsheet-tab-active\");\r\n\t}\r\n\t\r\n\tload(){\r\n\t\t\r\n\t\tvar wasInactive = !this.isActive;\r\n\t\t\r\n\t\tthis.isActive = true;\r\n\t\tthis.table.blockRedraw();\r\n\t\tthis.table.setData([]);\r\n\t\tthis.table.setColumns(this.columnDefs);\r\n\t\tthis.table.setData(this.rowDefs);\r\n\t\tthis.table.restoreRedraw();\r\n\t\t\r\n\t\tif(wasInactive && this.scrollTop !== null){\r\n\t\t\tthis.table.rowManager.element.scrollLeft = this.scrollLeft;\r\n\t\t\tthis.table.rowManager.element.scrollTop = this.scrollTop;\r\n\t\t}\r\n\t\t\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab-active\");\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetLoaded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Helper Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tgetComponent(){\r\n\t\treturn new SheetComponent(this);\r\n\t}\r\n\t\r\n\tgetDefinition(){\r\n\t\treturn {\r\n\t\t\ttitle:this.title,\r\n\t\t\tkey:this.key,\r\n\t\t\trows:this.rowCount,\r\n\t\t\tcolumns:this.columnCount,\r\n\t\t\tdata:this.getData(),\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetData(full){\r\n\t\tvar output = [], \r\n\t\trowWidths,\r\n\t\toutputWidth, outputHeight;\r\n\t\t\r\n\t\t//map data to array format\r\n\t\tthis.rowDefs.forEach((rowData) => {\r\n\t\t\tvar row = [];\r\n\t\t\t\r\n\t\t\tthis.columnFields.forEach((field) => {\r\n\t\t\t\trow.push(rowData[field]);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\toutput.push(row);\r\n\t\t});\r\n\t\t\r\n\t\t//trim output\r\n\t\tif(!full && !this.options(\"spreadsheetOutputFull\")){\r\n\t\t\t\r\n\t\t\t//calculate used area of data\r\n\t\t\trowWidths = output.map(row => row.findLastIndex(val => typeof val !== 'undefined') + 1);\r\n\t\t\toutputWidth = Math.max(...rowWidths);\r\n\t\t\toutputHeight = rowWidths.findLastIndex(width => width > 0) + 1;\r\n\t\t\t\r\n\t\t\toutput = output.slice(0, outputHeight);\r\n\t\t\toutput = output.map(row => row.slice(0, outputWidth));\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tsetData(data){\r\n\t\tthis.data = data;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\t\r\n\tsetTitle(title){\r\n\t\tthis.title = title;\r\n\t\tthis.element.innerText = title;\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t}\r\n\t\r\n\tsetRows(rows){\r\n\t\tthis.rowCount = rows;\r\n\t\tthis.initializeRows();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetColumns(columns){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tthis.spreadsheetManager.removeSheet(this);\r\n\t}\r\n\t\r\n\tdestroy(){\r\n\t\tif(this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetRemoved\", this.getComponent());\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t}\r\n}", "import Module from '../../core/Module.js';\r\nimport Sheet from \"./Sheet\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Spreadsheet extends Module{\r\n\t\r\n\tstatic moduleName = \"spreadsheet\";\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.element = null;\r\n\t\t\r\n\t\tthis.registerTableOption(\"spreadsheet\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetRows\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumns\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumnDefinition\", {}); \r\n\t\tthis.registerTableOption(\"spreadsheetOutputFull\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetData\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheets\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabs\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabsElement\", false); \r\n\t\t\r\n\t\tthis.registerTableFunction(\"setSheets\", this.setSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"addSheet\", this.addSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheets\", this.getSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetDefinitions\", this.getSheetDefinitions.bind(this));\r\n\t\tthis.registerTableFunction(\"setSheetData\", this.setSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheet\", this.getSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetData\", this.getSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"clearSheet\", this.clearSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"removeSheet\", this.removeSheetFunc.bind(this));\r\n\t\tthis.registerTableFunction(\"activeSheet\", this.activeSheetFunc.bind(this));\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t////// Module Initialization //////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.options(\"spreadsheet\")){\t\r\n\t\t\tthis.subscribe(\"table-initialized\", this.tableInitialized.bind(this));\r\n\t\t\tthis.subscribe(\"data-loaded\", this.loadRemoteData.bind(this));\r\n\t\t\t\r\n\t\t\tthis.table.options.index = \"_id\";\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetData\") && this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tconsole.warn(\"You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData\");\r\n\t\t\t\t\r\n\t\t\t\tthis.table.options.spreadsheetData = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.compatibilityCheck();\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheetTabs\")){\r\n\t\t\t\tthis.initializeTabset();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcompatibilityCheck(){\r\n\t\tif(this.options(\"data\")){\r\n\t\t\tconsole.warn(\"Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"pagination\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the pagination module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"groupBy\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the row grouping module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"responsiveCollapse\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the responsive collapse module\");\r\n\t\t}\r\n\t}\r\n\tinitializeTabset(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tabs\");\r\n\t\tvar altContainer = this.options(\"spreadsheetSheetTabsElement\");\r\n\t\t\r\n\t\tif(altContainer && !(altContainer instanceof HTMLElement)){\r\n\t\t\taltContainer = document.querySelector(altContainer);\r\n\t\t\t\r\n\t\t\tif(!altContainer){\r\n\t\t\t\tconsole.warn(\"Unable to find element matching spreadsheetSheetTabsElement selector:\", this.options(\"spreadsheetSheetTabsElement\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(altContainer){\r\n\t\t\taltContainer.appendChild(this.element);\r\n\t\t}else{\r\n\t\t\tthis.footerAppend(this.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttableInitialized(){\r\n\t\tif(this.sheets.length){\r\n\t\t\tthis.loadSheet(this.sheets[0]);\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tthis.loadSheets(this.options(\"spreadsheetSheets\"));\r\n\t\t\t}else if(this.options(\"spreadsheetData\")){\r\n\t\t\t\tthis.loadData(this.options(\"spreadsheetData\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/////////// Ajax Parsing //////////\r\n\t///////////////////////////////////\r\n\r\n\tloadRemoteData(data, data1, data2){\r\n\t\tconsole.log(\"data\", data, data1, data2);\r\n\r\n\t\tif(Array.isArray(data)){\r\n\r\n\t\t\tthis.table.dataLoader.clearAlert();\r\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\r\n\r\n\t\t\tif(!data.length || Array.isArray(data[0])){\r\n\t\t\t\tthis.loadData(data);\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadSheets(data);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Sheet Management ////////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tloadData(data){\r\n\t\tvar def = {\r\n\t\t\tdata:data,\r\n\t\t};\r\n\t\t\r\n\t\tthis.loadSheet(this.newSheet(def));\r\n\t}\r\n\t\r\n\tdestroySheets(){\r\n\t\tthis.sheets.forEach((sheet) => {\r\n\t\t\tsheet.destroy();\r\n\t\t});\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.activeSheet = null;\r\n\t}\r\n\t\r\n\tloadSheets(sheets){\t\r\n\t\tif(!Array.isArray(sheets)){\r\n\t\t\tsheets = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis.destroySheets();\r\n\t\t\r\n\t\tsheets.forEach((def) => {\r\n\t\t\tthis.newSheet(def);\r\n\t\t});\r\n\t\t\r\n\t\tthis.loadSheet(this.sheets[0]);\r\n\t}\r\n\t\r\n\tloadSheet(sheet){\r\n\t\tif(this.activeSheet !== sheet){\r\n\t\t\tif(this.activeSheet){\r\n\t\t\t\tthis.activeSheet.unload();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.activeSheet = sheet;\r\n\t\t\t\r\n\t\t\tsheet.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tnewSheet(definition = {}){\r\n\t\tvar sheet;\r\n\t\t\r\n\t\tif(!definition.rows){\r\n\t\t\tdefinition.rows = this.options(\"spreadsheetRows\");\r\n\t\t}\r\n\t\t\r\n\t\tif(!definition.columns){\r\n\t\t\tdefinition.columns = this.options(\"spreadsheetColumns\");\r\n\t\t}\r\n\t\t\r\n\t\tsheet = new Sheet(this, definition);\r\n\t\t\r\n\t\tthis.sheets.push(sheet);\r\n\t\t\r\n\t\tif(this.element){\r\n\t\t\tthis.element.appendChild(sheet.element);\r\n\t\t}\r\n\t\t\r\n\t\treturn sheet;\r\n\t}\r\n\t\r\n\tremoveSheet(sheet){\r\n\t\tvar index = this.sheets.indexOf(sheet),\r\n\t\tprevSheet;\r\n\t\t\r\n\t\tif(this.sheets.length > 1){\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.sheets.splice(index, 1);\r\n\t\t\t\tsheet.destroy();\r\n\t\t\t\t\r\n\t\t\t\tif(this.activeSheet === sheet){\r\n\t\t\t\t\t\r\n\t\t\t\t\tprevSheet = this.sheets[index - 1] || this.sheets[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(prevSheet){\r\n\t\t\t\t\t\tthis.loadSheet(prevSheet);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.activeSheet = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Unable to remove sheet, at least one sheet must be active\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupSheet(key){\r\n\t\tif(!key){\r\n\t\t\treturn this.activeSheet;\r\n\t\t}else if(key instanceof Sheet){\r\n\t\t\treturn key;\r\n\t\t}else if(key instanceof SheetComponent){\r\n\t\t\treturn key._sheet;\r\n\t\t}else{\r\n\t\t\treturn this.sheets.find(sheet => sheet.key === key) || false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Public Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tsetSheets(sheets){\r\n\t\tthis.loadSheets(sheets);\r\n\r\n\t\treturn this.getSheets();\r\n\t}\r\n\r\n\taddSheet(sheet){\r\n\t\treturn this.newSheet(sheet).getComponent();\r\n\t}\r\n\t\r\n\tgetSheetDefinitions(){\r\n\t\treturn this.sheets.map(sheet => sheet.getDefinition());\r\n\t}\r\n\t\r\n\tgetSheets(){\r\n\t\treturn this.sheets.map(sheet => sheet.getComponent());\r\n\t}\r\n\t\r\n\tgetSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getComponent() : false;\r\n\t}\r\n\t\r\n\tsetSheetData(key, data){\r\n\t\tif (key && !data){\r\n\t\t\tdata = key;\r\n\t\t\tkey = false;\r\n\t\t}\r\n\t\t\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.setData(data) : false;\t\r\n\t}\r\n\t\r\n\tgetSheetData(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getData() : false;\t\r\n\t}\r\n\t\r\n\tclearSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.clear() : false;\r\n\t}\r\n\t\r\n\tremoveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\tif(sheet){\r\n\t\t\tthis.removeSheet(sheet);\r\n\t\t}\r\n\t}\r\n\t\r\n\tactiveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? this.loadSheet(sheet) : false;\r\n\t}\r\n}", "import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nexport default class Tooltip extends Module{\n\n\tstatic moduleName = \"tooltip\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\t// this.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}", "export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//must be alphanumeric\n\talphanumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar reg = new RegExp(/^[a-z0-9]+$/i);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};", "import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nexport default class Validate extends Module{\n\n\tstatic moduleName = \"validate\";\n\n\t//load defaults\n\tstatic validators = defaultValidators;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else{\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}", "export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\trowHeader:false,\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\tdataSendParams:{},\n\tdataReceiveParams:{},\n\n\tdependencies:{},\n};\n", "export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}", "import Renderer from '../Renderer.js';\n\nexport default class BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}", "import Renderer from '../Renderer.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\t\t\t\t\t\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\t\t\t\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tlet col = this.columns[i];\n\t\t\t\n\t\t\tif(col){\n\t\t\t\tcol.reinitializeWidth();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\t\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\t\t\t\t\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.rowHeader = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\t\t\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\t\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else{\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\t\t\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\t\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\t\t\t\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tcollProgress = {},\n\t\trowSample = this.table.options.autoColumns === \"full\" ? data : [data[0]],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trowSample.forEach((row) => {\n\t\t\t\t\n\t\t\t\tObject.keys(row).forEach((key, index) => {\n\t\t\t\t\tlet value = row[key],\n\t\t\t\t\tcol;\n\t\t\t\t\t\n\t\t\t\t\tif(!collProgress[key]){\n\t\t\t\t\t\tcol = {\n\t\t\t\t\t\t\tfield:key,\n\t\t\t\t\t\t\ttitle:key,\n\t\t\t\t\t\t\tsorter:this.calculateSorterFromValue(value),\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcols.splice(index, 0, col);\n\t\t\t\t\t\tcollProgress[key] = typeof value === \"undefined\" ? col : true;\n\t\t\t\t\t}else if(collProgress[key] !== true){\n\t\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcollProgress[key].sorter = this.calculateSorterFromValue(value);\n\t\t\t\t\t\t\tcollProgress[key] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tcalculateSorterFromValue(value){\n\t\tvar sorter;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"undefined\":\n\t\t\t\tsorter = \"string\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tsorter = \"boolean\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\tsorter = \"number\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\tsorter = \"array\";\n\t\t\t\t}else{\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\tsorter = \"number\";\n\t\t\t\t}else{\n\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn sorter;\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\tthis.dispatchExternal(\"columnsLoading\");\n\t\t\n\t\tif(this.table.options.rowHeader){\n\t\t\tthis.rowHeader = new Column(this.table.options.rowHeader === true ? {} : this.table.options.rowHeader, this, true);\n\t\t\tthis.columns.push(this.rowHeader);\n\t\t\tthis.headersElement.appendChild(this.rowHeader.getElement());\n\t\t\tthis.rowHeader.columnRendered();\n\t\t}\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\n\t\tif(this.subscribedExternal(\"columnsLoaded\")){\n\t\t\tthis.dispatchExternal(\"columnsLoaded\", this.getComponents());\n\t\t}\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\t//prevent adding of rows in front of row header\n\t\tif(before && this.rowHeader && (!nextToColumn || nextToColumn === this.rowHeader)){\n\t\t\tbefore = false;\n\t\t\tnextToColumn = this.rowHeader;\n\t\t\tindex = 0;\n\t\t}\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\t\t\t\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\t\t\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tcolumns = [];\n\t\t\t\t\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator)[0] : field;\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetVisibleColumnsByIndex() {\n\t\treturn this.columnsByIndex.filter((col) => col.visible);\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else{\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}", "import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\n\t\tif(!this.rows().length){\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n", "import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else{\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n", "import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.type === \"row\" && row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(this.displayRowsCount){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler || !this.activeRowsPipeline[0]){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\n\tcheckPlaceholder(){\n\t\tif(this.displayRowsCount){\n\t\t\tthis._clearPlaceholder();\n\t\t}else{\n\t\t\tthis.tableEmpty();\n\t\t}\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(force){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight(force);\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tthis.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\t\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n", "import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\toutput = {},\n\t\ttargetMatches = {};\n\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\n\t\t//reverse order keys are set in so events trigger in correct sequence\n\t\tObject.keys(targets).forEach((key) => {\n\t\t\tlet value = matches[key];\n\t\t\toutput[key] = value;\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}\n", "export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n", "import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", [response], null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}", "export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}", "export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\n\nexport default class DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption, convert){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\n\t\t\t\tif(convert){\n\t\t\t\t\tthis.table.options[newOption] = this.table.options[oldOption];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class DependencyRegistry extends CoreFeature{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.deps = {};\r\n\t\t\r\n\t\tthis.props = {\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.deps = Object.assign({}, this.options(\"dependencies\"));\r\n\t}\r\n\t\r\n\tlookup(key, prop, silent){\r\n\t\tif(Array.isArray(key)){\r\n\t\t\tfor (const item of key) {\r\n\t\t\t\tvar match = this.lookup(item, prop, true);\r\n\r\n\t\t\t\tif(match){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(match){\r\n\t\t\t\treturn match;\r\n\t\t\t}else{\r\n\t\t\t\tthis.error(key);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(prop){\r\n\t\t\t\treturn this.lookupProp(key, prop, silent);\r\n\t\t\t}else{\r\n\t\t\t\treturn this.lookupKey(key, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupProp(key, prop, silent){\r\n\t\tvar dependency;\r\n\t\t\r\n\t\tif(this.props[key] && this.props[key][prop]){\r\n\t\t\treturn this.props[key][prop];\r\n\t\t}else{\r\n\t\t\tdependency = this.lookupKey(key, silent);\r\n\t\t\t\r\n\t\t\tif(dependency){\r\n\t\t\t\tif(!this.props[key]){\r\n\t\t\t\t\tthis.props[key] = {};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.props[key][prop] = dependency[prop] || dependency;\r\n\t\t\t\treturn this.props[key][prop];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupKey(key, silent){\r\n\t\tvar dependency;\r\n\t\t\r\n\t\tif(this.deps[key]){\r\n\t\t\tdependency = this.deps[key];\r\n\t\t}else if(window[key]){\r\n\t\t\tthis.deps[key] = window[key];\r\n\t\t\tdependency = this.deps[key];\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.error(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn dependency;\r\n\t}\r\n\r\n\terror(key){\r\n\t\tconsole.error(\"Unable to find dependency\", key, \"Please check documentation and ensure you have imported the required library into your project\");\r\n\t}\r\n}", "//resize columns to fit data they contain\nexport default function(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}", "//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}", "//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}", "//resize columns to fit\nexport default function(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n", "import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};", "import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nexport default class Layout extends Module{\n\n\tstatic moduleName = \"layout\";\n\n\t//load defaults\n\tstatic modes = defaultModes;\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.widthGrow){\n\t\t\tcolumn.definition.widthGrow = Number(column.definition.widthGrow);\n\t\t}\n\t\tif(column.definition.widthShrink){\n\t\t\tcolumn.definition.widthShrink = Number(column.definition.widthShrink);\n\t\t}\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\n\t\tvar variableHeight = this.table.columnManager.columnsByIndex.find((column) => column.definition.variableHeight || column.definition.formatter === \"textarea\");\n\t\t\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\n\t\tif(variableHeight){\n\t\t\tthis.table.rowManager.normalizeHeight(true);\n\t\t}\n\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}", "export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};", "import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nexport default class Localize extends Module{\n\n\tstatic moduleName = \"localize\";\n\n\t//load defaults\n\tstatic langs = defaultLangs;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}", "import Module from '../../core/Module.js';\n\nexport default class Comms extends Module{\n\n\tstatic moduleName = \"comms\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = this.table.constructor.registry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}", "export default class TableRegistry {\n\tstatic registry = {\n\t\ttables:[],\n\t\t\n\t\tregister(table){\n\t\t\tTableRegistry.registry.tables.push(table);\n\t\t},\n\t\t\n\t\tderegister(table){\n\t\t\tvar index = TableRegistry.registry.tables.indexOf(table);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tTableRegistry.registry.tables.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\t\n\t\tlookupTable(query, silent){\n\t\t\tvar results = [],\n\t\t\tmatches, match;\n\t\t\t\n\t\t\tif(typeof query === \"string\"){\n\t\t\t\tmatches = document.querySelectorAll(query);\n\t\t\t\t\n\t\t\t\tif(matches.length){\n\t\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\t\tmatch = TableRegistry.registry.matchElement(matches[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof TableRegistry){\n\t\t\t\tmatch = TableRegistry.registry.matchElement(query);\n\t\t\t\t\n\t\t\t\tif(match){\n\t\t\t\t\tresults.push(match);\n\t\t\t\t}\n\t\t\t}else if(Array.isArray(query)){\n\t\t\t\tquery.forEach(function(item){\n\t\t\t\t\tresults = results.concat(TableRegistry.registry.lookupTable(item));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tif(!silent){\n\t\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn results;\n\t\t},\n\t\t\n\t\tmatchElement(element){\n\t\t\treturn TableRegistry.registry.tables.find(function(table){\n\t\t\t\treturn element instanceof TableRegistry ? table === element : table.element === element;\n\t\t\t});\n\t\t}\n\t};\n\n\t\t\n\tstatic findTable(query){\n\t\tvar results = TableRegistry.registry.lookupTable(query, true);\n\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t}\n}", "import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder extends TableRegistry {\n\t\n\tstatic moduleBindings = {};\n\tstatic moduleExtensions = {};\n\tstatic modulesRegistered = false;\n\t\n\tstatic defaultModules = false;\n\t\n\tconstructor(){\n\t\tsuper();\n\t}\n\t\n\tstatic initializeModuleBinder(defaultModules){\n\t\tif(!ModuleBinder.modulesRegistered){\n\t\t\tModuleBinder.modulesRegistered = true;\n\t\t\tModuleBinder._registerModules(coreModules, true);\n\t\t\t\n\t\t\tif(defaultModules){\n\t\t\t\tModuleBinder._registerModules(defaultModules);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic _extendModule(name, property, values){\n\t\tif(ModuleBinder.moduleBindings[name]){\n\t\t\tvar source = ModuleBinder.moduleBindings[name][property];\n\t\t\t\n\t\t\tif(source){\n\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t}\n\t}\n\t\n\tstatic _registerModules(modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\tModuleBinder._registerModule(mods);\n\t}\n\t\n\tstatic _registerModule(modules){\n\t\tif(!Array.isArray(modules)){\n\t\t\tmodules = [modules];\n\t\t}\n\t\t\n\t\tmodules.forEach((mod) => {\n\t\t\tModuleBinder._registerModuleBinding(mod);\n\t\t\tModuleBinder._registerModuleExtensions(mod);\n\t\t});\n\t}\n\t\n\tstatic _registerModuleBinding(mod){\n\t\tif(mod.moduleName){\n\t\t\tModuleBinder.moduleBindings[mod.moduleName] = mod;\n\t\t}else{\n\t\t\tconsole.error(\"Unable to bind module, no moduleName defined\", mod.moduleName);\n\t\t}\n\t}\n\t\n\tstatic _registerModuleExtensions(mod){\n\t\tvar extensions = mod.moduleExtensions;\n\t\t\n\t\tif(mod.moduleExtensions){\n\t\t\tfor (let modKey in extensions) {\n\t\t\t\tlet ext = extensions[modKey];\n\t\t\t\t\n\t\t\t\tif(ModuleBinder.moduleBindings[modKey]){\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tModuleBinder._extendModule(modKey, propKey, ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey]){\n\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey] = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey][propKey]){\n\t\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey][propKey] = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tObject.assign(ModuleBinder.moduleExtensions[modKey][propKey], ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tModuleBinder._extendModuleFromQueue(mod);\n\t}\n\t\n\tstatic _extendModuleFromQueue(mod){\n\t\tvar extensions = ModuleBinder.moduleExtensions[mod.moduleName];\n\t\t\n\t\tif(extensions){\n\t\t\tfor (let propKey in extensions) {\n\t\t\t\tModuleBinder._extendModule(mod.moduleName, propKey, extensions[propKey]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//ensure that module are bound to instantiated function\n\t_bindModules(){\n\t\tvar orderedStartMods = [],\n\t\torderedEndMods = [],\n\t\tunOrderedMods = [];\n\t\t\n\t\tthis.modules = {};\n\t\t\n\t\tfor(var name in ModuleBinder.moduleBindings){\n\t\t\tlet mod = ModuleBinder.moduleBindings[name];\n\t\t\tlet module = new mod(this);\n\t\t\t\n\t\t\tthis.modules[name] = module;\n\t\t\t\n\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\tthis.modulesCore.push(module);\n\t\t\t}else{\n\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t}else{\n\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\n\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t}\n}", "import CoreFeature from '../CoreFeature.js';\n\nexport default class Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n\n\t\t\tthis.dispatch(\"alert-show\", type);\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else{\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tthis.dispatch(\"alert-hide\", this.type);\n\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}", "'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\nimport DependencyRegistry from './tools/DependencyRegistry.js';\n\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator extends ModuleBinder{\n\n\t//default setup options\n\tstatic defaultOptions = defaultOptions;\n\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper();\n\n\t\tTabulator.initializeModuleBinder(modules);\n\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\n\t\tthis.dependencyRegistry = new DependencyRegistry(this);\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.constructor.registry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis._bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\tthis.footerManager.initialize();\n\n\t\tthis.dependencyRegistry.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 6.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\n\t\tthis.initialized = true;\n\t\t\n\t\tthis._loadInitialData()\n\t\t\t.finally(() => {\n\t\t\t\tthis.eventBus.dispatch(\"table-initialized\");\n\t\t\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t\t\t});\t\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\treturn this.dataLoader.load(this.options.data)\n\t\t\t.finally(() => {\n\t\t\t\tthis.columnManager.verticalAlignHeaders();\n\t\t\t});\t\t\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.constructor.registry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw(true);\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\nexport default Tabulator;\n", "//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as allModules from '../core/modules/optional.js';\n\nclass TabulatorFull extends Tabulator {\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper(element, options, allModules);\n\t}\n}\n\nexport default TabulatorFull;\n", "export default class PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n\n\trendered(){}\n}", "import type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Gets the original marked default options.\n */\nexport function _getDefaults<ParserOutput = string, RendererOutput = string>(): MarkedOptions<ParserOutput, RendererOutput> {\n  return {\n    async: false,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    hooks: null,\n    pedantic: false,\n    renderer: null,\n    silent: false,\n    tokenizer: null,\n    walkTokens: null,\n  };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport let _defaults: MarkedOptions<any, any> = _getDefaults();\n\nexport function changeDefaults<ParserOutput = string, RendererOutput = string>(newDefaults: MarkedOptions<ParserOutput, RendererOutput>) {\n  _defaults = newDefaults;\n}\n", "const noopTest = { exec: () => null } as unknown as RegExp;\n\nfunction edit(regex: string | RegExp, opt = '') {\n  let source = typeof regex === 'string' ? regex : regex.source;\n  const obj = {\n    replace: (name: string | RegExp, val: string | RegExp) => {\n      let valSource = typeof val === 'string' ? val : val.source;\n      valSource = valSource.replace(other.caret, '$1');\n      source = source.replace(name, valSource);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(source, opt);\n    },\n  };\n  return obj;\n}\n\nconst supportsLookbehind = (() => {\ntry {\n  // eslint-disable-next-line prefer-regex-literals\n  return !!new RegExp('(?<=1)(?<!1)');\n} catch {\n  // See browser support here:\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Lookbehind_assertion\n  return false;\n}\n})();\n\nexport const other = {\n  codeRemoveIndent: /^(?: {1,4}| {0,3}\\t)/gm,\n  outputLinkReplace: /\\\\([\\[\\]])/g,\n  indentCodeCompensation: /^(\\s+)(?:```)/,\n  beginningSpace: /^\\s+/,\n  endingHash: /#$/,\n  startingSpaceChar: /^ /,\n  endingSpaceChar: / $/,\n  nonSpaceChar: /[^ ]/,\n  newLineCharGlobal: /\\n/g,\n  tabCharGlobal: /\\t/g,\n  multipleSpaceGlobal: /\\s+/g,\n  blankLine: /^[ \\t]*$/,\n  doubleBlankLine: /\\n[ \\t]*\\n[ \\t]*$/,\n  blockquoteStart: /^ {0,3}>/,\n  blockquoteSetextReplace: /\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,\n  blockquoteSetextReplace2: /^ {0,3}>[ \\t]?/gm,\n  listReplaceTabs: /^\\t+/,\n  listReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g,\n  listIsTask: /^\\[[ xX]\\] +\\S/,\n  listReplaceTask: /^\\[[ xX]\\] +/,\n  listTaskCheckbox: /\\[[ xX]\\]/,\n  anyLine: /\\n.*\\n/,\n  hrefBrackets: /^<(.*)>$/,\n  tableDelimiter: /[:|]/,\n  tableAlignChars: /^\\||\\| *$/g,\n  tableRowBlankLine: /\\n[ \\t]*$/,\n  tableAlignRight: /^ *-+: *$/,\n  tableAlignCenter: /^ *:-+: *$/,\n  tableAlignLeft: /^ *:-+ *$/,\n  startATag: /^<a /i,\n  endATag: /^<\\/a>/i,\n  startPreScriptTag: /^<(pre|code|kbd|script)(\\s|>)/i,\n  endPreScriptTag: /^<\\/(pre|code|kbd|script)(\\s|>)/i,\n  startAngleBracket: /^</,\n  endAngleBracket: />$/,\n  pedanticHrefTitle: /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,\n  unicodeAlphaNumeric: /[\\p{L}\\p{N}]/u,\n  escapeTest: /[&<>\"']/,\n  escapeReplace: /[&<>\"']/g,\n  escapeTestNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,\n  escapeReplaceNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,\n  unescapeTest: /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,\n  caret: /(^|[^\\[])\\^/g,\n  percentDecode: /%25/g,\n  findPipe: /\\|/g,\n  splitPipe: / \\|/,\n  slashPipe: /\\\\\\|/g,\n  carriageReturn: /\\r\\n|\\r/g,\n  spaceLine: /^ +$/gm,\n  notSpaceStart: /^\\S*/,\n  endingNewline: /\\n$/,\n  listItemRegex: (bull: string) => new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`),\n  nextBulletRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`),\n  hrRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),\n  fencesBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`),\n  headingBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`),\n  htmlBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}<(?:[a-z].*>|!--)`, 'i'),\n};\n\n/**\n * Block-Level Grammar\n */\n\nconst newline = /^(?:[ \\t]*(?:\\n|$))+/;\nconst blockCode = /^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/;\nconst fences = /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/;\nconst hr = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/;\nconst heading = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/;\nconst bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nconst lheadingCore = /^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/;\nconst lheading = edit(lheadingCore)\n  .replace(/bull/g, bullet) // lists can interrupt\n  .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n  .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n  .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n  .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n  .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n  .replace(/\\|table/g, '') // table not in commonmark\n  .getRegex();\nconst lheadingGfm = edit(lheadingCore)\n  .replace(/bull/g, bullet) // lists can interrupt\n  .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n  .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n  .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n  .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n  .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n  .replace(/table/g, / {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/) // table can interrupt\n  .getRegex();\nconst _paragraph = /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/;\nconst blockText = /^[^\\n]+/;\nconst _blockLabel = /(?!\\s*\\])(?:\\\\[\\s\\S]|[^\\[\\]\\\\])+/;\nconst def = edit(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/)\n  .replace('label', _blockLabel)\n  .replace('title', /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/)\n  .getRegex();\n\nconst list = edit(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/)\n  .replace(/bull/g, bullet)\n  .getRegex();\n\nconst _tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title'\n  + '|tr|track|ul';\nconst _comment = /<!--(?:-?>|[\\s\\S]*?(?:-->|$))/;\nconst html = edit(\n  '^ {0,3}(?:' // optional indentation\n+ '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n+ '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n+ '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n+ '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n+ '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n+ '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (6)\n+ '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) open tag\n+ '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) closing tag\n+ ')', 'i')\n  .replace('comment', _comment)\n  .replace('tag', _tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nconst paragraph = edit(_paragraph)\n  .replace('hr', hr)\n  .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n  .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nconst blockquote = edit(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/)\n  .replace('paragraph', paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nconst blockNormal = {\n  blockquote,\n  code: blockCode,\n  def,\n  fences,\n  heading,\n  hr,\n  html,\n  lheading,\n  list,\n  newline,\n  paragraph,\n  table: noopTest,\n  text: blockText,\n};\n\ntype BlockKeys = keyof typeof blockNormal;\n\n/**\n * GFM Block Grammar\n */\n\nconst gfmTable = edit(\n  '^ *([^\\\\n ].*)\\\\n' // Header\n+ ' {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)' // Align\n+ '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)') // Cells\n  .replace('hr', hr)\n  .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', '(?: {4}| {0,3}\\t)[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', _tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nconst blockGfm: Record<BlockKeys, RegExp> = {\n  ...blockNormal,\n  lheading: lheadingGfm,\n  table: gfmTable,\n  paragraph: edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n    .replace('table', gfmTable) // interrupt paragraphs with table\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n    .getRegex(),\n};\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nconst blockPedantic: Record<BlockKeys, RegExp> = {\n  ...blockNormal,\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', _comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  paragraph: edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', lheading)\n    .replace('|table', '')\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .replace('|tag', '')\n    .getRegex(),\n};\n\n/**\n * Inline-Level Grammar\n */\n\nconst escape = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/;\nconst inlineCode = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/;\nconst br = /^( {2,}|\\\\)\\n(?!\\s*$)/;\nconst inlineText = /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/;\n\n// list of unicode punctuation marks, plus any missing characters from CommonMark spec\nconst _punctuation = /[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpace = /[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpace = /[^\\s\\p{P}\\p{S}]/u;\nconst punctuation = edit(/^((?![*_])punctSpace)/, 'u')\n  .replace(/punctSpace/g, _punctuationOrSpace).getRegex();\n\n// GFM allows ~ inside strong and em for strikethrough\nconst _punctuationGfmStrongEm = /(?!~)[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpaceGfmStrongEm = /(?!~)[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpaceGfmStrongEm = /(?:[^\\s\\p{P}\\p{S}]|~)/u;\n\n// sequences em should skip over [title](link), `code`, <html>\nconst blockSkip = edit(/link|precode-code|html/, 'g')\n  .replace('link', /\\[(?:[^\\[\\]`]|(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)/)\n  .replace('precode-', supportsLookbehind ? '(?<!`)()' : '(^^|[^`])')\n  .replace('code', /(?<b>`+)[^`]+\\k<b>(?!`)/)\n  .replace('html', /<(?! )[^<>]*?>/)\n  .getRegex();\n\nconst emStrongLDelimCore = /^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/;\n\nconst emStrongLDelim = edit(emStrongLDelimCore, 'u')\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst emStrongLDelimGfm = edit(emStrongLDelimCore, 'u')\n  .replace(/punct/g, _punctuationGfmStrongEm)\n  .getRegex();\n\nconst emStrongRDelimAstCore =\n  '^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)' // Skip orphan inside strong\n+ '|[^*]+(?=[^*])' // Consume to delim\n+ '|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)' // (1) #*** can only be a Right Delimiter\n+ '|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)' // (2) a***#, a*** can only be a Right Delimiter\n+ '|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)' // (3) #***a, ***a can only be Left Delimiter\n+ '|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)' // (4) ***# can only be Left Delimiter\n+ '|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)' // (5) #***# can be either Left or Right Delimiter\n+ '|notPunctSpace(\\\\*+)(?=notPunctSpace)'; // (6) a***a can be either Left or Right Delimiter\n\nconst emStrongRDelimAst = edit(emStrongRDelimAstCore, 'gu')\n  .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n  .replace(/punctSpace/g, _punctuationOrSpace)\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst emStrongRDelimAstGfm = edit(emStrongRDelimAstCore, 'gu')\n  .replace(/notPunctSpace/g, _notPunctuationOrSpaceGfmStrongEm)\n  .replace(/punctSpace/g, _punctuationOrSpaceGfmStrongEm)\n  .replace(/punct/g, _punctuationGfmStrongEm)\n  .getRegex();\n\n// (6) Not allowed for _\nconst emStrongRDelimUnd = edit(\n  '^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)' // Skip orphan inside strong\n+ '|[^_]+(?=[^_])' // Consume to delim\n+ '|(?!_)punct(_+)(?=[\\\\s]|$)' // (1) #___ can only be a Right Delimiter\n+ '|notPunctSpace(_+)(?!_)(?=punctSpace|$)' // (2) a___#, a___ can only be a Right Delimiter\n+ '|(?!_)punctSpace(_+)(?=notPunctSpace)' // (3) #___a, ___a can only be Left Delimiter\n+ '|[\\\\s](_+)(?!_)(?=punct)' // (4) ___# can only be Left Delimiter\n+ '|(?!_)punct(_+)(?!_)(?=punct)', 'gu') // (5) #___# can be either Left or Right Delimiter\n  .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n  .replace(/punctSpace/g, _punctuationOrSpace)\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst anyPunctuation = edit(/\\\\(punct)/, 'gu')\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst autolink = edit(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/)\n  .replace('scheme', /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/)\n  .replace('email', /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/)\n  .getRegex();\n\nconst _inlineComment = edit(_comment).replace('(?:-->|$)', '-->').getRegex();\nconst tag = edit(\n  '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>') // CDATA section\n  .replace('comment', _inlineComment)\n  .replace('attribute', /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nconst _inlineLabel = /(?:\\[(?:\\\\[\\s\\S]|[^\\[\\]\\\\])*\\]|\\\\[\\s\\S]|`+[^`]*?`+(?!`)|[^\\[\\]\\\\`])*?/;\n\nconst link = edit(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/)\n  .replace('label', _inlineLabel)\n  .replace('href', /<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/)\n  .replace('title', /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/)\n  .getRegex();\n\nconst reflink = edit(/^!?\\[(label)\\]\\[(ref)\\]/)\n  .replace('label', _inlineLabel)\n  .replace('ref', _blockLabel)\n  .getRegex();\n\nconst nolink = edit(/^!?\\[(ref)\\](?:\\[\\])?/)\n  .replace('ref', _blockLabel)\n  .getRegex();\n\nconst reflinkSearch = edit('reflink|nolink(?!\\\\()', 'g')\n  .replace('reflink', reflink)\n  .replace('nolink', nolink)\n  .getRegex();\n\nconst _caseInsensitiveProtocol = /[hH][tT][tT][pP][sS]?|[fF][tT][pP]/;\n\n/**\n * Normal Inline Grammar\n */\n\nconst inlineNormal = {\n  _backpedal: noopTest, // only used for GFM url\n  anyPunctuation,\n  autolink,\n  blockSkip,\n  br,\n  code: inlineCode,\n  del: noopTest,\n  emStrongLDelim,\n  emStrongRDelimAst,\n  emStrongRDelimUnd,\n  escape,\n  link,\n  nolink,\n  punctuation,\n  reflink,\n  reflinkSearch,\n  tag,\n  text: inlineText,\n  url: noopTest,\n};\n\ntype InlineKeys = keyof typeof inlineNormal;\n\n/**\n * Pedantic Inline Grammar\n */\n\nconst inlinePedantic: Record<InlineKeys, RegExp> = {\n  ...inlineNormal,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', _inlineLabel)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', _inlineLabel)\n    .getRegex(),\n};\n\n/**\n * GFM Inline Grammar\n */\n\nconst inlineGfm: Record<InlineKeys, RegExp> = {\n  ...inlineNormal,\n  emStrongRDelimAst: emStrongRDelimAstGfm,\n  emStrongLDelim: emStrongLDelimGfm,\n  url: edit(/^((?:protocol):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/)\n    .replace('protocol', _caseInsensitiveProtocol)\n    .replace('email', /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/)\n    .getRegex(),\n  _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])((?:\\\\[\\s\\S]|[^\\\\])*?(?:\\\\[\\s\\S]|[^\\s~\\\\]))\\1(?=[^~]|$)/,\n  text: edit(/^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|protocol:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/)\n    .replace('protocol', _caseInsensitiveProtocol)\n    .getRegex(),\n};\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\nconst inlineBreaks: Record<InlineKeys, RegExp> = {\n  ...inlineGfm,\n  br: edit(br).replace('{2,}', '*').getRegex(),\n  text: edit(inlineGfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex(),\n};\n\n/**\n * exports\n */\n\nexport const block = {\n  normal: blockNormal,\n  gfm: blockGfm,\n  pedantic: blockPedantic,\n};\n\nexport const inline = {\n  normal: inlineNormal,\n  gfm: inlineGfm,\n  breaks: inlineBreaks,\n  pedantic: inlinePedantic,\n};\n\nexport interface Rules {\n  other: typeof other\n  block: Record<BlockKeys, RegExp>\n  inline: Record<InlineKeys, RegExp>\n}\n", "import { other } from './rules.ts';\n\n/**\n * Helpers\n */\nconst escapeReplacements: { [index: string]: string } = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\nconst getEscapeReplacement = (ch: string) => escapeReplacements[ch];\n\nexport function escape(html: string, encode?: boolean) {\n  if (encode) {\n    if (other.escapeTest.test(html)) {\n      return html.replace(other.escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (other.escapeTestNoEncode.test(html)) {\n      return html.replace(other.escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nexport function unescape(html: string) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(other.unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nexport function cleanUrl(href: string) {\n  try {\n    href = encodeURI(href).replace(other.percentDecode, '%');\n  } catch {\n    return null;\n  }\n  return href;\n}\n\nexport function splitCells(tableRow: string, count?: number) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(other.findPipe, (match, offset, str) => {\n      let escaped = false;\n      let curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(other.splitPipe);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) {\n    cells.shift();\n  }\n  if (cells.length > 0 && !cells.at(-1)?.trim()) {\n    cells.pop();\n  }\n\n  if (count) {\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) cells.push('');\n    }\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(other.slashPipe, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param str\n * @param c\n * @param invert Remove suffix of non-c chars instead. Default falsey.\n */\nexport function rtrim(str: string, c: string, invert?: boolean) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nexport function findClosingBracket(str: string, b: string) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n\n  let level = 0;\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  if (level > 0) {\n    return -2;\n  }\n\n  return -1;\n}\n", "import { _defaults } from './defaults.ts';\nimport {\n  rtrim,\n  splitCells,\n  findClosingBracket,\n} from './helpers.ts';\nimport type { Rules } from './rules.ts';\nimport type { _Lexer } from './Lexer.ts';\nimport type { Links, Tokens, Token } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\nfunction outputLink(cap: string[], link: Pick<Tokens.Link, 'href' | 'title'>, raw: string, lexer: _Lexer, rules: Rules): Tokens.Link | Tokens.Image {\n  const href = link.href;\n  const title = link.title || null;\n  const text = cap[1].replace(rules.other.outputLinkReplace, '$1');\n\n  lexer.state.inLink = true;\n  const token: Tokens.Link | Tokens.Image = {\n    type: cap[0].charAt(0) === '!' ? 'image' : 'link',\n    raw,\n    href,\n    title,\n    text,\n    tokens: lexer.inlineTokens(text),\n  };\n  lexer.state.inLink = false;\n  return token;\n}\n\nfunction indentCodeCompensation(raw: string, text: string, rules: Rules) {\n  const matchIndentToCode = raw.match(rules.other.indentCodeCompensation);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(rules.other.beginningSpace);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nexport class _Tokenizer<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  rules!: Rules; // set by the lexer\n  lexer!: _Lexer<ParserOutput, RendererOutput>; // set by the lexer\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  space(src: string): Tokens.Space | undefined {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0],\n      };\n    }\n  }\n\n  code(src: string): Tokens.Code | undefined {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(this.rules.other.codeRemoveIndent, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text,\n      };\n    }\n  }\n\n  fences(src: string): Tokens.Code | undefined {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '', this.rules);\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline.anyPunctuation, '$1') : cap[2],\n        text,\n      };\n    }\n  }\n\n  heading(src: string): Tokens.Heading | undefined {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (this.rules.other.endingHash.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || this.rules.other.endingSpaceChar.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text),\n      };\n    }\n  }\n\n  hr(src: string): Tokens.Hr | undefined {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: rtrim(cap[0], '\\n'),\n      };\n    }\n  }\n\n  blockquote(src: string): Tokens.Blockquote | undefined {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      let lines = rtrim(cap[0], '\\n').split('\\n');\n      let raw = '';\n      let text = '';\n      const tokens: Token[] = [];\n\n      while (lines.length > 0) {\n        let inBlockquote = false;\n        const currentLines = [];\n\n        let i;\n        for (i = 0; i < lines.length; i++) {\n          // get lines up to a continuation\n          if (this.rules.other.blockquoteStart.test(lines[i])) {\n            currentLines.push(lines[i]);\n            inBlockquote = true;\n          } else if (!inBlockquote) {\n            currentLines.push(lines[i]);\n          } else {\n            break;\n          }\n        }\n        lines = lines.slice(i);\n\n        const currentRaw = currentLines.join('\\n');\n        const currentText = currentRaw\n          // precede setext continuation with 4 spaces so it isn't a setext\n          .replace(this.rules.other.blockquoteSetextReplace, '\\n    $1')\n          .replace(this.rules.other.blockquoteSetextReplace2, '');\n        raw = raw ? `${raw}\\n${currentRaw}` : currentRaw;\n        text = text ? `${text}\\n${currentText}` : currentText;\n\n        // parse blockquote lines as top level tokens\n        // merge paragraphs if this is a continuation\n        const top = this.lexer.state.top;\n        this.lexer.state.top = true;\n        this.lexer.blockTokens(currentText, tokens, true);\n        this.lexer.state.top = top;\n\n        // if there is no continuation then we are done\n        if (lines.length === 0) {\n          break;\n        }\n\n        const lastToken = tokens.at(-1);\n\n        if (lastToken?.type === 'code') {\n          // blockquote continuation cannot be preceded by a code block\n          break;\n        } else if (lastToken?.type === 'blockquote') {\n          // include continuation in nested blockquote\n          const oldToken = lastToken as Tokens.Blockquote;\n          const newText = oldToken.raw + '\\n' + lines.join('\\n');\n          const newToken = this.blockquote(newText)!;\n          tokens[tokens.length - 1] = newToken;\n\n          raw = raw.substring(0, raw.length - oldToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.text.length) + newToken.text;\n          break;\n        } else if (lastToken?.type === 'list') {\n          // include continuation in nested list\n          const oldToken = lastToken as Tokens.List;\n          const newText = oldToken.raw + '\\n' + lines.join('\\n');\n          const newToken = this.list(newText)!;\n          tokens[tokens.length - 1] = newToken;\n\n          raw = raw.substring(0, raw.length - lastToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.raw.length) + newToken.raw;\n          lines = newText.substring(tokens.at(-1)!.raw.length).split('\\n');\n          continue;\n        }\n      }\n\n      return {\n        type: 'blockquote',\n        raw,\n        tokens,\n        text,\n      };\n    }\n  }\n\n  list(src: string): Tokens.List | undefined {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list: Tokens.List = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: [],\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = this.rules.other.listItemRegex(bull);\n      let endsWithBlankLine = false;\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        let endEarly = false;\n        let raw = '';\n        let itemContents = '';\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        let line = cap[2].split('\\n', 1)[0].replace(this.rules.other.listReplaceTabs, (t: string) => ' '.repeat(3 * t.length));\n        let nextLine = src.split('\\n', 1)[0];\n        let blankLine = !line.trim();\n\n        let indent = 0;\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimStart();\n        } else if (blankLine) {\n          indent = cap[1].length + 1;\n        } else {\n          indent = cap[2].search(this.rules.other.nonSpaceChar); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        if (blankLine && this.rules.other.blankLine.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = this.rules.other.nextBulletRegex(indent);\n          const hrRegex = this.rules.other.hrRegex(indent);\n          const fencesBeginRegex = this.rules.other.fencesBeginRegex(indent);\n          const headingBeginRegex = this.rules.other.headingBeginRegex(indent);\n          const htmlBeginRegex = this.rules.other.htmlBeginRegex(indent);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            const rawLine = src.split('\\n', 1)[0];\n            let nextLineWithoutTabs;\n            nextLine = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(this.rules.other.listReplaceNesting, '  ');\n              nextLineWithoutTabs = nextLine;\n            } else {\n              nextLineWithoutTabs = nextLine.replace(this.rules.other.tabCharGlobal, '    ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of html block\n            if (htmlBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(nextLine)) {\n              break;\n            }\n\n            if (nextLineWithoutTabs.search(this.rules.other.nonSpaceChar) >= indent || !nextLine.trim()) { // Dedent if possible\n              itemContents += '\\n' + nextLineWithoutTabs.slice(indent);\n            } else {\n              // not enough indentation\n              if (blankLine) {\n                break;\n              }\n\n              // paragraph continuation unless last line was a different block level element\n              if (line.replace(this.rules.other.tabCharGlobal, '    ').search(this.rules.other.nonSpaceChar) >= 4) { // indented code block\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n\n              itemContents += '\\n' + nextLine;\n            }\n\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n            line = nextLineWithoutTabs.slice(indent);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (this.rules.other.doubleBlankLine.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!this.options.gfm && this.rules.other.listIsTask.test(itemContents),\n          loose: false,\n          text: itemContents,\n          tokens: [],\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      const lastItem = list.items.at(-1);\n      if (lastItem) {\n        lastItem.raw = lastItem.raw.trimEnd();\n        lastItem.text = lastItem.text.trimEnd();\n      } else {\n        // not a list since there were no items\n        return;\n      }\n      list.raw = list.raw.trimEnd();\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (const item of list.items) {\n        this.lexer.state.top = false;\n        item.tokens = this.lexer.blockTokens(item.text, []);\n        if (item.task) {\n          // Remove checkbox markdown from item tokens\n          item.text = item.text.replace(this.rules.other.listReplaceTask, '');\n          if (item.tokens[0]?.type === 'text' || item.tokens[0]?.type === 'paragraph') {\n            item.tokens[0].raw = item.tokens[0].raw.replace(this.rules.other.listReplaceTask, '');\n            item.tokens[0].text = item.tokens[0].text.replace(this.rules.other.listReplaceTask, '');\n            for (let i = this.lexer.inlineQueue.length - 1; i >= 0; i--) {\n              if (this.rules.other.listIsTask.test(this.lexer.inlineQueue[i].src)) {\n                this.lexer.inlineQueue[i].src = this.lexer.inlineQueue[i].src.replace(this.rules.other.listReplaceTask, '');\n                break;\n              }\n            }\n          }\n\n          const taskRaw = this.rules.other.listTaskCheckbox.exec(item.raw);\n          if (taskRaw) {\n            const checkboxToken: Tokens.Checkbox = {\n              type: 'checkbox',\n              raw: taskRaw[0] + ' ',\n              checked: taskRaw[0] !== '[ ]',\n            };\n            item.checked = checkboxToken.checked;\n            if (list.loose) {\n              if (item.tokens[0] && ['paragraph', 'text'].includes(item.tokens[0].type) && 'tokens' in item.tokens[0] && item.tokens[0].tokens) {\n                item.tokens[0].raw = checkboxToken.raw + item.tokens[0].raw;\n                item.tokens[0].text = checkboxToken.raw + item.tokens[0].text;\n                item.tokens[0].tokens.unshift(checkboxToken);\n              } else {\n                item.tokens.unshift({\n                  type: 'paragraph',\n                  raw: checkboxToken.raw,\n                  text: checkboxToken.raw,\n                  tokens: [checkboxToken],\n                });\n              }\n            } else {\n              item.tokens.unshift(checkboxToken);\n            }\n          }\n        }\n\n        if (!list.loose) {\n          // Check if list should be loose\n          const spacers = item.tokens.filter(t => t.type === 'space');\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => this.rules.other.anyLine.test(t.raw));\n\n          list.loose = hasMultipleLineBreaks;\n        }\n      }\n\n      // Set all items to loose if list is loose\n      if (list.loose) {\n        for (const item of list.items) {\n          item.loose = true;\n          for (const token of item.tokens) {\n            if (token.type === 'text') {\n              token.type = 'paragraph';\n            }\n          }\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src: string): Tokens.HTML | undefined {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token: Tokens.HTML = {\n        type: 'html',\n        block: true,\n        raw: cap[0],\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0],\n      };\n      return token;\n    }\n  }\n\n  def(src: string): Tokens.Def | undefined {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag = cap[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal, ' ');\n      const href = cap[2] ? cap[2].replace(this.rules.other.hrefBrackets, '$1').replace(this.rules.inline.anyPunctuation, '$1') : '';\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline.anyPunctuation, '$1') : cap[3];\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href,\n        title,\n      };\n    }\n  }\n\n  table(src: string): Tokens.Table | undefined {\n    const cap = this.rules.block.table.exec(src);\n    if (!cap) {\n      return;\n    }\n\n    if (!this.rules.other.tableDelimiter.test(cap[2])) {\n      // delimiter row must have a pipe (|) or colon (:) otherwise it is a setext heading\n      return;\n    }\n\n    const headers = splitCells(cap[1]);\n    const aligns = cap[2].replace(this.rules.other.tableAlignChars, '').split('|');\n    const rows = cap[3]?.trim() ? cap[3].replace(this.rules.other.tableRowBlankLine, '').split('\\n') : [];\n\n    const item: Tokens.Table = {\n      type: 'table',\n      raw: cap[0],\n      header: [],\n      align: [],\n      rows: [],\n    };\n\n    if (headers.length !== aligns.length) {\n      // header and align columns must be equal, rows can be different.\n      return;\n    }\n\n    for (const align of aligns) {\n      if (this.rules.other.tableAlignRight.test(align)) {\n        item.align.push('right');\n      } else if (this.rules.other.tableAlignCenter.test(align)) {\n        item.align.push('center');\n      } else if (this.rules.other.tableAlignLeft.test(align)) {\n        item.align.push('left');\n      } else {\n        item.align.push(null);\n      }\n    }\n\n    for (let i = 0; i < headers.length; i++) {\n      item.header.push({\n        text: headers[i],\n        tokens: this.lexer.inline(headers[i]),\n        header: true,\n        align: item.align[i],\n      });\n    }\n\n    for (const row of rows) {\n      item.rows.push(splitCells(row, item.header.length).map((cell, i) => {\n        return {\n          text: cell,\n          tokens: this.lexer.inline(cell),\n          header: false,\n          align: item.align[i],\n        };\n      }));\n    }\n\n    return item;\n  }\n\n  lheading(src: string): Tokens.Heading | undefined {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1]),\n      };\n    }\n  }\n\n  paragraph(src: string): Tokens.Paragraph | undefined {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text),\n      };\n    }\n  }\n\n  text(src: string): Tokens.Text | undefined {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0]),\n      };\n    }\n  }\n\n  escape(src: string): Tokens.Escape | undefined {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: cap[1],\n      };\n    }\n  }\n\n  tag(src: string): Tokens.Tag | undefined {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && this.rules.other.startATag.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && this.rules.other.endATag.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && this.rules.other.startPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && this.rules.other.endPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        block: false,\n        text: cap[0],\n      };\n    }\n  }\n\n  link(src: string): Tokens.Link | Tokens.Image | undefined {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && this.rules.other.startAngleBracket.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex === -2) {\n          // more open parens than closed\n          return;\n        }\n\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = this.rules.other.pedanticHrefTitle.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (this.rules.other.startAngleBracket.test(href)) {\n        if (this.options.pedantic && !(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline.anyPunctuation, '$1') : href,\n        title: title ? title.replace(this.rules.inline.anyPunctuation, '$1') : title,\n      }, cap[0], this.lexer, this.rules);\n    }\n  }\n\n  reflink(src: string, links: Links): Tokens.Link | Tokens.Image | Tokens.Text | undefined {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n      || (cap = this.rules.inline.nolink.exec(src))) {\n      const linkString = (cap[2] || cap[1]).replace(this.rules.other.multipleSpaceGlobal, ' ');\n      const link = links[linkString.toLowerCase()];\n      if (!link) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text,\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer, this.rules);\n    }\n  }\n\n  emStrong(src: string, maskedSrc: string, prevChar = ''): Tokens.Em | Tokens.Strong | undefined {\n    let match = this.rules.inline.emStrongLDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(this.rules.other.unicodeAlphaNumeric)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n      // unicode Regex counts emoji as 1 char; spread into array for proper count (used multiple times below)\n      const lLength = [...match[0]].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = [...rDelim].length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n        // char length can be >1 for unicode characters;\n        const lastCharLength = [...match[0]][0].length;\n        const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = raw.slice(1, -1);\n          return {\n            type: 'em',\n            raw,\n            text,\n            tokens: this.lexer.inlineTokens(text),\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = raw.slice(2, -2);\n        return {\n          type: 'strong',\n          raw,\n          text,\n          tokens: this.lexer.inlineTokens(text),\n        };\n      }\n    }\n  }\n\n  codespan(src: string): Tokens.Codespan | undefined {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(this.rules.other.newLineCharGlobal, ' ');\n      const hasNonSpaceChars = this.rules.other.nonSpaceChar.test(text);\n      const hasSpaceCharsOnBothEnds = this.rules.other.startingSpaceChar.test(text) && this.rules.other.endingSpaceChar.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text,\n      };\n    }\n  }\n\n  br(src: string): Tokens.Br | undefined {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0],\n      };\n    }\n  }\n\n  del(src: string): Tokens.Del | undefined {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2]),\n      };\n    }\n  }\n\n  autolink(src: string): Tokens.Link | undefined {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = cap[1];\n        href = 'mailto:' + text;\n      } else {\n        text = cap[1];\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text,\n          },\n        ],\n      };\n    }\n  }\n\n  url(src: string): Tokens.Link | undefined {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = cap[0];\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])?.[0] ?? '';\n        } while (prevCapZero !== cap[0]);\n        text = cap[0];\n        if (cap[1] === 'www.') {\n          href = 'http://' + cap[0];\n        } else {\n          href = cap[0];\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text,\n          },\n        ],\n      };\n    }\n  }\n\n  inlineText(src: string): Tokens.Text | undefined {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      const escaped = this.lexer.state.inRawBlock;\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        escaped,\n      };\n    }\n  }\n}\n", "import { _Tokenizer } from './Tokenizer.ts';\nimport { _defaults } from './defaults.ts';\nimport { other, block, inline } from './rules.ts';\nimport type { Token, TokensList, Tokens } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Block Lexer\n */\nexport class _Lexer<ParserOutput = string, RendererOutput = string> {\n  tokens: TokensList;\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  state: {\n    inLink: boolean;\n    inRawBlock: boolean;\n    top: boolean;\n  };\n\n  public inlineQueue: { src: string, tokens: Token[] }[];\n\n  private tokenizer: _Tokenizer<ParserOutput, RendererOutput>;\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    // TokenList cannot be created in one go\n    this.tokens = [] as unknown as TokensList;\n    this.tokens.links = Object.create(null);\n    this.options = options || _defaults;\n    this.options.tokenizer = this.options.tokenizer || new _Tokenizer<ParserOutput, RendererOutput>();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true,\n    };\n\n    const rules = {\n      other,\n      block: block.normal,\n      inline: inline.normal,\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline,\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex<ParserOutput = string, RendererOutput = string>(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const lexer = new _Lexer<ParserOutput, RendererOutput>(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline<ParserOutput = string, RendererOutput = string>(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const lexer = new _Lexer<ParserOutput, RendererOutput>(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src: string) {\n    src = src.replace(other.carriageReturn, '\\n');\n\n    this.blockTokens(src, this.tokens);\n\n    for (let i = 0; i < this.inlineQueue.length; i++) {\n      const next = this.inlineQueue[i];\n      this.inlineTokens(next.src, next.tokens);\n    }\n    this.inlineQueue = [];\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src: string, tokens?: Token[], lastParagraphClipped?: boolean): Token[];\n  blockTokens(src: string, tokens?: TokensList, lastParagraphClipped?: boolean): TokensList;\n  blockTokens(src: string, tokens: Token[] = [], lastParagraphClipped = false) {\n    if (this.options.pedantic) {\n      src = src.replace(other.tabCharGlobal, '    ').replace(other.spaceLine, '');\n    }\n\n    while (src) {\n      let token: Tokens.Generic | undefined;\n\n      if (this.options.extensions?.block?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.raw.length === 1 && lastToken !== undefined) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unnecessary paragraph tags\n          lastToken.raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title,\n          };\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      let cutSrc = src;\n      if (this.options.extensions?.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        const lastToken = tokens.at(-1);\n        if (lastParagraphClipped && lastToken?.type === 'paragraph') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = cutSrc.length !== src.length;\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src: string, tokens: Token[] = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src: string, tokens: Token[] = []): Token[] {\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match: RegExpExecArray | null = null;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index)\n              + '[' + 'a'.repeat(match[0].length - 2) + ']'\n              + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n\n    // Mask out escaped characters\n    while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n    }\n\n    // Mask out other blocks\n    let offset;\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      offset = match[2] ? match[2].length : 0;\n      maskedSrc = maskedSrc.slice(0, match.index + offset) + '[' + 'a'.repeat(match[0].length - offset - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out blocks from extensions\n    maskedSrc = this.options.hooks?.emStrongMask?.call({ lexer: this }, maskedSrc) ?? maskedSrc;\n\n    let keepPrevChar = false;\n    let prevChar = '';\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      let token: Tokens.Generic | undefined;\n\n      // extensions\n      if (this.options.extensions?.inline?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.type === 'text' && lastToken?.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      let cutSrc = src;\n      if (this.options.extensions?.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n", "import { _defaults } from './defaults.ts';\nimport {\n  cleanUrl,\n  escape,\n} from './helpers.ts';\nimport { other } from './rules.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\nimport type { Tokens } from './Tokens.ts';\nimport type { _Parser } from './Parser.ts';\n\n/**\n * Renderer\n */\nexport class _Renderer<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  parser!: _Parser<ParserOutput, RendererOutput>; // set by the parser\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  space(token: Tokens.Space): RendererOutput {\n    return '' as RendererOutput;\n  }\n\n  code({ text, lang, escaped }: Tokens.Code): RendererOutput {\n    const langString = (lang || '').match(other.notSpaceStart)?.[0];\n\n    const code = text.replace(other.endingNewline, '') + '\\n';\n\n    if (!langString) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n' as RendererOutput;\n    }\n\n    return '<pre><code class=\"language-'\n      + escape(langString)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n' as RendererOutput;\n  }\n\n  blockquote({ tokens }: Tokens.Blockquote): RendererOutput {\n    const body = this.parser.parse(tokens);\n    return `<blockquote>\\n${body}</blockquote>\\n` as RendererOutput;\n  }\n\n  html({ text }: Tokens.HTML | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  def(token: Tokens.Def): RendererOutput {\n    return '' as RendererOutput;\n  }\n\n  heading({ tokens, depth }: Tokens.Heading): RendererOutput {\n    return `<h${depth}>${this.parser.parseInline(tokens)}</h${depth}>\\n` as RendererOutput;\n  }\n\n  hr(token: Tokens.Hr): RendererOutput {\n    return '<hr>\\n' as RendererOutput;\n  }\n\n  list(token: Tokens.List): RendererOutput {\n    const ordered = token.ordered;\n    const start = token.start;\n\n    let body = '';\n    for (let j = 0; j < token.items.length; j++) {\n      const item = token.items[j];\n      body += this.listitem(item);\n    }\n\n    const type = ordered ? 'ol' : 'ul';\n    const startAttr = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startAttr + '>\\n' + body + '</' + type + '>\\n' as RendererOutput;\n  }\n\n  listitem(item: Tokens.ListItem): RendererOutput {\n    return `<li>${this.parser.parse(item.tokens)}</li>\\n` as RendererOutput;\n  }\n\n  checkbox({ checked }: Tokens.Checkbox): RendererOutput {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"> ' as RendererOutput;\n  }\n\n  paragraph({ tokens }: Tokens.Paragraph): RendererOutput {\n    return `<p>${this.parser.parseInline(tokens)}</p>\\n` as RendererOutput;\n  }\n\n  table(token: Tokens.Table): RendererOutput {\n    let header = '';\n\n    // header\n    let cell = '';\n    for (let j = 0; j < token.header.length; j++) {\n      cell += this.tablecell(token.header[j]);\n    }\n    header += this.tablerow({ text: cell as ParserOutput });\n\n    let body = '';\n    for (let j = 0; j < token.rows.length; j++) {\n      const row = token.rows[j];\n\n      cell = '';\n      for (let k = 0; k < row.length; k++) {\n        cell += this.tablecell(row[k]);\n      }\n\n      body += this.tablerow({ text: cell as ParserOutput });\n    }\n    if (body) body = `<tbody>${body}</tbody>`;\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n' as RendererOutput;\n  }\n\n  tablerow({ text }: Tokens.TableRow<ParserOutput>): RendererOutput {\n    return `<tr>\\n${text}</tr>\\n` as RendererOutput;\n  }\n\n  tablecell(token: Tokens.TableCell): RendererOutput {\n    const content = this.parser.parseInline(token.tokens);\n    const type = token.header ? 'th' : 'td';\n    const tag = token.align\n      ? `<${type} align=\"${token.align}\">`\n      : `<${type}>`;\n    return tag + content + `</${type}>\\n` as RendererOutput;\n  }\n\n  /**\n   * span level renderer\n   */\n  strong({ tokens }: Tokens.Strong): RendererOutput {\n    return `<strong>${this.parser.parseInline(tokens)}</strong>` as RendererOutput;\n  }\n\n  em({ tokens }: Tokens.Em): RendererOutput {\n    return `<em>${this.parser.parseInline(tokens)}</em>` as RendererOutput;\n  }\n\n  codespan({ text }: Tokens.Codespan): RendererOutput {\n    return `<code>${escape(text, true)}</code>` as RendererOutput;\n  }\n\n  br(token: Tokens.Br): RendererOutput {\n    return '<br>' as RendererOutput;\n  }\n\n  del({ tokens }: Tokens.Del): RendererOutput {\n    return `<del>${this.parser.parseInline(tokens)}</del>` as RendererOutput;\n  }\n\n  link({ href, title, tokens }: Tokens.Link): RendererOutput {\n    const text = this.parser.parseInline(tokens) as string;\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return text as RendererOutput;\n    }\n    href = cleanHref;\n    let out = '<a href=\"' + href + '\"';\n    if (title) {\n      out += ' title=\"' + (escape(title)) + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out as RendererOutput;\n  }\n\n  image({ href, title, text, tokens }: Tokens.Image): RendererOutput {\n    if (tokens) {\n      text = this.parser.parseInline(tokens, this.parser.textRenderer) as string;\n    }\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return escape(text) as RendererOutput;\n    }\n    href = cleanHref;\n\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${escape(title)}\"`;\n    }\n    out += '>';\n    return out as RendererOutput;\n  }\n\n  text(token: Tokens.Text | Tokens.Escape): RendererOutput {\n    return 'tokens' in token && token.tokens\n      ? this.parser.parseInline(token.tokens) as unknown as RendererOutput\n      : ('escaped' in token && token.escaped ? token.text as RendererOutput : escape(token.text) as RendererOutput);\n  }\n}\n", "import type { Tokens } from './Tokens.ts';\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nexport class _TextRenderer<RendererOutput = string> {\n  // no need for block level renderers\n  strong({ text }: Tokens.Strong): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  em({ text }: Tokens.Em): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  codespan({ text }: Tokens.Codespan): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  del({ text }: Tokens.Del): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  html({ text }: Tokens.HTML | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  text({ text }: Tokens.Text | Tokens.Escape | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  link({ text }: Tokens.Link): RendererOutput {\n    return '' + text as RendererOutput;\n  }\n\n  image({ text }: Tokens.Image): RendererOutput {\n    return '' + text as RendererOutput;\n  }\n\n  br(): RendererOutput {\n    return '' as RendererOutput;\n  }\n\n  checkbox({ raw }: Tokens.Checkbox): RendererOutput {\n    return raw as RendererOutput;\n  }\n}\n", "import { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _defaults } from './defaults.ts';\nimport type { MarkedToken, Token, Tokens } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Parsing & Compiling\n */\nexport class _Parser<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  renderer: _Renderer<ParserOutput, RendererOutput>;\n  textRenderer: _TextRenderer<RendererOutput>;\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n    this.options.renderer = this.options.renderer || new _Renderer<ParserOutput, RendererOutput>();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.renderer.parser = this;\n    this.textRenderer = new _TextRenderer<RendererOutput>();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse<ParserOutput = string, RendererOutput = string>(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const parser = new _Parser<ParserOutput, RendererOutput>(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline<ParserOutput = string, RendererOutput = string>(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const parser = new _Parser<ParserOutput, RendererOutput>(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens: Token[]): ParserOutput {\n    let out = '';\n\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const genericToken = anyToken as Tokens.Generic;\n        const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'def', 'paragraph', 'text'].includes(genericToken.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      const token = anyToken as MarkedToken;\n\n      switch (token.type) {\n        case 'space': {\n          out += this.renderer.space(token);\n          break;\n        }\n        case 'hr': {\n          out += this.renderer.hr(token);\n          break;\n        }\n        case 'heading': {\n          out += this.renderer.heading(token);\n          break;\n        }\n        case 'code': {\n          out += this.renderer.code(token);\n          break;\n        }\n        case 'table': {\n          out += this.renderer.table(token);\n          break;\n        }\n        case 'blockquote': {\n          out += this.renderer.blockquote(token);\n          break;\n        }\n        case 'list': {\n          out += this.renderer.list(token);\n          break;\n        }\n        case 'checkbox': {\n          out += this.renderer.checkbox(token);\n          break;\n        }\n        case 'html': {\n          out += this.renderer.html(token);\n          break;\n        }\n        case 'def': {\n          out += this.renderer.def(token);\n          break;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(token);\n          break;\n        }\n        case 'text': {\n          out += this.renderer.text(token);\n          break;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return '' as ParserOutput;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out as ParserOutput;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens: Token[], renderer: _Renderer<ParserOutput, RendererOutput> | _TextRenderer<RendererOutput> = this.renderer): ParserOutput {\n    let out = '';\n\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const ret = this.options.extensions.renderers[anyToken.type].call({ parser: this }, anyToken);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(anyToken.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      const token = anyToken as MarkedToken;\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token);\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token);\n          break;\n        }\n        case 'checkbox': {\n          out += renderer.checkbox(token);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(token);\n          break;\n        }\n        case 'em': {\n          out += renderer.em(token);\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token);\n          break;\n        }\n        case 'br': {\n          out += renderer.br(token);\n          break;\n        }\n        case 'del': {\n          out += renderer.del(token);\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return '' as ParserOutput;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out as ParserOutput;\n  }\n}\n", "import { _defaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, TokensList } from './Tokens.ts';\n\nexport class _Hooks<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  block?: boolean;\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  static passThroughHooks = new Set([\n    'preprocess',\n    'postprocess',\n    'processAllTokens',\n    'emStrongMask',\n  ]);\n\n  static passThroughHooksRespectAsync = new Set([\n    'preprocess',\n    'postprocess',\n    'processAllTokens',\n  ]);\n\n  /**\n   * Process markdown before marked\n   */\n  preprocess(markdown: string) {\n    return markdown;\n  }\n\n  /**\n   * Process HTML after marked is finished\n   */\n  postprocess(html: ParserOutput) {\n    return html;\n  }\n\n  /**\n   * Process all tokens before walk tokens\n   */\n  processAllTokens(tokens: Token[] | TokensList) {\n    return tokens;\n  }\n\n  /**\n   * Mask contents that should not be interpreted as em/strong delimiters\n   */\n  emStrongMask(src: string) {\n    return src;\n  }\n\n  /**\n   * Provide function to tokenize markdown\n   */\n  provideLexer() {\n    return this.block ? _Lexer.lex : _Lexer.lexInline;\n  }\n\n  /**\n   * Provide function to parse tokens\n   */\n  provideParser() {\n    return this.block ? _Parser.parse<ParserOutput, RendererOutput> : _Parser.parseInline<ParserOutput, RendererOutput>;\n  }\n}\n", "import { _getDefaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { escape } from './helpers.ts';\nimport type { MarkedExtension, MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, Tokens, TokensList } from './Tokens.ts';\n\nexport type MaybePromise = void | Promise<void>;\n\ntype UnknownFunction = (...args: unknown[]) => unknown;\ntype GenericRendererFunction = (...args: unknown[]) => string | false;\n\nexport class Marked<ParserOutput = string, RendererOutput = string> {\n  defaults = _getDefaults<ParserOutput, RendererOutput>();\n  options = this.setOptions;\n\n  parse = this.parseMarkdown(true);\n  parseInline = this.parseMarkdown(false);\n\n  Parser = _Parser<ParserOutput, RendererOutput>;\n  Renderer = _Renderer<ParserOutput, RendererOutput>;\n  TextRenderer = _TextRenderer<RendererOutput>;\n  Lexer = _Lexer;\n  Tokenizer = _Tokenizer<ParserOutput, RendererOutput>;\n  Hooks = _Hooks<ParserOutput, RendererOutput>;\n\n  constructor(...args: MarkedExtension<ParserOutput, RendererOutput>[]) {\n    this.use(...args);\n  }\n\n  /**\n   * Run callback for every token\n   */\n  walkTokens(tokens: Token[] | TokensList, callback: (token: Token) => MaybePromise | MaybePromise[]) {\n    let values: MaybePromise[] = [];\n    for (const token of tokens) {\n      values = values.concat(callback.call(this, token));\n      switch (token.type) {\n        case 'table': {\n          const tableToken = token as Tokens.Table;\n          for (const cell of tableToken.header) {\n            values = values.concat(this.walkTokens(cell.tokens, callback));\n          }\n          for (const row of tableToken.rows) {\n            for (const cell of row) {\n              values = values.concat(this.walkTokens(cell.tokens, callback));\n            }\n          }\n          break;\n        }\n        case 'list': {\n          const listToken = token as Tokens.List;\n          values = values.concat(this.walkTokens(listToken.items, callback));\n          break;\n        }\n        default: {\n          const genericToken = token as Tokens.Generic;\n          if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n            this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n              const tokens = genericToken[childTokens].flat(Infinity) as Token[] | TokensList;\n              values = values.concat(this.walkTokens(tokens, callback));\n            });\n          } else if (genericToken.tokens) {\n            values = values.concat(this.walkTokens(genericToken.tokens, callback));\n          }\n        }\n      }\n    }\n    return values;\n  }\n\n  use(...args: MarkedExtension<ParserOutput, RendererOutput>[]) {\n    const extensions: MarkedOptions<ParserOutput, RendererOutput>['extensions'] = this.defaults.extensions || { renderers: {}, childTokens: {} };\n\n    args.forEach((pack) => {\n      // copy options to new object\n      const opts = { ...pack } as MarkedOptions<ParserOutput, RendererOutput>;\n\n      // set async to true if it was set to true before\n      opts.async = this.defaults.async || opts.async || false;\n\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        pack.extensions.forEach((ext) => {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n          if ('renderer' in ext) { // Renderer extensions\n            const prevRenderer = extensions.renderers[ext.name];\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function(...args) {\n                let ret = ext.renderer.apply(this, args);\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n          if ('tokenizer' in ext) { // Tokenizer Extensions\n            if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n            const extLevel = extensions[ext.level];\n            if (extLevel) {\n              extLevel.unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n            if (ext.start) { // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n          if ('childTokens' in ext && ext.childTokens) { // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n        opts.extensions = extensions;\n      }\n\n      // ==-- Parse \"overwrite\" extensions --== //\n      if (pack.renderer) {\n        const renderer = this.defaults.renderer || new _Renderer<ParserOutput, RendererOutput>(this.defaults);\n        for (const prop in pack.renderer) {\n          if (!(prop in renderer)) {\n            throw new Error(`renderer '${prop}' does not exist`);\n          }\n          if (['options', 'parser'].includes(prop)) {\n            // ignore options property\n            continue;\n          }\n          const rendererProp = prop as Exclude<keyof _Renderer<ParserOutput, RendererOutput>, 'options' | 'parser'>;\n          const rendererFunc = pack.renderer[rendererProp] as GenericRendererFunction;\n          const prevRenderer = renderer[rendererProp] as GenericRendererFunction;\n          // Replace renderer with func to run extension, but fall back if false\n          renderer[rendererProp] = (...args: unknown[]) => {\n            let ret = rendererFunc.apply(renderer, args);\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n            return (ret || '') as RendererOutput;\n          };\n        }\n        opts.renderer = renderer;\n      }\n      if (pack.tokenizer) {\n        const tokenizer = this.defaults.tokenizer || new _Tokenizer<ParserOutput, RendererOutput>(this.defaults);\n        for (const prop in pack.tokenizer) {\n          if (!(prop in tokenizer)) {\n            throw new Error(`tokenizer '${prop}' does not exist`);\n          }\n          if (['options', 'rules', 'lexer'].includes(prop)) {\n            // ignore options, rules, and lexer properties\n            continue;\n          }\n          const tokenizerProp = prop as Exclude<keyof _Tokenizer<ParserOutput, RendererOutput>, 'options' | 'rules' | 'lexer'>;\n          const tokenizerFunc = pack.tokenizer[tokenizerProp] as UnknownFunction;\n          const prevTokenizer = tokenizer[tokenizerProp] as UnknownFunction;\n          // Replace tokenizer with func to run extension, but fall back if false\n          // @ts-expect-error cannot type tokenizer function dynamically\n          tokenizer[tokenizerProp] = (...args: unknown[]) => {\n            let ret = tokenizerFunc.apply(tokenizer, args);\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n            return ret;\n          };\n        }\n        opts.tokenizer = tokenizer;\n      }\n\n      // ==-- Parse Hooks extensions --== //\n      if (pack.hooks) {\n        const hooks = this.defaults.hooks || new _Hooks<ParserOutput, RendererOutput>();\n        for (const prop in pack.hooks) {\n          if (!(prop in hooks)) {\n            throw new Error(`hook '${prop}' does not exist`);\n          }\n          if (['options', 'block'].includes(prop)) {\n            // ignore options and block properties\n            continue;\n          }\n          const hooksProp = prop as Exclude<keyof _Hooks<ParserOutput, RendererOutput>, 'options' | 'block'>;\n          const hooksFunc = pack.hooks[hooksProp] as UnknownFunction;\n          const prevHook = hooks[hooksProp] as UnknownFunction;\n          if (_Hooks.passThroughHooks.has(prop)) {\n            // @ts-expect-error cannot type hook function dynamically\n            hooks[hooksProp] = (arg: unknown) => {\n              if (this.defaults.async && _Hooks.passThroughHooksRespectAsync.has(prop)) {\n                return (async() => {\n                  const ret = await hooksFunc.call(hooks, arg);\n                  return prevHook.call(hooks, ret);\n                })();\n              }\n\n              const ret = hooksFunc.call(hooks, arg);\n              return prevHook.call(hooks, ret);\n            };\n          } else {\n            // @ts-expect-error cannot type hook function dynamically\n            hooks[hooksProp] = (...args: unknown[]) => {\n              if (this.defaults.async) {\n                return (async() => {\n                  let ret = await hooksFunc.apply(hooks, args);\n                  if (ret === false) {\n                    ret = await prevHook.apply(hooks, args);\n                  }\n                  return ret;\n                })();\n              }\n\n              let ret = hooksFunc.apply(hooks, args);\n              if (ret === false) {\n                ret = prevHook.apply(hooks, args);\n              }\n              return ret;\n            };\n          }\n        }\n        opts.hooks = hooks;\n      }\n\n      // ==-- Parse WalkTokens extensions --== //\n      if (pack.walkTokens) {\n        const walkTokens = this.defaults.walkTokens;\n        const packWalktokens = pack.walkTokens;\n        opts.walkTokens = function(token) {\n          let values: MaybePromise[] = [];\n          values.push(packWalktokens.call(this, token));\n          if (walkTokens) {\n            values = values.concat(walkTokens.call(this, token));\n          }\n          return values;\n        };\n      }\n\n      this.defaults = { ...this.defaults, ...opts };\n    });\n\n    return this;\n  }\n\n  setOptions(opt: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.defaults = { ...this.defaults, ...opt };\n    return this;\n  }\n\n  lexer(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    return _Lexer.lex(src, options ?? this.defaults);\n  }\n\n  parser(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    return _Parser.parse<ParserOutput, RendererOutput>(tokens, options ?? this.defaults);\n  }\n\n  private parseMarkdown(blockType: boolean) {\n    type overloadedParse = {\n      (src: string, options: MarkedOptions<ParserOutput, RendererOutput> & { async: true }): Promise<ParserOutput>;\n      (src: string, options: MarkedOptions<ParserOutput, RendererOutput> & { async: false }): ParserOutput;\n      (src: string, options?: MarkedOptions<ParserOutput, RendererOutput> | null): ParserOutput | Promise<ParserOutput>;\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const parse: overloadedParse = (src: string, options?: MarkedOptions<ParserOutput, RendererOutput> | null): any => {\n      const origOpt = { ...options };\n      const opt = { ...this.defaults, ...origOpt };\n\n      const throwError = this.onError(!!opt.silent, !!opt.async);\n\n      // throw error if an extension set async to true but parse was called with async: false\n      if (this.defaults.async === true && origOpt.async === false) {\n        return throwError(new Error('marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.'));\n      }\n\n      // throw error in case of non string input\n      if (typeof src === 'undefined' || src === null) {\n        return throwError(new Error('marked(): input parameter is undefined or null'));\n      }\n      if (typeof src !== 'string') {\n        return throwError(new Error('marked(): input parameter is of type '\n          + Object.prototype.toString.call(src) + ', string expected'));\n      }\n\n      if (opt.hooks) {\n        opt.hooks.options = opt;\n        opt.hooks.block = blockType;\n      }\n\n      if (opt.async) {\n        return (async() => {\n          const processedSrc = opt.hooks ? await opt.hooks.preprocess(src) : src;\n          const lexer = opt.hooks ? await opt.hooks.provideLexer() : (blockType ? _Lexer.lex : _Lexer.lexInline);\n          const tokens = await lexer(processedSrc, opt);\n          const processedTokens = opt.hooks ? await opt.hooks.processAllTokens(tokens) : tokens;\n          if (opt.walkTokens) {\n            await Promise.all(this.walkTokens(processedTokens, opt.walkTokens));\n          }\n          const parser = opt.hooks ? await opt.hooks.provideParser() : (blockType ? _Parser.parse : _Parser.parseInline);\n          const html = await parser(processedTokens, opt);\n          return opt.hooks ? await opt.hooks.postprocess(html) : html;\n        })().catch(throwError);\n      }\n\n      try {\n        if (opt.hooks) {\n          src = opt.hooks.preprocess(src) as string;\n        }\n        const lexer = opt.hooks ? opt.hooks.provideLexer() : (blockType ? _Lexer.lex : _Lexer.lexInline);\n        let tokens = lexer(src, opt);\n        if (opt.hooks) {\n          tokens = opt.hooks.processAllTokens(tokens);\n        }\n        if (opt.walkTokens) {\n          this.walkTokens(tokens, opt.walkTokens);\n        }\n        const parser = opt.hooks ? opt.hooks.provideParser() : (blockType ? _Parser.parse : _Parser.parseInline);\n        let html = parser(tokens, opt);\n        if (opt.hooks) {\n          html = opt.hooks.postprocess(html);\n        }\n        return html;\n      } catch(e) {\n        return throwError(e as Error);\n      }\n    };\n\n    return parse;\n  }\n\n  private onError(silent: boolean, async: boolean) {\n    return (e: Error): string | Promise<string> => {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (silent) {\n        const msg = '<p>An error occurred:</p><pre>'\n          + escape(e.message + '', true)\n          + '</pre>';\n        if (async) {\n          return Promise.resolve(msg);\n        }\n        return msg;\n      }\n\n      if (async) {\n        return Promise.reject(e);\n      }\n      throw e;\n    };\n  }\n}\n", "import { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { Marked } from './Instance.ts';\nimport {\n  _getDefaults,\n  changeDefaults,\n  _defaults,\n} from './defaults.ts';\nimport type { MarkedExtension, MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, TokensList } from './Tokens.ts';\nimport type { MaybePromise } from './Instance.ts';\n\nconst markedInstance = new Marked();\n\n/**\n * Compiles markdown to HTML asynchronously.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options, having async: true\n * @return Promise of string of compiled HTML\n */\nexport function marked(src: string, options: MarkedOptions & { async: true }): Promise<string>;\n\n/**\n * Compiles markdown to HTML.\n *\n * @param src String of markdown source to be compiled\n * @param options Optional hash of options\n * @return String of compiled HTML. Will be a Promise of string if async is set to true by any extensions.\n */\nexport function marked(src: string, options: MarkedOptions & { async: false }): string;\nexport function marked(src: string, options: MarkedOptions & { async: true }): Promise<string>;\nexport function marked(src: string, options?: MarkedOptions | null): string | Promise<string>;\nexport function marked(src: string, opt?: MarkedOptions | null): string | Promise<string> {\n  return markedInstance.parse(src, opt);\n}\n\n/**\n * Sets the default options.\n *\n * @param options Hash of options\n */\nmarked.options =\n  marked.setOptions = function(options: MarkedOptions) {\n    markedInstance.setOptions(options);\n    marked.defaults = markedInstance.defaults;\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n/**\n * Gets the original marked default options.\n */\nmarked.getDefaults = _getDefaults;\n\nmarked.defaults = _defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args: MarkedExtension[]) {\n  markedInstance.use(...args);\n  marked.defaults = markedInstance.defaults;\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens: Token[] | TokensList, callback: (token: Token) => MaybePromise | MaybePromise[]) {\n  return markedInstance.walkTokens(tokens, callback);\n};\n\n/**\n * Compiles markdown to HTML without enclosing `p` tag.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options\n * @return String of compiled HTML\n */\nmarked.parseInline = markedInstance.parseInline;\n\n/**\n * Expose\n */\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\n\nexport const options = marked.options;\nexport const setOptions = marked.setOptions;\nexport const use = marked.use;\nexport const walkTokens = marked.walkTokens;\nexport const parseInline = marked.parseInline;\nexport const parse = marked;\nexport const parser = _Parser.parse;\nexport const lexer = _Lexer.lex;\nexport { _defaults as defaults, _getDefaults as getDefaults } from './defaults.ts';\nexport { _Lexer as Lexer } from './Lexer.ts';\nexport { _Parser as Parser } from './Parser.ts';\nexport { _Tokenizer as Tokenizer } from './Tokenizer.ts';\nexport { _Renderer as Renderer } from './Renderer.ts';\nexport { _TextRenderer as TextRenderer } from './TextRenderer.ts';\nexport { _Hooks as Hooks } from './Hooks.ts';\nexport { Marked } from './Instance.ts';\nexport type * from './MarkedOptions.ts';\nexport type * from './Tokens.ts';\n", "// Environment detection for API URL\r\nfunction getApiUrl() {\r\n  if (window.location.hostname === 'localhost' ||\r\n      window.location.hostname === '127.0.0.1') {\r\n    return 'http://localhost:8785'  // Local development\r\n  }\r\n  return 'https://hyperdrive-v2.katani.workers.dev'  // Production\r\n}\r\n\r\n// Berry Fansite API Configuration\r\nexport const API_CONFIG = {\r\n  // Hyperdrive API base URL - automatically detects environment\r\n  BASE_URL: getApiUrl(),\r\n\r\n  // API endpoints\r\n  ENDPOINTS: {\r\n    songlist: '/songlist',\r\n    songlistArtists: '/songlist/artists',\r\n    streamlist: '/streamlist',\r\n    setlist: '/setlist',\r\n    aliases: '/aliases',\r\n    aliasesGrouped: '/aliases/grouped',\r\n    aliasesQuickAdd: '/aliases/quick-add',\r\n    aliasesTest: '/aliases/test',\r\n    aliasesBatch: '/aliases/batch',\r\n    health: '/health'\r\n  },\r\n\r\n  // Request timeout (ms)\r\n  TIMEOUT: 30000, // Increased to 30s for batch operations\r\n\r\n  // Retry configuration\r\n  RETRY: {\r\n    attempts: 3,\r\n    delay: 1000 // Base delay, will be multiplied by attempt number\r\n  }\r\n}\r\n\r\n// ETag cache storage (in-memory)\r\nconst etagCache = new Map() // { endpoint: { etag, data } }\r\n\r\n// API request helper with error handling, retry, and ETag support\r\nexport async function apiRequest(method, endpoint, data = null, options = {}) {\r\n  const url = `${API_CONFIG.BASE_URL}${endpoint}`\r\n  const methodUpper = method.toUpperCase()\r\n  const config = {\r\n    method: methodUpper,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers\r\n    },\r\n    ...options\r\n  }\r\n\r\n  // For GET requests, add If-None-Match header if ETag exists in cache\r\n  if (methodUpper === 'GET' && etagCache.has(endpoint)) {\r\n    const cached = etagCache.get(endpoint)\r\n    config.headers['If-None-Match'] = cached.etag\r\n  }\r\n\r\n  if (data && (methodUpper === 'POST' || methodUpper === 'PUT' || methodUpper === 'PATCH')) {\r\n    config.body = JSON.stringify(data)\r\n  }\r\n\r\n  let lastError = null\r\n\r\n  // Retry logic\r\n  for (let attempt = 1; attempt <= API_CONFIG.RETRY.attempts; attempt++) {\r\n    try {\r\n      const controller = new AbortController()\r\n      const timeoutId = setTimeout(() => controller.abort(), API_CONFIG.TIMEOUT)\r\n\r\n      const response = await fetch(url, {\r\n        ...config,\r\n        cache: 'no-store', // \u5F37\u5236\u6BCF\u6B21\u91CD\u9A57\u8B49\uFF0C\u914D\u5408 ETag\r\n        signal: controller.signal\r\n      })\r\n\r\n      clearTimeout(timeoutId)\r\n\r\n      // Handle 304 Not Modified - return cached data\r\n      if (response.status === 304) {\r\n        const cached = etagCache.get(endpoint)\r\n        if (cached) {\r\n          console.log(`[ETag] 304 Not Modified for ${endpoint}, using cached data`)\r\n          return cached.data\r\n        }\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}))\r\n        throw new Error(errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n\r\n      const result = await response.json()\r\n      const resultData = result.data || result\r\n\r\n      // For GET requests, cache the ETag and data\r\n      if (methodUpper === 'GET' && response.headers.has('etag')) {\r\n        const etag = response.headers.get('etag')\r\n        etagCache.set(endpoint, { etag, data: resultData })\r\n        console.log(`[ETag] Cached ${endpoint} with ETag: ${etag}`)\r\n      }\r\n\r\n      // For mutating requests (POST/PUT/DELETE), invalidate related caches\r\n      if (methodUpper !== 'GET') {\r\n        invalidateCache(endpoint)\r\n      }\r\n\r\n      return resultData\r\n\r\n    } catch (error) {\r\n      lastError = error\r\n      console.warn(`API request attempt ${attempt} failed:`, error.message)\r\n\r\n      // Don't retry on client errors (4xx)\r\n      if (error.message.includes('HTTP 4')) {\r\n        break\r\n      }\r\n\r\n      // Wait before retrying (except on last attempt)\r\n      if (attempt < API_CONFIG.RETRY.attempts) {\r\n        await new Promise(resolve => setTimeout(resolve, API_CONFIG.RETRY.delay * attempt))\r\n      }\r\n    }\r\n  }\r\n\r\n  throw lastError\r\n}\r\n\r\n// Invalidate cache for related endpoints after mutations\r\nfunction invalidateCache(endpoint) {\r\n  // Determine which caches to clear based on the mutation endpoint\r\n  if (endpoint.includes('/songlist')) {\r\n    etagCache.delete('/songlist')\r\n    etagCache.delete('/setlist')  // setlist includes song data\r\n    console.log('[ETag] Invalidated cache: songlist, setlist')\r\n  } else if (endpoint.includes('/streamlist')) {\r\n    etagCache.delete('/streamlist')\r\n    etagCache.delete('/setlist')  // setlist includes stream data\r\n    console.log('[ETag] Invalidated cache: streamlist, setlist')\r\n  } else if (endpoint.includes('/setlist')) {\r\n    etagCache.delete('/setlist')\r\n    console.log('[ETag] Invalidated cache: setlist')\r\n  }\r\n}\r\n\r\n// Loading state management\r\nexport class LoadingManager {\r\n  constructor() {\r\n    this.activeRequests = new Set()\r\n  }\r\n\r\n  start(requestId) {\r\n    this.activeRequests.add(requestId)\r\n    this.updateUI()\r\n  }\r\n\r\n  end(requestId) {\r\n    this.activeRequests.delete(requestId)\r\n    this.updateUI()\r\n  }\r\n\r\n  updateUI() {\r\n    const isLoading = this.activeRequests.size > 0\r\n    const loadingElements = document.querySelectorAll('.loading-indicator')\r\n\r\n    loadingElements.forEach(el => {\r\n      el.style.display = isLoading ? 'inline-block' : 'none'\r\n    })\r\n\r\n    // Update button states\r\n    const buttons = document.querySelectorAll('button')\r\n    buttons.forEach(btn => {\r\n      if (btn.dataset.disableOnLoading) {\r\n        btn.disabled = isLoading\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const loadingManager = new LoadingManager()\r\n\r\n// Error display helper\r\nexport function showError(message, type = 'danger') {\r\n  const alertDiv = document.createElement('div')\r\n  alertDiv.className = `alert alert-${type} alert-dismissible fade show`\r\n  alertDiv.innerHTML = `\r\n    ${message}\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\r\n  `\r\n\r\n  const container = document.getElementById('setTableMsg') || document.getElementById('content')\r\n  if (container) {\r\n    container.appendChild(alertDiv)\r\n\r\n    // Auto-dismiss after 5 seconds\r\n    setTimeout(() => {\r\n      if (alertDiv.parentNode) {\r\n        alertDiv.remove()\r\n      }\r\n    }, 5000)\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["require_dayjs_min", "__commonJSMin", "exports", "module", "t", "n", "r", "i", "s", "u", "a", "o", "c", "f", "h", "d", "l", "$", "y", "M", "e", "m", "v", "g", "D", "p", "S", "_", "w", "O", "b", "k", "require_utc", "__commonJSMin", "exports", "module", "t", "i", "e", "s", "f", "n", "u", "r", "o", "a", "h", "l", "c", "import_jquery", "init_bootstrap_esm", "CoreFeature", "table", "data", "silent", "columnsChanged", "force", "key", "value", "oldOption", "newOption", "convert", "msg", "Helpers", "el", "box", "separator", "field", "structure", "length", "output", "i", "obj", "clone", "list", "objectProto", "arrayProto", "subject", "match", "copy", "item", "Popup", "element", "parent", "container", "callback", "touch", "x", "y", "parentOffset", "position", "offset", "containerOffset", "origin", "parentEl", "coords", "e", "scrollTop", "offsetHeight", "Module", "name", "func", "args", "component", "handler", "priority", "adjust", "index", "lookupIndex", "renderInPosition", "menuEl", "menuContainer", "content", "type", "defaultAccessors", "params", "column", "row", "Accessor", "_Accessor", "config", "accessor", "rowComponent", "colComponent", "defaultConfig", "generateParamsList", "prefix", "serializeParams", "encoded", "urlBuilder", "url", "defaultLoaderPromise", "contentType", "resolve", "reject", "response", "error", "defaultContentTypeFormatters", "form", "Ajax", "_Ajax", "defaultURLGenerator", "ajaxParams", "previousData", "ajaxConfig", "defaultPasteActions", "defaultPasteParsers", "clipboard", "headerFindSuccess", "columns", "columnMap", "rows", "bindings$2", "actions$2", "extensions$4", "bindings", "actions", "Clipboard", "_Clipboard", "extensions", "plain", "html", "rowData", "col", "range", "internal", "sel", "textRange", "action", "parser", "valid", "blocked", "CalcComponent", "target", "receiver", "transform", "cells", "cell", "CellComponent", "mutate", "Cell", "vertAligns", "hozAligns", "classNames", "className", "val", "containerOnly", "changed", "ColumnComponent", "ifVisible", "to", "after", "toColumn", "nextCol", "prevCol", "updates", "width", "result", "defaultColumnOptions", "Column", "_Column", "defaultOptions", "def", "rowHeader", "newCol", "defaults", "contentElement", "titleHolderElement", "titleElement", "text", "title", "contents", "dataObj", "alignment", "height", "parentHeight", "traverse", "updateBranches", "colDefs", "visible", "responsiveToggle", "childWidth", "child", "minWidth", "maxWidth", "cellCount", "setTo", "definition", "RowComponent", "Row", "inFragment", "children", "maxHeight", "minHeight", "updatedData", "tempData", "newRowData", "attrname", "findCell", "before", "toRow", "blockRedraw", "defaultCalculations", "values", "calcParams", "precision", "sum", "unique", "ColumnCalcs", "_ColumnCalcs", "viewable", "fragment", "left", "groups", "group", "hasDataTreeColumnCalcs", "dataTree", "dataRow", "pos", "calcs", "paramKey", "results", "groupObj", "subGroups", "subGroupResults", "subgroup", "DataTree", "dummyEl", "options", "firstCol", "childArray", "isArray", "oldControl", "allChildren", "sortOnly", "subChildren", "sub", "childData", "childRow", "childIndex", "top", "recurse", "csv$1", "setFileContents", "delimiter", "fileContents", "headers", "json$2", "pdf", "header", "body", "autoTableParams", "rowGroupStyles", "rowCalcStyles", "jsPDFParams", "jspdfLib", "doc", "parseRow", "styles", "xlsx$1", "self", "sheetName", "XLSXLib", "workbook", "tableFeatures", "compression", "writeOptions", "generateSheet", "merges", "worksheet", "a", "b", "j", "sheet", "s2ab", "s", "buf", "view", "html$1", "jsonLines", "defaultDownloaders", "csv", "json", "xlsx", "Download", "_Download", "mimeType", "filename", "active", "interceptCallback", "downloadFunc", "buildLink", "mime", "groupHeader", "newTab", "blob", "maskInput", "mask", "maskLetter", "maskNumber", "maskWildcard", "fillSymbols", "symbol", "char", "input", "onRendered", "success", "cancel", "editorParams", "cellValue", "onChange", "textarea$1", "vertNav", "scrollHeight", "heightNow", "number$1", "blurFunc", "date$1", "inputFormat", "DT", "convertDate", "newDatetime", "luxDate", "time$1", "luxTime", "datetime$2", "luxDateTime", "Edit$1", "editor", "initialValue", "cellEl", "clickStop", "listEl", "attribs", "valueKeys", "valueCheck", "character", "iteration", "responseValues", "placeholder", "term", "inputValues", "option", "level", "sorter", "as", "bs", "a1", "b1", "L", "rx", "rd", "emptyAlign", "filterFunc", "matches", "label", "startVis", "blur", "List", "star$1", "maxStars", "size", "stars", "starsHolder", "star", "starChange", "buildStar", "starHolder", "nextStar", "changeValue", "progress$1", "max", "min", "percent", "handle", "bar", "mouseDrag", "mouseDragWidth", "updateValue", "style", "calcVal", "tickCross$1", "tristate", "indetermValue", "indetermState", "trueValueSet", "falseValueSet", "setValue", "checkedValue", "adaptable$1", "lookup", "editorFunc", "defaultLookup", "defaultEditors", "textarea", "number", "date", "time", "datetime", "progress", "tickCross", "adaptable", "Edit", "_Edit", "newRow", "nextCell", "prevRow", "nextRow", "prevCell", "convertEmpty", "block", "forceEdit", "topEdge", "bottomEdge", "rowEl", "leftEdge", "rightEdge", "check", "allowEdit", "rendered", "editFinished", "cellEditor", "mod", "checkFunc", "editIndex", "ExportRow", "indent", "ExportColumn", "depth", "columnLookups$1", "rowLookups$1", "Export", "_Export", "columnLookups", "rowLookups", "colVisProp", "colLookup", "rowLookup", "colData", "maxDepth", "groupData", "subGroup", "subGroupData", "visProp", "headerDepth", "exportRows", "parseColumnGroup", "exportCols", "headerEl", "bodyEl", "rowFormatter", "setup", "cellStyle", "styleProps", "cellWrapper", "formatComponent", "holder", "from", "props", "fromStyle", "prop", "defaultFilters", "filterVal", "rowVal", "filterParams", "keywords", "keyword", "Filter", "_Filter", "all", "filterType", "filterChangeCheck", "fieldVal", "colVal", "reinitialize", "filterElement", "editorElement", "typingTimer", "searchTrigger", "onRenderedCallback", "headerPos", "filter", "filters", "ajax", "filterList", "searchType", "activeRows", "rowList", "activeRowComponents", "subFilter", "plaintext", "formatterParams", "money", "floatVal", "sign", "integer", "decimal", "rgx", "decimalSym", "thousandSym", "negativeSign", "link", "urlPrefix", "download", "labelTraverse", "path", "image", "src", "empty", "truthy", "tick", "cross", "datetime$1", "outputFormat", "invalid", "datetimediff", "suffix", "unit", "humanize", "starActive", "starInactive", "traffic", "colors", "color", "percentValue", "legendAlign", "legend", "legendColor", "barEl", "barContainer", "legendEl", "holderEl", "buttonTick", "buttonCross", "toggle", "sizePx", "containEl", "switchEl", "onValue", "offValue", "state", "rownum", "formatterFunc", "formatter", "array$2", "valueMap", "json$1", "multiline", "replacer", "defaultFormatters", "array", "Format", "_Format", "mockCell", "entityMap", "FrozenColumns", "allCells", "leftParents", "leftMargin", "rightMargin", "visibleRows", "otherRows", "FrozenRows", "frozenRows", "rowType", "GroupComponent", "Group", "_Group", "groupManager", "generator", "oldGroup", "elementsOnly", "arrow", "toggleElement", "groupID", "groupKey", "toIndex", "count", "prev", "includeChildren", "GroupRows", "groupBy", "startOpen", "langValue", "lang", "cols", "lookupFunc", "prevValue", "groupRows", "groupValues", "toGroup", "fromGroup", "groupComponents", "groupList", "groupListData", "oldGroups", "newGroupNeeded", "oldRowGroup", "oldGroupPath", "newGroupPath", "samePath", "groupPath", "groupId", "onlyGroupHeaders", "defaultUndoers", "defaultRedoers", "bindings$1", "actions$1", "extensions$3", "History", "_History", "oldRow", "HtmlTableImport", "attributes", "optionsArr", "optionsList", "attrib", "exists", "inQuote", "nextChar", "array$1", "workbook2", "defaultImporters", "Import", "_Import", "err", "importFormat", "importer", "extension", "importReader", "file", "reader", "parsedData", "firstRow", "Interaction", "types", "added", "noTouch", "watchers", "componentObj", "defaultBindings", "defaultActions", "rowManager", "newPos", "scrollMax", "Keybindings", "_Keybindings", "mergedBindings", "binding", "bindingList", "symbolsList", "symbols", "code", "Menu", "icon", "headerMenuEl", "menu", "parentPopup", "popup", "itemEl", "disabled", "MoveColumns", "colEl", "startXMove", "nextColWidth", "prevColWidth", "nextColWidthLast", "prevColWidthLast", "diff", "moveToCol", "headerElement", "headersElement", "movingCells", "columnHolder", "scrollLeft", "xPos", "scrollPos", "defaultSenders", "fromRow", "toTable", "defaultReceivers", "fromTable", "MoveRows", "_MoveRows", "startYMove", "nextRowHeight", "prevRowHeight", "nextRowHeightLast", "prevRowHeightLast", "moveToRow", "pageX", "pageY", "rowHolder", "yPos", "connectionTables", "query", "dropEvent", "sender", "defaultMutators", "Mutator", "_Mutator", "mutator", "links", "linkCell", "pageSize", "currentRow", "currentPage", "totalRows", "totalPages", "showingEl", "valueEl", "ofEl", "totalEl", "rowsEl", "pages", "defaultPageCounters", "Page", "_Page", "displayRows", "testElRow", "testElCell", "dir", "margin", "button", "pageSizes", "counter", "pageCounter", "hidden", "pageSelectLabel", "paginationCounterHolder", "mode", "rowCount", "page", "leftSize", "rightSize", "actualRowPageSize", "start", "end", "actualStartRow", "actualRows", "paginationOutOfRange", "footer", "defaultReaders", "id", "cookie", "cookiePos", "defaultWriters", "expireDate", "Persistence", "_Persistence", "testKey", "retrievedData", "sorters", "headerFilters", "layout", "keys", "newValue", "current", "oldCols", "newCols", "mergeAllNew", "definitions", "excludedKeys", "defStore", "colDef", "headerPopupEl", "renderedCallback", "contentsEl", "Print", "scrollX", "scrollY", "footerEl", "tableEl", "headerContent", "footerContent", "ReactiveData", "version", "arg", "newRows", "startRow", "oldRows", "childField", "origFuncs", "update", "ResizeColumns", "frozenOffset", "variableHeight", "nearestColumn", "handleDown", "oldWidth", "handleEl", "startDiff", "moveDiff", "blockedBefore", "blockedAfter", "colWidth", "mouseX", "handleX", "tableX", "columnX", "mouseDiff", "guideEl", "mouseMove", "mouseUp", "ResizeRows", "prevHandle", "prevHandleDown", "mouseY", "handleY", "tableY", "rowY", "ResizeTable", "tableStyle", "entry", "nodeHeight", "nodeWidth", "entries", "responsiveCollapse", "toggleList", "isOpen", "collapseEl", "extensions$2", "ResponsiveLayout", "colCount", "working", "mockCellComponent", "titleData", "valueData", "node_content", "titleHighlight", "rowSelection", "checkbox", "extensions$1", "SelectRow", "prevSelected", "selectable", "endSelect", "lastClickedRowIdx", "rowIdx", "fromRowIdx", "toRowIdx", "toggledRows", "toggledRow", "changes", "rowMatch", "change", "rowInfo", "selectedRow", "selected", "deselected", "select", "RangeComponent", "Range", "rangeManager", "rowsCount", "isRowHeader", "_vDomTop", "_vDomBottom", "_vDomLeft", "_vDomRight", "bottom", "right", "topLeftCell", "bottomRightCell", "topLeftCellEl", "bottomRightCellEl", "topLeftRowEl", "bottomRightRowEl", "structured", "arr", "clearValue", "notify", "pasteActions", "singleCell", "bounds", "startCell", "rowWidth", "dataLength", "pasteParsers", "startCol", "itemLength", "SelectRange", "frozenCols", "ranges", "selectedColumns", "selectedColumn", "_event", "_to", "_after", "event", "rangeIdx", "jump", "expand", "moved", "rangeEdge", "prevRect", "rowRect", "rowManagerRect", "columnRect", "columnManagerRect", "removed", "reverse", "emptyStart", "emptySide", "items", "valueResolver", "nextItem", "currentItem", "currentValue", "rowPos", "colPos", "isStartingCellEmpty", "isLeftOfStartingCellEmpty", "targetCols", "jumpCol", "isRightOfStartingCellEmpty", "isTopOfStartingCellEmpty", "jumpRow", "isBottomOfStartingCellEmpty", "tableHolder", "rect", "withinHorizontalView", "withinVerticalView", "occupied", "activeCell", "activeCellEl", "activeRowEl", "colIdx", "visibleCells", "aRow", "bRow", "alignEmptyValues", "thousand", "string", "locale", "format", "boolean", "el1", "el2", "calc", "c", "d", "alphanum", "defaultSorters", "Sort", "_Sort", "sortList", "arrowEl", "newSortList", "sortListActual", "rowComponents", "sortObj", "sortEl", "sorterCount", "sortItem", "el1Comp", "el2Comp", "GridCalculator", "SheetComponent", "Sheet", "spreadsheetManager", "ref", "refs", "wasInactive", "full", "rowWidths", "outputWidth", "outputHeight", "Spreadsheet", "altContainer", "data1", "data2", "sheets", "prevSheet", "Tooltip", "tooltip", "defaultValidators", "parameters", "reg", "cellData", "Validate", "_Validate", "previousValue", "cancelled", "validator", "validators", "failedValidators", "invalidIndex", "OptionsList", "msgType", "userOptions", "warn", "Renderer", "includingBuffer", "rowIndex", "BasicHorizontal", "rowFrag", "VirtualDomHorizontal", "buffer", "old", "colEnd", "ex", "newWidth", "widthDiff", "ColumnManager", "renderClass", "renderers", "RendererVirtualDomHorizontal", "RendererBasicHorizontal", "collProgress", "rowSample", "nextToColumn", "topColumn", "parentIndex", "nextEl", "root", "fieldRoot", "updateRows", "fromIndex", "totalWidth", "fixedWidth", "BasicVertical", "tableFrag", "rowTop", "VirtualDomVertical", "topRow", "topOffset", "topDiff", "bottomDiff", "topFound", "bottomRow", "forceMove", "topPad", "rowsHeight", "rowHeight", "heightOccupied", "topPadHeight", "rowFragment", "renderedRows", "totalRowsRendered", "rowsToRender", "fixedHeight", "containerHeight", "avgRowHeight", "resized", "fillableSpace", "addedRows", "paddingAdjust", "initialized", "removableRows", "RowManager", "leftDir", "topDir", "allIndex", "activeIndex", "displayIndex", "refreshDisplayOnly", "chainResult", "rowOnly", "skipStage", "stage", "cascadeOrder", "chain", "scrollbarWidth", "RendererVirtualDomVertical", "RendererBasicVertical", "initialHeight", "otherHeight", "FooterManager", "InteractionManager", "listenerMap", "listener", "leaveList", "linkedKeys", "listeners", "components", "comp", "targets", "componentMap", "classList", "elTargets", "targetMatches", "previousTarget", "ComponentFunctionBinder", "funcName", "DataLoader", "replace", "requestNo", "map", "shouldLoad", "ExternalEventBus", "debug", "subscribed", "notifiers", "callResult", "InternalEventBus", "fallback", "subscriber", "confirmed", "DeprecationAdvisor", "DependencyRegistry", "dependency", "fitData", "forced", "fitDataGeneral", "fitDataStretch", "colsWidth", "tableWidth", "gap", "lastCol", "fitColumns", "flexWidth", "flexGrowUnits", "flexColWidth", "flexColumns", "fixedShrinkColumns", "flexShrinkUnits", "overflowWidth", "gapFill", "calcWidth", "scaleColumns", "freeSpace", "shrinkCols", "oversizeCols", "oversizeSpace", "remainingSpace", "remainingFlexGrowUnits", "changeUnits", "undersizeCols", "calcGrow", "calcShrink", "defaultModes", "Layout", "_Layout", "dataChanged", "defaultLangs", "Localize", "_Localize", "desiredLocale", "traverseLang", "trans", "fillPath", "pathArray", "rootPath", "Comms", "selectors", "connections", "connection", "con", "module", "TableRegistry", "_TableRegistry", "ModuleBinder", "_ModuleBinder", "defaultModules", "coreModules", "property", "source", "modules", "core", "mods", "modKey", "ext", "propKey", "orderedStartMods", "orderedEndMods", "unOrderedMods", "Alert", "Tabulator", "_Tabulator", "InteractionMonitor", "newElement", "ua", "stack", "line", "responses", "foundRows", "fromColumn", "plugin", "required", "Tabulator$1", "TabulatorFull", "allModules", "TabulatorFull$1", "_getDefaults", "_defaults", "changeDefaults", "newDefaults", "noopTest", "edit", "regex", "opt", "source", "obj", "name", "val", "valSource", "other", "supportsLookbehind", "bull", "indent", "newline", "blockCode", "fences", "hr", "heading", "bullet", "lheadingCore", "lheading", "lheadingGfm", "_paragraph", "blockText", "_blockLabel", "def", "list", "_tag", "_comment", "html", "paragraph", "blockquote", "blockNormal", "gfmTable", "blockGfm", "blockPedantic", "escape", "inlineCode", "br", "inlineText", "_punctuation", "_punctuationOrSpace", "_notPunctuationOrSpace", "punctuation", "_punctuationGfmStrongEm", "_punctuationOrSpaceGfmStrongEm", "_notPunctuationOrSpaceGfmStrongEm", "blockSkip", "emStrongLDelimCore", "emStrongLDelim", "emStrongLDelimGfm", "emStrongRDelimAstCore", "emStrongRDelimAst", "emStrongRDelimAstGfm", "emStrongRDelimUnd", "anyPunctuation", "autolink", "_inlineComment", "tag", "_inlineLabel", "link", "reflink", "nolink", "reflinkSearch", "_caseInsensitiveProtocol", "inlineNormal", "inlinePedantic", "inlineGfm", "inlineBreaks", "block", "inline", "escapeReplacements", "getEscapeReplacement", "ch", "encode", "cleanUrl", "href", "splitCells", "tableRow", "count", "row", "match", "offset", "str", "escaped", "curr", "cells", "i", "rtrim", "c", "invert", "l", "suffLen", "currChar", "findClosingBracket", "b", "level", "outputLink", "cap", "raw", "lexer", "rules", "title", "text", "token", "indentCodeCompensation", "matchIndentToCode", "indentToCode", "node", "matchIndentInNode", "indentInNode", "_Tokenizer", "options", "src", "trimmed", "lines", "tokens", "inBlockquote", "currentLines", "currentRaw", "currentText", "top", "lastToken", "oldToken", "newText", "newToken", "isordered", "itemRegex", "endsWithBlankLine", "endEarly", "itemContents", "line", "t", "nextLine", "blankLine", "nextBulletRegex", "hrRegex", "fencesBeginRegex", "headingBeginRegex", "htmlBeginRegex", "rawLine", "nextLineWithoutTabs", "lastItem", "item", "taskRaw", "checkboxToken", "spacers", "hasMultipleLineBreaks", "headers", "aligns", "rows", "align", "cell", "trimmedUrl", "rtrimSlash", "lastParenIndex", "linkLen", "links", "linkString", "maskedSrc", "prevChar", "lLength", "rDelim", "rLength", "delimTotal", "midDelimTotal", "endReg", "lastCharLength", "hasNonSpaceChars", "hasSpaceCharsOnBothEnds", "prevCapZero", "_Lexer", "__Lexer", "next", "lastParagraphClipped", "extTokenizer", "cutSrc", "startIndex", "tempSrc", "tempStart", "getStartIndex", "errMsg", "keepPrevChar", "_Renderer", "lang", "langString", "code", "depth", "ordered", "start", "body", "j", "type", "startAttr", "checked", "header", "k", "content", "cleanHref", "out", "_TextRenderer", "_Parser", "__Parser", "anyToken", "genericToken", "ret", "renderer", "_Hooks", "markdown", "Marked", "args", "callback", "values", "tableToken", "listToken", "childTokens", "extensions", "pack", "opts", "ext", "prevRenderer", "extLevel", "prop", "rendererProp", "rendererFunc", "tokenizer", "tokenizerProp", "tokenizerFunc", "prevTokenizer", "hooks", "hooksProp", "hooksFunc", "prevHook", "arg", "walkTokens", "packWalktokens", "blockType", "origOpt", "throwError", "processedSrc", "processedTokens", "e", "silent", "async", "msg", "markedInstance", "marked", "setOptions", "use", "parseInline", "parser", "_Parser", "lexer", "_Lexer", "import_dayjs", "import_utc", "init_bootstrap_min", "getApiUrl", "API_CONFIG", "etagCache", "apiRequest", "method", "endpoint", "data", "options", "url", "methodUpper", "config", "cached", "lastError", "attempt", "controller", "timeoutId", "response", "errorData", "result", "resultData", "etag", "invalidateCache", "error", "resolve", "LoadingManager", "requestId", "isLoading", "el", "btn", "loadingManager", "showError", "message", "type", "alertDiv", "container", "$", "bootstrap_esm_exports", "TabulatorFull$1", "d", "dayjs", "N", "fancyboxPromise", "mod", "fb", "maybeFactory", "utc", "nav", "msgModal", "Modal", "e", "setContent", "path", "clk", "url", "title", "process", "normalizedPath", "t", "ext", "API_CONFIG", "c", "configJsonTable", "textStatus", "request", "getLatest", "r", "setContentMDTable", "jqXHR", "getDynamicFieldData", "table", "field", "fieldEn", "tableData", "uniqueOptions", "row", "fieldValue", "val", "trimmedVal", "jaValue", "enValue", "displayText", "a", "b", "showContextMenu", "x", "y", "items", "menu", "item", "menuItem", "batchTable", "batchStreamData", "batchEditModal", "batchSongSelect2Editor", "cell", "onRendered", "success", "cancel", "editor", "hasSucceeded", "op", "dataOptions", "apiRequest", "s", "selectedId", "selectedData", "rowData", "error", "setlistSongSelect2Editor", "$editor", "songlist", "currentSongID", "endpoint", "id", "updateData", "songDisplayFormatter", "openBatchEditor", "streamData", "existingEntries", "firstEntry", "lastEntry", "loadExistingSetlist", "entries", "songMap", "rows", "entry", "song", "recalculateTrackNumbers", "quickStreamData", "quickCurrentTrack", "quickAddModal", "quickSongSelect2", "openQuickAdd", "maxTrack", "firstSegment", "showConnectionError", "errorDetails", "message", "jsonTable", "colDef", "setlistColDef", "value", "date", "dateWithYTLink", "select2", "headerValue", "rowValue", "searchTerm", "jaMatch", "enMatch", "ja", "en", "streamlistColDef", "imageLink", "multiLineLinkFormat", "filterParams", "titleMatch", "idMatch", "filterVal", "rowCat", "categories", "cat", "AUTOCOMPLETE_PARAMS", "aliasesColDef", "songlistColDef", "data", "canEdit", "dateValue", "initializeArtistSelect", "params", "results", "term", "updateAllHeaderFilterOptions", "triggerField", "triggerValue", "filteredData", "$select", "currentValue", "uniqueValues", "v", "enField", "newValues", "currentOptions", "idx", "isMultiple", "option", "validValues", "tagOption", "editorParams", "f", "fEn", "cellElement", "isHeaderFilter", "dropdownParent", "tableContainer", "fieldPlaceholder", "bilingualEditor", "fieldLabel", "modal", "newJA", "newEN", "u", "p", "initialColDef", "col", "newCol", "rest", "response", "err", "input", "idField", "apiField", "finalValue", "currentColDef", "editableColDef", "getProcess", "viewColDef", "currentProcess", "showError", "addRowModal", "addSongModal", "info", "i", "songName", "artistName", "songData", "submitBtn", "originalText", "newSong", "currentPath", "selectedRows", "successCount", "failCount", "filename", "fillVedioInfo", "addStreamRowModal", "categoryData", "obj", "BERRYCHANNEL", "getYoutubeVideoId", "preCategory", "streamID", "time", "note", "result", "errorMsg", "errorDetail", "tempData", "addFromLatestList", "existingIds", "newData", "loadQuickAddOptions", "aliasType", "options", "artists", "titles", "showQuickAliasAlert", "type", "alertContainer", "alertClass", "canonicalName", "aliasValue", "jsonText", "jsonData", "aliases", "aliasValues", "summary", "trackNo", "inputText", "html", "match", "ytPrefix", "idLength", "prefix", "origin", "chat", "ytLatest", "gitCommitMsg", "getYTlatest", "getGitCommitMsg", "resolve", "reject", "startTrack", "totalSongs", "segment", "index", "errors", "$saveBtn", "batchData", "$btn", "songOptions", "quickAddSong", "songID", "songDisplay", "listItem", "lastSong"]
}
