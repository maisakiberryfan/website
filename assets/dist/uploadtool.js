import{b as r,c as i,d as g,e as h}from"./chunk-CSUD4WDS.js";import{a as c}from"./chunk-YFG2QU5G.js";import{b as u,d as f}from"./chunk-SGR7OAP4.js";var w=u(()=>{var e=f(c());g();h();window.$=window.jQuery=e.default;window.bootstrap=i;(0,e.default)(async()=>{var d=new r(document.getElementById("modal"));(0,e.default)("#fileUpload").on("change",s=>{}),(0,e.default)("#form").on("submit",async s=>{s.preventDefault(),(0,e.default)("#modalMsg").html("uploading"),d.show();let l=document.getElementById("fileUpload").files[0];var o={committer:(0,e.default)("#committer").val(),msg:(0,e.default)("#msg").val(),fileName:l.name,fileBase64:await p(l)};function p(t){return new Promise((a,n)=>{let m=new FileReader;m.readAsDataURL(t),m.onload=()=>a(m.result.split(",")[1]),m.onerror=n})}e.default.ajax({url:"https://githubuploader.katani.workers.dev/",method:"POST",data:{path:o.fileName,message:o.msg,committer:{name:o.committer},content:o.fileBase64}}).done((t,a,n)=>{t=JSON.parse(t),t.content===void 0?(0,e.default)("#modalMsg").html(`<p>ERROR\uFF1A${t.message}</p>`):(0,e.default)("#modalMsg").html(`<p>upload success</p><p><a href='${t.content.html_url}'>File on github</p>`)}).fail((t,a)=>{(0,e.default)("#modalMsg").html(`JQuery AJAX ERROR\uFF1A${a}`)})})})});export default w();
//# sourceMappingURL=uploadtool.js.map
